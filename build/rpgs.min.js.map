{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5fa21a50d6ae6e181505","webpack:///./src/index.js","webpack:///./src/rpgs/core/BaseNode.js","webpack:///./src/rpgs/core/Utils.js","webpack:///./src/rpgs/core/Plug.js","webpack:///./src/rpgs/core/ConnectorManager.js","webpack:///./src/rpgs/core/Connector.js","webpack:///./src/rpgs/core/ParamsManager.js","webpack:///./src/rpgs/core/CompoundNode.js","webpack:///./src/rpgs/core/ErrorCode.js","webpack:///./src/rpgs/core/ErrorHandler.js","webpack:///./src/rpgs/dialogs/AnswerNode.js","webpack:///./src/rpgs/dialogs/DialogNode.js","webpack:///./src/rpgs/dialogs/DialogWalker.js","webpack:///./src/rpgs/dialogs/TalkNode.js","webpack:///./src/rpgs/RPGSystem.js","webpack:///./src/rpgs/core/NodePool.js","webpack:///./src/rpgs/core/NodeFactory.js","webpack:///./src/rpgs/core/NodeCreator.js"],"names":["module","exports","BaseNode","require","CompoundNode","Connector","ConnectorManager","ErrorCode","ErrorHandler","ParamsManager","Plug","Utils","AnswerNode","DialogNode","DialogWalker","TalkNode","RPGSystem","_uuid","WeakMap","_label","_x","_y","getRandomLabel","prefix","id","substr","nodePool","data","_data","set","uuid","getUUID","className","constructor","name","indexOf","label","get","x","y","pm","params","cm","_init","setData","addConnector","VISIBLE","ENABLED","type","value","addParam","getParamValue","setParamValue","removeParam","class","getId","getLabel","wires","getData","getParams","node","index","canRecieveWire","nodeId","addWire","getWires","removeWire","dispose","delete","UUID","self","lut","i","toString","generate","d0","Math","random","d1","d2","d3","indexOfObject","array","obj","length","getIndexById","addObjectToArray","push","removeObjectFromArray","spliced","splice","GOTO","_connectors","parsed","connector","nodes","hasOwnProperty","getConnector","map","n","limit","connectors","alreadyExist","filter","c","getType","canAddWire","forEach","_type","_limit","_wires","isNaN","parseInt","getLimit","wireLen","wire","_params","_paramExist","paramName","containerObj","keys","Object","k","_addParam","paramType","paramValue","isMandatory","mand","undefined","param","getParam","_children","children","getChildren","child","canSetAsChild","canAddChild","addNode","setNodeAsChild","removeNode","ret","findNode","childId","newIndex","len","oldIndex","NODE_NOT_EXISTS","CLASS_NOT_DEFINED","CONNECTION_TO_ITSELF","IMPROPER_CONNECTION","OBJECT_NOT_FOUND","MANDATORY_PARAM","INCORRECT_TYPE","INCORRECT_PARENT_NODE","INCORRECT_LINK_TARGET","INCOMPATIBLE_CHILD","_logger","_setLogger","logger","_showMsg","errorCode","msg","node1","node2","parent","Error","setLogger","showMsg","_text","text","getText","_start","startTalk","getStartTalk","setStartTalk","getChild","talkId","childExist","_currTalk","_rpgs","_dialog","rpgs","dialogId","dialog","reset","talk","conversation","currTalk","options","answer","active","isActive","enabled","isVisible","answerNode","setTalk","_errorHandler","_nodeFactory","_nodePool","_nodeCreator","_mergeNodes","JSON","parse","d","_setData","clearData","mergeNodes","addDialog","addTalk","addAnswer","setConnection","getNodes","serialize","NodePool","nodeFactory","errorHandler","_objectPool","createNode","isNodeFound","removeWiresTo","getNodesByClass","slice","stringify","NodeFactory","_createNode","NodeCreator","_lastChild","_parentHistory","_tempWires","_setConnection","nodeId1","nodeId2","targetNode","referenceNode","canBeWiredTo","_getWaitingWiresForNode","asChild","createChildNode","nodeParams","addChild","unshift","shift","_addNode","_addDialog","_addTalk","_addAnswer","_addWire","referenceNodeId"],"mappings":"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","file":"rpgs.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rpgs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rpgs\"] = factory();\n\telse\n\t\troot[\"rpgs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5fa21a50d6ae6e181505","module.exports = {\r\n  BaseNode: require('./rpgs/core/BaseNode'),\r\n  CompoundNode: require('./rpgs/core/CompoundNode'),\r\n  Connector: require('./rpgs/core/Connector'),\r\n  ConnectorManager: require('./rpgs/core/ConnectorManager'),\r\n  ErrorCode: require('./rpgs/core/ErrorCode'),\r\n  ErrorHandler: require('./rpgs/core/ErrorHandler'),\r\n  ParamsManager: require('./rpgs/core/ParamsManager'),\r\n  Plug: require('./rpgs/core/Plug'),\r\n  Utils: require('./rpgs/core/Utils'),\r\n  AnswerNode: require('./rpgs/dialogs/AnswerNode'),\r\n  DialogNode: require('./rpgs/dialogs/DialogNode'),\r\n  DialogWalker: require('./rpgs/dialogs/DialogWalker'),\r\n  TalkNode: require('./rpgs/dialogs/TalkNode'),\r\n  RPGSystem: require('./rpgs/RPGSystem')\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/index.js","'use strict';\r\nimport Utils from './Utils';\r\nimport Plug from './Plug';\r\nimport ConnectorManager from './ConnectorManager';\r\nimport ParamsManager from './ParamsManager';\r\n\r\nlet BaseNode = (function () {\r\n\r\n  // Weak maps are new feature to JavaScript. We can store private\r\n  // object properties in key/value pairs using our instance as the key,\r\n  // and our class can capture those key/value maps in a closure.\r\n  let _uuid = new WeakMap();\r\n  let _label = new WeakMap();\r\n  let _x = new WeakMap();\r\n  let _y = new WeakMap();\r\n\r\n  const getRandomLabel = (prefix, id) => prefix + id.substr(0, 4);\r\n  /* function executeScript(rpgs, scriptId) {\r\n    let _script = rpgs.findNode(scriptId);\r\n\r\n    return _script !== null && _script.execute ? _script.execute({rpgs: rpgs}) : true;\r\n  }*/\r\n\r\n  return class BaseNode {\r\n    constructor(nodePool, data) {\r\n      let _data = data || {};\r\n\r\n      // console.log('BaseNode', nodePool);\r\n      // If uuid not present, then by default we assign Universally Unique ID.\r\n      _uuid.set(this, _data.uuid ? _data.uuid : Utils.getUUID());\r\n\r\n      let className = this.constructor.name;\r\n      let prefix = className.substr(0, className.indexOf('Node')) + '-';\r\n\r\n      _label.set(this, _data.label ?\r\n        _data.label : getRandomLabel(prefix, _uuid.get(this)));\r\n      _x.set(this, _data.x ? _data.x : 0);\r\n      _y.set(this, _data.y ? _data.y : 0);\r\n      this.nodePool = nodePool;\r\n      this.pm = new ParamsManager(_data.params || {});\r\n      this.cm = new ConnectorManager();\r\n      this._init();\r\n      this.cm.setData(_data);\r\n    }\r\n\r\n    _init() {\r\n      this.cm.addConnector(Plug.VISIBLE, 1);\r\n      this.cm.addConnector(Plug.ENABLED, 1);\r\n    }\r\n\r\n    addParam(name, type, value) {\r\n      this.pm.addParam(name, type, value);\r\n    }\r\n\r\n    getParam(name) {\r\n      return this.pm.getParamValue(name);\r\n    }\r\n\r\n    setParam(name, value) {\r\n      this.pm.setParamValue(name, value);\r\n    }\r\n\r\n    removeParam(name) {\r\n      this.pm.removeParam(name);\r\n    }\r\n\r\n    setId(value) {\r\n      _uuid.set(this, value);\r\n    }\r\n\r\n    getId() {\r\n      return _uuid.get(this);\r\n    }\r\n\r\n    setLabel(value) {\r\n      _label.set(this, value);\r\n    }\r\n\r\n    getLabel() {\r\n      return _label.get(this);\r\n    }\r\n\r\n    set x(value) {\r\n      _x.set(this, value);\r\n    }\r\n\r\n    get x() {\r\n      return _x.get(this);\r\n    }\r\n\r\n    set y(value) {\r\n      _y.set(this, value);\r\n    }\r\n\r\n    get y() {\r\n      return _y.get(this);\r\n    }\r\n\r\n    /**\r\n     * Returns visibility state.\r\n     * @return {boolean} Visibility state\r\n     */\r\n    isVisible() {\r\n      return true;// executeScript(this.rpgs, this.cm.getWires(Plug.VISIBLE)[0]);\r\n    }\r\n\r\n    /**\r\n     * Returns activity state.\r\n     * @return {boolean} Active state\r\n     */\r\n    isActive() {\r\n      return true;// executeScript(this.rpgs, this.cm.getWires(Plug.ENABLED)[0]);\r\n    }\r\n\r\n    getData() {\r\n      return {\r\n        class: this.constructor.name,\r\n        uuid: this.getId(),\r\n        label: this.getLabel(),\r\n        wires: this.cm.getData(),\r\n        params: this.pm.getParams(),\r\n        x: this.x,\r\n        y: this.y\r\n      };\r\n    }\r\n\r\n    canAddChild(type) {\r\n      // false because cannot have children\r\n      return false;\r\n    }\r\n\r\n    addChild(params) {\r\n      // empty because cannot have children\r\n    }\r\n\r\n    setNodeAsChild(node) {\r\n      // empty because cannot have children\r\n    }\r\n\r\n    removeChild(index) {\r\n      // empty because cannot have children\r\n    }\r\n\r\n    getChild(index) {\r\n      // null because cannot have children\r\n      return null;\r\n    }\r\n\r\n    getChildren() {\r\n      // empty array because cannot have children\r\n      return [];\r\n    }\r\n\r\n    canBeWiredTo(type) {\r\n      return false;\r\n    }\r\n\r\n    canRecieveWire(type) {\r\n      return this.cm.canRecieveWire(type);\r\n    }\r\n\r\n    addWire(type, nodeId) {\r\n      this.cm.addWire(type, nodeId);\r\n    }\r\n\r\n    getWires(type) {\r\n      return this.cm.getWires(type);\r\n    }\r\n\r\n    removeWire(type, nodeId) {\r\n      this.cm.removeWire(type, nodeId);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from BaseNode');\r\n      this.cm.dispose();\r\n      this.pm.dispose();\r\n      this.cm = null;\r\n      this.pm = null;\r\n      this.nodePool = null;\r\n      _uuid.delete(this);\r\n      _label.delete(this);\r\n      _x.delete(this);\r\n      _y.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = BaseNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/BaseNode.js","'use strict';\r\n\r\n/**\r\n * Fast UUID generator, RFC4122 version 4 compliant.\r\n * @author Jeff Ward (jcward.com).\r\n * @license MIT license\r\n * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n **/\r\nvar UUID = (function () {\r\n  var self = {};\r\n  var lut = [];\r\n  var i;\r\n\r\n  for (i = 0; i < 256; i++) {\r\n    lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n  }\r\n\r\n  self.generate = function () {\r\n    var d0 = Math.random() * 0xffffffff | 0;\r\n    var d1 = Math.random() * 0xffffffff | 0;\r\n    var d2 = Math.random() * 0xffffffff | 0;\r\n    var d3 = Math.random() * 0xffffffff | 0;\r\n\r\n    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] +\r\n      lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' +\r\n      lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n      lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] +\r\n      lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] +\r\n      lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n  };\r\n\r\n  return self;\r\n})();\r\n\r\nexports.getUUID = UUID.generate;\r\n\r\nlet indexOfObject = function (array, obj) {\r\n  var i;\r\n\r\n  for (i = 0; i < array.length; i++) {\r\n    if (array[i] === obj) return i;\r\n  }\r\n  return -1;\r\n};\r\n\r\nexports.indexOfObject = indexOfObject;\r\n\r\nlet getIndexById = function (array, id) {\r\n  var i;\r\n\r\n  for (i = 0; i < array.length; i++) {\r\n    if (array[i].getId() === id) return i;\r\n  }\r\n  return -1;\r\n};\r\n\r\nexports.getIndexById = getIndexById;\r\n\r\nexports.addObjectToArray = function (array, obj) {\r\n  if (indexOfObject(array, obj) === -1) {\r\n    array.push(obj);\r\n  }\r\n  return array;\r\n};\r\n\r\nexports.removeObjectFromArray = function (array, obj) {\r\n  let index = indexOfObject(array, obj);\r\n\r\n  if (index !== -1) {\r\n    let spliced = array.splice(index, 1);\r\n\r\n    if (spliced.dispose) spliced.dispose();\r\n  }\r\n  return array;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Utils.js","'use strict';\r\n\r\nconst VISIBLE = 'visible';\r\nconst ENABLED = 'enabled';\r\nconst GOTO = 'goto';\r\n\r\nexports.VISIBLE = VISIBLE;\r\nexports.ENABLED = ENABLED;\r\nexports.GOTO = GOTO;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Plug.js","'use strict';\r\nimport Connector from './Connector';\r\n\r\nlet ConnectorManager = (function () {\r\n\r\n  let _connectors = new WeakMap();\r\n\r\n  return class ConnectorManager {\r\n\r\n    constructor() {\r\n      _connectors.set(this, []);\r\n    }\r\n\r\n    setData(data) {\r\n      let wires = data.wires || {};\r\n      let parsed = [];\r\n      let connector, nodes;\r\n\r\n      for (let type in wires) {\r\n        if (wires.hasOwnProperty(type)) {\r\n          connector = this.getConnector(type);\r\n          if (connector !== null) {\r\n            nodes = wires[type];\r\n            nodes.map(n => connector.addWire(n));\r\n            parsed.push(connector);\r\n          }\r\n        }\r\n      }\r\n      return parsed;\r\n    }\r\n\r\n    addConnector(type, limit) {\r\n      let connectors = _connectors.get(this);\r\n      let alreadyExist = connectors.filter(c => c.getType() === type).length > 0;\r\n\r\n      if (!alreadyExist) {\r\n        connectors.push(new Connector(type, limit));\r\n        _connectors.set(this, connectors);\r\n      }\r\n    }\r\n\r\n    getConnector(type) {\r\n      let connectors = _connectors.get(this) || null;\r\n      let connector = null;\r\n\r\n      if (connectors !== null) {\r\n        connector = connectors.filter(c => c.getType() === type);\r\n      }\r\n      return connector !== null && connector.length > 0 ? connector[0] : null;\r\n    }\r\n\r\n    canRecieveWire(type) {\r\n      let connectors = _connectors.get(this);\r\n\r\n      return connectors.filter(c => {\r\n        return c.getType() === type && c.canAddWire();\r\n      }).length > 0;\r\n    }\r\n\r\n    addWire(type, nodeId) {\r\n      let connector = this.getConnector(type);\r\n\r\n      if (connector !== null) {\r\n        connector.addWire(nodeId);\r\n      }\r\n    }\r\n\r\n    getWires(type) {\r\n      let connector = this.getConnector(type);\r\n\r\n      return connector !== null ? connector.getWires() : [];\r\n    }\r\n\r\n    removeWire(type, nodeId) {\r\n      let connector = this.getConnector(type);\r\n\r\n      if (connector !== null) {\r\n        connector.removeWire(nodeId);\r\n      }\r\n    }\r\n\r\n    removeWiresTo(nodeId) {\r\n      let connectors = _connectors.get(this) || null;\r\n\r\n      if (connectors !== null) {\r\n        connectors.forEach(c => c.removeWire(nodeId));\r\n      }\r\n    }\r\n\r\n    getData() {\r\n      let data = {};\r\n      let connectors = _connectors.get(this) || [];\r\n      let type, nodes, i;\r\n\r\n      for (i = 0; i < connectors.length; i++) {\r\n        type = connectors[i].getType();\r\n        nodes = connectors[i].getWires();\r\n        data[type] = nodes;\r\n      }\r\n      return data;\r\n    }\r\n\r\n    dispose() {\r\n      _connectors.get(this).map((c) => { c.dispose(); });\r\n      _connectors.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = ConnectorManager;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ConnectorManager.js","'use strict';\r\n\r\nlet Connector = (function () {\r\n  let _type = new WeakMap();\r\n  let _limit = new WeakMap();\r\n  let _wires = new WeakMap();\r\n\r\n  return class Connector {\r\n\r\n    constructor(type, limit) {\r\n      _type.set(this, type);\r\n      _limit.set(this, isNaN(parseInt(limit, 10)) ? -1 : parseInt(limit, 10));\r\n      _wires.set(this, []);\r\n    }\r\n\r\n    getType() {\r\n      return _type.get(this);\r\n    }\r\n\r\n    getLimit() {\r\n      return _limit.get(this);\r\n    }\r\n\r\n    getWires() {\r\n      return _wires.get(this);\r\n    }\r\n\r\n    canAddWire() {\r\n      let limit = this.getLimit();\r\n      let wireLen = this.getWires().length;\r\n\r\n      return limit === -1 || (limit > 0 && wireLen < limit);\r\n    }\r\n\r\n    addWire(nodeId) {\r\n      let wire = this.getWires();\r\n\r\n      if (this.canAddWire()) {\r\n        wire.push(nodeId);\r\n        _wires.set(this, wire);\r\n      }\r\n    }\r\n\r\n    removeWire(nodeId) {\r\n      _wires.set(this, _wires.get(this).filter(wire => {\r\n        return wire !== nodeId;\r\n      }));\r\n    }\r\n\r\n    dispose() {\r\n      _type.delete(this);\r\n      _limit.delete(this);\r\n      _wires.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = Connector;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Connector.js","'use strict';\r\n\r\nlet ParamsManager = (function () {\r\n  let _params = new WeakMap();\r\n\r\n  function _paramExist(paramName, containerObj) {\r\n    let keys = Object.keys(containerObj);\r\n\r\n    return keys.filter(k => k === paramName).length > 0;\r\n  }\r\n\r\n  function _addParam(paramName, paramType, paramValue, containerObj, isMandatory) {\r\n    if (!_paramExist(paramName, containerObj)) {\r\n      containerObj[paramName] = {\r\n        type: paramType,\r\n        value: paramValue,\r\n        mand: isMandatory\r\n      };\r\n    } else {\r\n      // console.warn();\r\n    }\r\n    return containerObj;\r\n  }\r\n\r\n  return class ParamsManager {\r\n    constructor(data) {\r\n      _params.set(this, data || {});\r\n    }\r\n\r\n    addMandatoryParam(name, type, value) {\r\n      _params.set(this, _addParam(name, type, value, _params.get(this), true));\r\n    }\r\n\r\n    addParam(name, type, value) {\r\n      _params.set(this, _addParam(name, type, value, _params.get(this), false));\r\n    }\r\n\r\n    getParam(name) {\r\n      let params = _params.get(this);\r\n\r\n      return params[name] !== undefined ? params[name] : null;\r\n    }\r\n\r\n    getParamValue(name) {\r\n      let param = this.getParam(name);\r\n\r\n      return param !== null ? param.value : null;\r\n    }\r\n\r\n    setParamValue(name, value) {\r\n      let params = _params.get(this);\r\n\r\n      if (params[name] !== undefined) params[name].value = value;\r\n    }\r\n\r\n    removeParam(name) {\r\n      let param = this.getParam(name);\r\n      let params = _params.get(this);\r\n\r\n      if (param !== null && !param.mand) {\r\n        delete params[name];\r\n        _params.set(this, params);\r\n      }\r\n    }\r\n\r\n    getParams() {\r\n      return _params.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      _params.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = ParamsManager;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ParamsManager.js","'use strict';\r\nimport BaseNode from '../core/BaseNode';\r\nimport Utils from '../core/Utils';\r\n\r\nlet CompoundNode = (function () {\r\n\r\n  let _children = new WeakMap();\r\n\r\n  return class CompoundNode extends BaseNode {\r\n\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _children.set(this, data && data.children ? data.children : []);\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.children = this.getChildren().map(child => child.getId());\r\n      return data;\r\n    }\r\n\r\n    setNodeAsChild(node) {\r\n      let canSetAsChild = node !== null && this.canAddChild(node.getData().class);\r\n      let children = _children.get(this);\r\n\r\n      // console.log('addChild',child.getId());\r\n      if (canSetAsChild) {\r\n        _children.set(this, Utils.addObjectToArray(children, node.getId()));\r\n      }\r\n      return canSetAsChild;\r\n    }\r\n\r\n    canAddChild(type) {\r\n      return true;\r\n    }\r\n\r\n    addChild(data) {\r\n      let canSetAsChild = data && data.class ? this.canAddChild(data.class) : false;\r\n      let child = canSetAsChild ? this.nodePool.addNode(data) : null;\r\n\r\n      if (child !== null) this.setNodeAsChild(child);\r\n      return child;\r\n    }\r\n\r\n    removeChild(index) {\r\n      let children = _children.get(this);\r\n\r\n      if (index >= 0 && index < children.length) {\r\n        this.nodePool.removeNode(children[index]);\r\n        children.splice(index, 1);\r\n        _children.set(this, children);\r\n      }\r\n    }\r\n\r\n    getChild(index) {\r\n      let children = this.getChildren();\r\n\r\n      return children.length > index ? children[index] : null;\r\n    }\r\n\r\n    getChildren() {\r\n      let children = _children.get(this);\r\n      let ret = [];\r\n\r\n      if (children !== undefined) {\r\n        ret = children.map(childId => this.nodePool.findNode(childId));\r\n      }\r\n      return ret;\r\n    }\r\n\r\n    setChildIndex(childId, newIndex) {\r\n      let children = _children.get(this);\r\n      let len = children.length;\r\n      let oldIndex = children.indexOf(childId);\r\n\r\n      if (oldIndex < 0) return;\r\n      newIndex = newIndex < 0 ? 0 : (newIndex >= len ? len - 1 : newIndex);\r\n      children.splice(newIndex, 0, children.splice(oldIndex, 1)[0]);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from CompoundNode');\r\n      _children.get(this).map(childId => {\r\n        this.nodePool.removeNode(childId);\r\n      });\r\n      _children.delete(this);\r\n      super.dispose();\r\n    }\r\n\r\n  };\r\n})();\r\n\r\nmodule.exports = CompoundNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/CompoundNode.js","'use strict';\r\n\r\nconst NODE_NOT_EXISTS = 0;\r\nconst CLASS_NOT_DEFINED = 1;\r\nconst CONNECTION_TO_ITSELF = 2;\r\nconst IMPROPER_CONNECTION = 3;\r\nconst OBJECT_NOT_FOUND = 4;\r\nconst MANDATORY_PARAM = 5;\r\nconst INCORRECT_TYPE = 6;\r\nconst INCORRECT_PARENT_NODE = 7;\r\nconst INCORRECT_LINK_TARGET = 8;\r\nconst INCOMPATIBLE_CHILD = 9;\r\n\r\nexports.NODE_NOT_EXISTS = NODE_NOT_EXISTS;\r\nexports.CLASS_NOT_DEFINED = CLASS_NOT_DEFINED;\r\nexports.CONNECTION_TO_ITSELF = CONNECTION_TO_ITSELF;\r\nexports.IMPROPER_CONNECTION = IMPROPER_CONNECTION;\r\nexports.OBJECT_NOT_FOUND = OBJECT_NOT_FOUND;\r\nexports.MANDATORY_PARAM = MANDATORY_PARAM;\r\nexports.INCORRECT_TYPE = INCORRECT_TYPE;\r\nexports.INCORRECT_PARENT_NODE = INCORRECT_PARENT_NODE;\r\nexports.INCORRECT_LINK_TARGET = INCORRECT_LINK_TARGET;\r\nexports.INCOMPATIBLE_CHILD = INCOMPATIBLE_CHILD;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ErrorCode.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\n\r\n\r\nlet ErrorHandler = function () {\r\n\r\n  let _logger = null;\r\n\r\n  function _setLogger(logger) {\r\n    _logger = logger;\r\n  }\r\n\r\n  function _showMsg(errorCode, params) {\r\n    let msg = '';\r\n\r\n    switch (errorCode) {\r\n      case ErrorCode.NODE_NOT_EXISTS:\r\n        msg = `Node of type ${params.type} is not defined.`;\r\n        break;\r\n      case ErrorCode.CLASS_NOT_DEFINED:\r\n        msg = `Class ${params.class} is not defined.`;\r\n        break;\r\n      case ErrorCode.CONNECTION_TO_ITSELF:\r\n        msg = `Cannot connect node \"${params.node}\" to itself.`;\r\n        break;\r\n      case ErrorCode.IMPROPER_CONNECTION:\r\n        msg = `Cannot create connection of type \"${params.type}\"` +\r\n        ` from node id \"${params.node1}\" to node id \"${params.node2}\".`;\r\n        break;\r\n      case ErrorCode.OBJECT_NOT_FOUND:\r\n        msg = `Cannot find object with id \"${params.id}\"`;\r\n        break;\r\n      case ErrorCode.MANDATORY_PARAM:\r\n        msg = `Parameter \"${params.param}\" was expected but instead got undefined.`;\r\n        break;\r\n      case ErrorCode.INCORRECT_TYPE:\r\n        msg = `Wrong type of argument. Expected \"${params.type}\"`;\r\n        break;\r\n      case ErrorCode.INCORRECT_PARENT_NODE:\r\n        msg = `Node of type \"${params.child}\" can be added only to \"${params.parent}\" node.`;\r\n        break;\r\n      case ErrorCode.INCORRECT_LINK_TARGET:\r\n        msg = `Cannot create link connection to null node.`;\r\n        break;\r\n      case ErrorCode.INCOMPATIBLE_CHILD:\r\n        msg = `Cannot add child of type \"${params.child}\" into parent of type \"${params.parent}\".`;\r\n        break;\r\n      default:\r\n        msg = `Unknown error code passed: ${errorCode}`;\r\n    }\r\n    if (_logger) {\r\n      _logger(msg);\r\n    } else {\r\n      throw new Error(msg);\r\n      // add warning mode?\r\n    }\r\n  }\r\n\r\n  return {\r\n    setLogger: _setLogger,\r\n    showMsg: _showMsg\r\n  };\r\n};\r\n\r\nmodule.exports = ErrorHandler;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ErrorHandler.js","'use strict';\r\nimport BaseNode from '../core/BaseNode';\r\nimport Plug from '../core/Plug';\r\n\r\nlet AnswerNode = (function () {\r\n  // Weak maps are new feature to JavaScript. We can store private\r\n  // object properties in key/value pairs using our instance as the key,\r\n  // and our class can capture those key/value maps in a closure.\r\n  let _text = new WeakMap();\r\n\r\n  return class AnswerNode extends BaseNode {\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _text.set(this, data && data.text ? data.text : '');\r\n    }\r\n\r\n    _init() {\r\n      super._init();\r\n      this.cm.addConnector(Plug.GOTO, 1);\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.text = this.getText();\r\n      return data;\r\n    }\r\n\r\n    setText(value) {\r\n      _text.set(this, value);\r\n    }\r\n\r\n    getText() {\r\n      return _text.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from AnswerNode');\r\n      _text.delete(this);\r\n      super.dispose();\r\n    }\r\n\r\n  };\r\n})();\r\n\r\nmodule.exports = AnswerNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/AnswerNode.js","'use strict';\r\nimport CompoundNode from '../core/CompoundNode';\r\nimport Utils from '../core/Utils';\r\n\r\nlet DialogNode = (function () {\r\n\r\n  let _start = new WeakMap();\r\n\r\n  return class DialogNode extends CompoundNode {\r\n\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _start.set(this, data && data.startTalk ? data.startTalk : '');\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.startTalk = this.getStartTalk();\r\n      return data;\r\n    }\r\n\r\n    canAddChild(type) {\r\n      return type === 'TalkNode';\r\n    }\r\n\r\n    setNodeAsChild(node) {\r\n      let canSetAsChild = super.setNodeAsChild(node);\r\n      let children = this.getChildren();\r\n\r\n      if (canSetAsChild && children.length === 1) this.setStartTalk(node.getId());\r\n      return canSetAsChild;\r\n    }\r\n\r\n    removeChild(index) {\r\n      let child = this.getChild(index);\r\n      let talkId = child !== null ? child.getId() : '';\r\n      let startTalk = this.getStartTalk();\r\n\r\n      super.removeChild(index);\r\n      if (talkId === startTalk) {\r\n        this.setStartTalk('');\r\n      }\r\n    }\r\n\r\n    setStartTalk(talkId) {\r\n      // should only add talk nodes from internal children list\r\n      let children = this.getChildren();\r\n      let childExist = Utils.getIndexById(children, talkId) > -1;\r\n\r\n      if (childExist) {\r\n        _start.set(this, talkId);\r\n      } else if (children[0] !== undefined) {\r\n        _start.set(this, children[0].getId());\r\n      } else {\r\n        _start.set(this, '');\r\n      }\r\n    }\r\n\r\n    getStartTalk() {\r\n      return _start.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from DialogNode');\r\n      _start.delete(this);\r\n      super.dispose();\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = DialogNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/DialogNode.js","'use strict';\r\n\r\nlet DialogWalker = (function () {\r\n  let _currTalk = new WeakMap();\r\n  let _rpgs = new WeakMap();\r\n  let _dialog = new WeakMap();\r\n\r\n  return class DialogWalker {\r\n    constructor(rpgs) {\r\n      if (!(rpgs && rpgs.findNode)) {\r\n        throw new Error('RPGSystem instance not passed to constructor.');\r\n      }\r\n      _rpgs.set(this, rpgs);\r\n      _dialog.set(this, null);\r\n      _currTalk.set(this, null);\r\n    }\r\n\r\n    setDialog(dialogId) {\r\n      let dialog = _rpgs.get(this).findNode(dialogId);\r\n\r\n      if (dialog === null || !dialog.getStartTalk) {\r\n        throw new Error(`DialogNode with the id \"${dialogId}\" does not exists.`);\r\n      }\r\n      _dialog.set(this, dialog);\r\n      this.reset();\r\n    }\r\n\r\n    setTalk(talkId) {\r\n      let talk = _rpgs.get(this).findNode(talkId);\r\n\r\n      if (talk === null) {\r\n        throw new Error(`TalkNode with the id \"${talkId}\" does not exists.`);\r\n      }\r\n      _currTalk.set(this, talk);\r\n    }\r\n\r\n    getConversation() {\r\n      let conversation = {};\r\n      let currTalk = _currTalk.get(this);\r\n      let children = currTalk ? currTalk.getChildren() : [];\r\n\r\n      conversation.text = currTalk ? currTalk.getText() : '';\r\n      conversation.options = children.map((answer) => {\r\n        return {\r\n          id: answer.getId(),\r\n          text: answer.getText(),\r\n          active: answer.isActive(),\r\n          enabled: answer.isVisible()\r\n        };\r\n      });\r\n      return conversation;\r\n    }\r\n\r\n    // should return boolean that indicates if there is next talk\r\n    selectOption(id) {\r\n      let children = _currTalk.get(this).getChildren();\r\n      let answer = children.filter((child, index, array) => {\r\n        return child.getId() === id;\r\n      });\r\n\r\n      if (answer[0] !== undefined) {\r\n        let answerNode = answer[0];\r\n        let talkId;\r\n\r\n        if (answerNode !== null) {\r\n          talkId = answerNode.getWires('goto')[0];\r\n          if (talkId !== undefined) {\r\n            this.setTalk(talkId);\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    reset() {\r\n      let dialog = _dialog.get(this);\r\n\r\n      if (dialog !== null) {\r\n        this.setTalk(dialog.getStartTalk());\r\n      }\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = DialogWalker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/DialogWalker.js","'use strict';\r\nimport CompoundNode from '../core/CompoundNode';\r\n\r\nlet TalkNode = (function () {\r\n\r\n  let _text = new WeakMap();\r\n\r\n  return class TalkNode extends CompoundNode {\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _text.set(this, data && data.text ? data.text : '');\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.text = this.getText();\r\n      return data;\r\n    }\r\n\r\n    setText(value) {\r\n      _text.set(this, value);\r\n    }\r\n\r\n    getText() {\r\n      return _text.get(this);\r\n    }\r\n\r\n    canAddChild(type) {\r\n      return type === 'AnswerNode';\r\n    }\r\n\r\n    canBeWiredTo(type) {\r\n      return type === 'goto';\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from TalkNode');\r\n      _text.delete(this);\r\n      super.dispose();\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = TalkNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/TalkNode.js","/**\r\n * Role-Playing Game System\r\n * @author Krzysztof Stano (stanosky)\r\n * @license MIT license\r\n * @link https://github.com/stanosky/rpgs\r\n * @version 1.0.0rc\r\n **/\r\n\r\n'use strict';\r\nimport ErrorHandler from './core/ErrorHandler';\r\nimport NodePool from './core/NodePool';\r\nimport NodeFactory from './core/NodeFactory';\r\nimport NodeCreator from './core/NodeCreator';\r\n\r\nconst RPGSystem = function () {\r\n\r\n  const _errorHandler = new ErrorHandler();\r\n  const _nodeFactory = new NodeFactory(_errorHandler);\r\n  const _nodePool = new NodePool(_nodeFactory, _errorHandler);\r\n  const _nodeCreator = new NodeCreator(_nodePool, _errorHandler);\r\n\r\n  function _mergeNodes(data) {\r\n    let _data = data || '[]';\r\n\r\n    JSON.parse(_data).forEach((d) => {\r\n      _nodePool.removeNode(d.uuid);\r\n      _nodePool.addNode(d);\r\n    });\r\n  }\r\n\r\n  function _setData(data) {\r\n    _nodePool.clearData();\r\n    _mergeNodes(data);\r\n  }\r\n\r\n  function _setLogger(logger) {\r\n    _errorHandler.setLogger(logger);\r\n  }\r\n\r\n  return {\r\n    setData: _setData,\r\n    setLogger: _setLogger,\r\n    mergeNodes: _mergeNodes,\r\n\r\n    addDialog: _nodeCreator.addDialog,\r\n    addTalk: _nodeCreator.addTalk,\r\n    addAnswer: _nodeCreator.addAnswer,\r\n    addWire: _nodeCreator.addWire,\r\n    addNode: _nodeCreator.addNode,\r\n\r\n    setConnection: _nodeCreator.setConnection,\r\n    findNode: _nodePool.findNode,\r\n    removeNode: _nodePool.removeNode,\r\n    getNodes: _nodePool.getNodes,\r\n    getData: _nodePool.getData,\r\n    clearData: _nodePool.clearData,\r\n    serialize: _nodePool.serialize,\r\n    toString: _nodePool.serialize  // it is just alias of serialize\r\n  };\r\n};\r\n\r\nmodule.exports = RPGSystem;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/RPGSystem.js","'use strict';\r\nimport Utils from './Utils';\r\n// import ErrorCode from './core/ErrorCode';\r\n\r\nconst NodePool = function (nodeFactory, errorHandler) {\r\n  const _nodeFactory = nodeFactory;\r\n  // const _errorHandler = errorHandler;\r\n  let _objectPool = [];\r\n\r\n  function findNode(nodeId) {\r\n    var i;\r\n\r\n    for (i = 0; i < _objectPool.length; i++) {\r\n      if (_objectPool[i].getId() === nodeId) return _objectPool[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function addNode(params) {\r\n    let node = _nodeFactory.createNode(this, params);\r\n\r\n    if (node !== null) _objectPool.push(node);\r\n    return node;\r\n  }\r\n\r\n  function removeNode(id) {\r\n    let index = Utils.getIndexById(_objectPool, id);\r\n    let isNodeFound = index > -1;\r\n\r\n    if (isNodeFound) {\r\n      let node = _objectPool.splice(index, 1)[0];\r\n\r\n      node.dispose();\r\n      _objectPool.forEach(node => node.cm.removeWiresTo(id));\r\n    }\r\n    return isNodeFound;\r\n  }\r\n\r\n  function getNodesByClass(className) {\r\n    return _objectPool.filter((node) => {\r\n      return node.getData().class === className;\r\n      // return node.constructor.name === className;\r\n    });\r\n  }\r\n\r\n  function getNodes(className = '') {\r\n    return className === '' ? _objectPool.slice() : getNodesByClass(className);\r\n  }\r\n\r\n  function getData() {\r\n    return _objectPool.map((obj) => {\r\n      return obj.getData ? obj.getData() : obj;\r\n    });\r\n  }\r\n\r\n  function clearData() {\r\n    _objectPool.forEach(obj => obj.dispose());\r\n    _objectPool = [];\r\n  }\r\n\r\n  function serialize() {\r\n    return JSON.stringify(getData());\r\n  }\r\n\r\n  return {\r\n    findNode: findNode,\r\n    addNode: addNode,\r\n    removeNode: removeNode,\r\n    getNodes: getNodes,\r\n    getData: getData,\r\n    serialize: serialize,\r\n    clearData: clearData\r\n  };\r\n};\r\n\r\nmodule.exports = NodePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodePool.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\nimport BaseNode from './BaseNode';\r\nimport AnswerNode from '../dialogs/AnswerNode';\r\nimport DialogNode from '../dialogs/DialogNode';\r\nimport TalkNode from '../dialogs/TalkNode';\r\n\r\nconst NodeFactory = function (errorHandler) {\r\n\r\n  const _errorHandler = errorHandler;\r\n\r\n  function _createNode(nodePool, data) {\r\n    let className = data.class;\r\n\r\n    // console.log('_createNode',_nodePool);\r\n    switch (className) {\r\n      case 'BaseNode': return new BaseNode(nodePool, data);\r\n      case 'AnswerNode': return new AnswerNode(nodePool, data);\r\n      case 'DialogNode': return new DialogNode(nodePool, data);\r\n      case 'TalkNode': return new TalkNode(nodePool, data);\r\n      default:\r\n        _errorHandler.showMsg(ErrorCode.CLASS_NOT_DEFINED, {class: className});\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return {\r\n    createNode: _createNode\r\n  };\r\n};\r\n\r\nmodule.exports = NodeFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodeFactory.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\n\r\nconst NodeCreator = function (nodePool, errorHandler) {\r\n  const _nodePool = nodePool,\r\n    _errorHandler = errorHandler;\r\n\r\n  let _lastChild = null,\r\n    _parentHistory = [],\r\n    _tempWires = [];\r\n\r\n  function _setConnection(type, nodeId1, nodeId2) {\r\n    if (nodeId1 === nodeId2) {\r\n      _errorHandler.showMsg(ErrorCode.CONNECTION_TO_ITSELF, {node: nodeId1});\r\n    }\r\n\r\n    let node1 = _nodePool.findNode(nodeId1);\r\n    let node2 = _nodePool.findNode(nodeId2);\r\n\r\n    if (node2 === null) {\r\n      _tempWires.push({type: type, targetNode: nodeId1, referenceNode: nodeId2});\r\n      return;\r\n    }\r\n\r\n    if (node1.canRecieveWire(type) && node2.canBeWiredTo(type)) {\r\n      node1.addWire(type, node2.getId());\r\n    } else {\r\n      _errorHandler.showMsg(ErrorCode.IMPROPER_CONNECTION, {\r\n        type: type,\r\n        node1: nodeId1,\r\n        node2: nodeId2\r\n      });\r\n    }\r\n  }\r\n\r\n  function _getWaitingWiresForNode(nodeId) {\r\n    let wires = [], i;\r\n\r\n    for (i = _tempWires.length - 1; i >= 0 ; i--) {\r\n      if (_tempWires[i].referenceNode === nodeId) {\r\n        wires.push(_tempWires.splice(i, 1)[0]);\r\n      }\r\n    }\r\n    return wires;\r\n  }\r\n\r\n  /**\r\n   * This method helps in the creation of nodes. Its focus on proper\r\n   * placement of nodes in tree.\r\n   * @param  {object} params  Parameters of created node.\r\n   * @param  {boolean} asChild Determines if node should be added as child\r\n   * of another node or as an independent node.\r\n   */\r\n  function _nodeCreator(params, asChild) {\r\n    function createChildNode(nodeParams) {\r\n      // We create a new child node in parent\r\n      _lastChild = _parentHistory[0].addChild(nodeParams);\r\n    }\r\n    // Test if node should be added as child or parent.\r\n    if (asChild) {\r\n      // If last added child was not null then we must check additional conditions.\r\n      if (_lastChild !== null) {\r\n        // If constructor name of previous child node, is equal to name of class,\r\n        // whose we try to create, it means node should be added to current parent.\r\n        if (_lastChild.getData().class === params.class) {\r\n          createChildNode(params);\r\n        // If names of constructors not match, then we must check if new node\r\n        // can be added as child to our previous child.\r\n        } else if (_lastChild.canAddChild(params.class)) {\r\n          _parentHistory.unshift(_lastChild);\r\n          createChildNode(params);\r\n        // Finally if previous conditions are false we try go back to previous\r\n        // parent node.\r\n        } else {\r\n          _lastChild = _parentHistory.shift() || null;\r\n          _nodeCreator(params, asChild);\r\n        }\r\n      // If last child is null, then we check if node can be added to current\r\n      // parent node.\r\n      } else if (_parentHistory.length > 0 && _parentHistory[0].canAddChild(params.class)) {\r\n        createChildNode(params);\r\n      // If last child and last parent is equal to null, then new child node\r\n      // cant be added, so we throw error.\r\n      } else {\r\n        _errorHandler.showMsg(ErrorCode.INCOMPATIBLE_CHILD, {\r\n          child: params.class,\r\n          parent: _parentHistory.length > 0 ?\r\n                  _parentHistory[0].getData().class : 'null'\r\n        });\r\n      }\r\n    } else {\r\n      // If node is added as parent, then last child is set to null\r\n      // and parent history is cleared.\r\n      _lastChild = null;\r\n      _parentHistory.length = 0;\r\n      // After that, new node is created.\r\n      _parentHistory = [_nodePool.addNode(params)];\r\n    }\r\n\r\n    _getWaitingWiresForNode(params.uuid).map((wire) => {\r\n      _setConnection(wire.type, wire.targetNode, wire.referenceNode);\r\n    });\r\n  }\r\n\r\n  function _addNode(className, params = {}) {\r\n    let _params = params;\r\n\r\n    _params.class = className;\r\n    _nodePool.addNode(_params);\r\n    /* _nodeCreator(_params, false);*/\r\n    return this;\r\n  }\r\n\r\n  function _addDialog(id = _errorHandler.showMsg(ErrorCode.MANDATORY_PARAM,\r\n                                {param: 'id'})) {\r\n    let params = {\r\n      uuid: id,\r\n      class: 'DialogNode'\r\n    };\r\n\r\n    _nodeCreator(params, false);\r\n    return this;\r\n  }\r\n\r\n  function _addTalk(id = _errorHandler.showMsg(ErrorCode.MANDATORY_PARAM,\r\n                                {param: 'id'}), text = '') {\r\n    let params = {\r\n      uuid: id,\r\n      text: text,\r\n      class: 'TalkNode'\r\n    };\r\n\r\n    _nodeCreator(params, true);\r\n    return this;\r\n  }\r\n\r\n  function _addAnswer(text = '') {\r\n    let params = {\r\n      text: text,\r\n      class: 'AnswerNode'\r\n    };\r\n\r\n    _nodeCreator(params, true);\r\n    return this;\r\n  }\r\n\r\n  function _addWire(type, referenceNodeId) {\r\n    let targetNode = _lastChild;\r\n\r\n    if (targetNode === null && _parentHistory.length > 0) {\r\n      targetNode = _parentHistory[0];\r\n    } else {\r\n      /* _errorHandler.showMsg(ErrorCode.INCOMPATIBLE_CHILD,{\r\n        child:className,\r\n        parent: _parentHistory.length > 0\r\n              ? _parentHistory[0].constructor.name\r\n              : 'null'\r\n      });*/\r\n    }\r\n    _setConnection(type, targetNode.getId(), referenceNodeId);\r\n    return this;\r\n  }\r\n\r\n  return {\r\n    addNode: _addNode,\r\n    addDialog: _addDialog,\r\n    addTalk: _addTalk,\r\n    addAnswer: _addAnswer,\r\n    addWire: _addWire,\r\n    setConnection: _setConnection\r\n  };\r\n\r\n};\r\n\r\nmodule.exports = NodeCreator;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodeCreator.js"],"sourceRoot":""}