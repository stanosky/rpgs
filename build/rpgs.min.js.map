{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ea853c9719524ed5e68b","webpack:///./src/index.js","webpack:///./src/rpgs/core/BaseNode.js","webpack:///./src/rpgs/core/Utils.js","webpack:///./src/rpgs/core/Plug.js","webpack:///./src/rpgs/core/ConnectorManager.js","webpack:///./src/rpgs/core/Connector.js","webpack:///./src/rpgs/core/ParamsManager.js","webpack:///./src/rpgs/core/CompoundNode.js","webpack:///./src/rpgs/core/ErrorCode.js","webpack:///./src/rpgs/core/ErrorHandler.js","webpack:///./src/rpgs/dialogs/AnswerNode.js","webpack:///./src/rpgs/dialogs/DialogNode.js","webpack:///./src/rpgs/dialogs/DialogWalker.js","webpack:///./src/rpgs/dialogs/TalkNode.js","webpack:///./src/rpgs/RPGSystem.js","webpack:///./src/rpgs/core/NodePool.js","webpack:///./src/rpgs/core/NodeFactory.js","webpack:///./src/rpgs/core/NodeCreator.js"],"names":["module","exports","BaseNode","require","CompoundNode","Connector","ConnectorManager","ErrorCode","ErrorHandler","ParamsManager","Plug","Utils","AnswerNode","DialogNode","DialogWalker","TalkNode","RPGSystem","_uuid","WeakMap","_label","_x","_y","nodePool","data","_data","set","uuid","getUUID","label","x","y","pm","params","cm","_init","setData","addConnector","VISIBLE","ENABLED","name","type","value","addParam","getParamValue","setParamValue","removeParam","get","class","constructor","getId","getLabel","wires","getData","getParams","childId","index","canRecieveWire","nodeId","addWire","getWires","removeWire","dispose","delete","UUID","self","lut","i","toString","generate","d0","Math","random","d1","d2","d3","indexOfObject","array","obj","length","getIndexById","id","addObjectToArray","push","removeObjectFromArray","spliced","splice","GOTO","_connectors","parsed","connector","nodes","hasOwnProperty","getConnector","map","n","limit","connectors","alreadyExist","filter","c","getType","canAddWire","_type","_limit","_wires","isNaN","parseInt","getLimit","wireLen","wire","_params","_paramExist","paramName","containerObj","keys","Object","k","_addParam","paramType","paramValue","isMandatory","mand","undefined","param","getParam","_children","children","getChildren","removeNode","NODE_NOT_EXISTS","CLASS_NOT_DEFINED","CONNECTION_TO_ITSELF","IMPROPER_CONNECTION","OBJECT_NOT_FOUND","MANDATORY_PARAM","INCORRECT_TYPE","INCORRECT_PARENT_NODE","INCORRECT_LINK_TARGET","INCOMPATIBLE_CHILD","_logger","_setLogger","logger","_showMsg","errorCode","msg","node","node1","node2","child","parent","Error","setLogger","showMsg","_text","text","getText","_start","startTalk","getStartTalk","setStartTalk","getChild","talkId","canAdd","_currTalk","_rpgs","_dialog","rpgs","findNode","dialogId","dialog","reset","talk","conversation","currTalk","options","answerId","answer","active","isActive","enabled","isVisible","currId","answerNode","getTalk","setTalk","_errorHandler","_nodePool","_nodeFactory","_nodeCreator","_mergeNodes","forEach","d","addNode","createNode","_setData","clearData","JSON","parse","mergeNodes","addDialog","addTalk","addAnswer","getNodes","serialize","NodePool","errorHandler","_objectPool","_findNode","_addNode","_removeNode","isNodeFound","_getNodesByClass","className","_getNodes","slice","_getData","_clearData","_serialize","stringify","NodeFactory","_createNode","NodeCreator","nodeFactory","_lastChild","_parentHistory","_tempWires","_setConnection","nodeId1","nodeId2","targetNode","referenceNode","canBeWiredTo","_getWaitingWiresForNode","asChild","createChildNode","nodeParams","addChild","canAddChild","unshift","shift","_addDialog","_addTalk","_addAnswer","_addWire","referenceNodeId"],"mappings":"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","file":"rpgs.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rpgs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rpgs\"] = factory();\n\telse\n\t\troot[\"rpgs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ea853c9719524ed5e68b","module.exports = {\r\n  BaseNode: require('./rpgs/core/BaseNode'),\r\n  CompoundNode: require('./rpgs/core/CompoundNode'),\r\n  Connector: require('./rpgs/core/Connector'),\r\n  ConnectorManager: require('./rpgs/core/ConnectorManager'),\r\n  ErrorCode: require('./rpgs/core/ErrorCode'),\r\n  ErrorHandler: require('./rpgs/core/ErrorHandler'),\r\n  ParamsManager: require('./rpgs/core/ParamsManager'),\r\n  Plug: require('./rpgs/core/Plug'),\r\n  Utils: require('./rpgs/core/Utils'),\r\n  AnswerNode: require('./rpgs/dialogs/AnswerNode'),\r\n  DialogNode: require('./rpgs/dialogs/DialogNode'),\r\n  DialogWalker: require('./rpgs/dialogs/DialogWalker'),\r\n  TalkNode: require('./rpgs/dialogs/TalkNode'),\r\n  RPGSystem: require('./rpgs/RPGSystem')\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/index.js","'use strict';\r\nimport Utils from './Utils';\r\nimport Plug from './Plug';\r\nimport ConnectorManager from './ConnectorManager';\r\nimport ParamsManager from './ParamsManager';\r\n\r\nlet BaseNode = (function () {\r\n\r\n  // Weak maps are new feature to JavaScript. We can store private\r\n  // object properties in key/value pairs using our instance as the key,\r\n  // and our class can capture those key/value maps in a closure.\r\n  let _uuid = new WeakMap();\r\n  let _label = new WeakMap();\r\n  let _x = new WeakMap();\r\n  let _y = new WeakMap();\r\n\r\n  /* function executeScript(rpgs, scriptId) {\r\n    let _script = rpgs.findNode(scriptId);\r\n\r\n    return _script !== null && _script.execute ? _script.execute({rpgs: rpgs}) : true;\r\n  }*/\r\n\r\n  return class BaseNode {\r\n    constructor(nodePool, data) {\r\n      let _data = data || {};\r\n\r\n      // console.log('BaseNode', nodePool);\r\n      // If uuid not present, then by default we assign Universally Unique ID.\r\n      _uuid.set(this, _data.uuid ? _data.uuid : Utils.getUUID());\r\n      _label.set(this, _data.label ? _data.label : '');\r\n      _x.set(this, _data.x ? _data.x : 0);\r\n      _y.set(this, _data.y ? _data.y : 0);\r\n      this.nodePool = nodePool;\r\n      this.pm = new ParamsManager(_data.params || {});\r\n      this.cm = new ConnectorManager();\r\n      this._init();\r\n      this.cm.setData(_data);\r\n    }\r\n\r\n    _init() {\r\n      this.cm.addConnector(Plug.VISIBLE, 1);\r\n      this.cm.addConnector(Plug.ENABLED, 1);\r\n    }\r\n\r\n    addParam(name, type, value) {\r\n      this.pm.addParam(name, type, value);\r\n    }\r\n\r\n    getParam(name) {\r\n      return this.pm.getParamValue(name);\r\n    }\r\n\r\n    setParam(name, value) {\r\n      this.pm.setParamValue(name, value);\r\n    }\r\n\r\n    removeParam(name) {\r\n      this.pm.removeParam(name);\r\n    }\r\n\r\n    setId(value) {\r\n      _uuid.set(this, value);\r\n    }\r\n\r\n    getId() {\r\n      return _uuid.get(this);\r\n    }\r\n\r\n    setLabel(value) {\r\n      _label.set(this, value);\r\n    }\r\n\r\n    getLabel() {\r\n      return _label.get(this);\r\n    }\r\n\r\n    set x(value) {\r\n      _x.set(this, value);\r\n    }\r\n\r\n    get x() {\r\n      return _x.get(this);\r\n    }\r\n\r\n    set y(value) {\r\n      _y.set(this, value);\r\n    }\r\n\r\n    get y() {\r\n      return _y.get(this);\r\n    }\r\n\r\n    /**\r\n     * Returns visibility state.\r\n     * @return {boolean} Visibility state\r\n     */\r\n    isVisible() {\r\n      return true;// executeScript(this.rpgs, this.cm.getWires(Plug.VISIBLE)[0]);\r\n    }\r\n\r\n    /**\r\n     * Returns activity state.\r\n     * @return {boolean} Active state\r\n     */\r\n    isActive() {\r\n      return true;// executeScript(this.rpgs, this.cm.getWires(Plug.ENABLED)[0]);\r\n    }\r\n\r\n    getData() {\r\n      return {\r\n        class: this.constructor.name,\r\n        uuid: this.getId(),\r\n        label: this.getLabel(),\r\n        wires: this.cm.getData(),\r\n        params: this.pm.getParams(),\r\n        x: this.x,\r\n        y: this.y\r\n      };\r\n    }\r\n\r\n    canAddChild(type) {\r\n      // false because cannot have children\r\n      return false;\r\n    }\r\n\r\n    addChild(childId) {\r\n      // empty because cannot have children\r\n    }\r\n\r\n    removeChild(index) {\r\n      // empty because cannot have children\r\n    }\r\n\r\n    getChild(index) {\r\n      // null because cannot have children\r\n      return null;\r\n    }\r\n\r\n    getChildren() {\r\n      // empty array because cannot have children\r\n      return [];\r\n    }\r\n\r\n    canBeWiredTo(type) {\r\n      return false;\r\n    }\r\n\r\n    canRecieveWire(type) {\r\n      return this.cm.canRecieveWire(type);\r\n    }\r\n\r\n    addWire(type, nodeId) {\r\n      this.cm.addWire(type, nodeId);\r\n    }\r\n\r\n    getWires(type) {\r\n      return this.cm.getWires(type);\r\n    }\r\n\r\n    removeWire(type, nodeId) {\r\n      this.cm.removeWire(type, nodeId);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from BaseNode');\r\n      this.cm.dispose();\r\n      this.pm.dispose();\r\n      this.cm = null;\r\n      this.pm = null;\r\n      this.nodePool = null;\r\n      _uuid.delete(this);\r\n      _label.delete(this);\r\n      _x.delete(this);\r\n      _y.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = BaseNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/BaseNode.js","'use strict';\r\n\r\n/**\r\n * Fast UUID generator, RFC4122 version 4 compliant.\r\n * @author Jeff Ward (jcward.com).\r\n * @license MIT license\r\n * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n **/\r\nvar UUID = (function () {\r\n  var self = {};\r\n  var lut = [];\r\n  var i;\r\n\r\n  for (i = 0; i < 256; i++) {\r\n    lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n  }\r\n\r\n  self.generate = function () {\r\n    var d0 = Math.random() * 0xffffffff | 0;\r\n    var d1 = Math.random() * 0xffffffff | 0;\r\n    var d2 = Math.random() * 0xffffffff | 0;\r\n    var d3 = Math.random() * 0xffffffff | 0;\r\n\r\n    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] +\r\n      lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' +\r\n      lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n      lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] +\r\n      lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] +\r\n      lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n  };\r\n\r\n  return self;\r\n})();\r\n\r\nexports.getUUID = UUID.generate;\r\n\r\nlet indexOfObject = function (array, obj) {\r\n  var i;\r\n\r\n  for (i = 0; i < array.length; i++) {\r\n    if (array[i] === obj) return i;\r\n  }\r\n  return -1;\r\n};\r\n\r\nexports.indexOfObject = indexOfObject;\r\n\r\nlet getIndexById = function (array, id) {\r\n  var i;\r\n\r\n  for (i = 0; i < array.length; i++) {\r\n    if (array[i].getId() === id) return i;\r\n  }\r\n  return -1;\r\n};\r\n\r\nexports.getIndexById = getIndexById;\r\n\r\nexports.addObjectToArray = function (array, obj) {\r\n  if (indexOfObject(array, obj) === -1) {\r\n    array.push(obj);\r\n  }\r\n  return array;\r\n};\r\n\r\nexports.removeObjectFromArray = function (array, obj) {\r\n  let index = indexOfObject(array, obj);\r\n\r\n  if (index !== -1) {\r\n    let spliced = array.splice(index, 1);\r\n\r\n    if (spliced.dispose) spliced.dispose();\r\n  }\r\n  return array;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Utils.js","'use strict';\r\n\r\nconst VISIBLE = 'visible';\r\nconst ENABLED = 'enabled';\r\nconst GOTO = 'goto';\r\n\r\nexports.VISIBLE = VISIBLE;\r\nexports.ENABLED = ENABLED;\r\nexports.GOTO = GOTO;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Plug.js","'use strict';\r\nimport Connector from './Connector';\r\n\r\nlet ConnectorManager = (function () {\r\n\r\n  let _connectors = new WeakMap();\r\n\r\n  return class ConnectorManager {\r\n\r\n    constructor() {\r\n      _connectors.set(this, []);\r\n    }\r\n\r\n    setData(data) {\r\n      let wires = data.wires || {};\r\n      let parsed = [];\r\n      let connector, nodes;\r\n\r\n      for (let type in wires) {\r\n        if (wires.hasOwnProperty(type)) {\r\n          connector = this.getConnector(type);\r\n          if (connector !== null) {\r\n            nodes = wires[type];\r\n            nodes.map(n => connector.addWire(n));\r\n            parsed.push(connector);\r\n          }\r\n        }\r\n      }\r\n      return parsed;\r\n    }\r\n\r\n    addConnector(type, limit) {\r\n      let connectors = _connectors.get(this);\r\n      let alreadyExist = connectors.filter(c => c.getType() === type).length > 0;\r\n\r\n      if (!alreadyExist) {\r\n        connectors.push(new Connector(type, limit));\r\n        _connectors.set(this, connectors);\r\n      }\r\n    }\r\n\r\n    getConnector(type) {\r\n      let connectors = _connectors.get(this) || null;\r\n      let connector = null;\r\n\r\n      if (connectors !== null) {\r\n        connector = connectors.filter(c => c.getType() === type);\r\n      }\r\n      return connector !== null && connector.length > 0 ? connector[0] : null;\r\n    }\r\n\r\n    canRecieveWire(type) {\r\n      let connectors = _connectors.get(this);\r\n\r\n      return connectors.filter(c => {\r\n        return c.getType() === type && c.canAddWire();\r\n      }).length > 0;\r\n    }\r\n\r\n    addWire(type, nodeId) {\r\n      let connector = this.getConnector(type);\r\n\r\n      if (connector !== null) {\r\n        connector.addWire(nodeId);\r\n      }\r\n    }\r\n\r\n    getWires(type) {\r\n      let connector = this.getConnector(type);\r\n\r\n      return connector !== null ? connector.getWires() : [];\r\n    }\r\n\r\n    removeWire(type, nodeId) {\r\n      let connector = this.getConnector(type);\r\n\r\n      if (connector !== null) {\r\n        connector.removeWire(nodeId);\r\n      }\r\n    }\r\n\r\n    getData() {\r\n      let data = {};\r\n      let connectors = _connectors.get(this) || [];\r\n      let type, nodes, i;\r\n\r\n      for (i = 0; i < connectors.length; i++) {\r\n        type = connectors[i].getType();\r\n        nodes = connectors[i].getWires();\r\n        data[type] = nodes;\r\n      }\r\n      return data;\r\n    }\r\n\r\n    dispose() {\r\n      _connectors.get(this).map((c) => { c.dispose(); });\r\n      _connectors.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = ConnectorManager;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ConnectorManager.js","'use strict';\r\n\r\nlet Connector = (function () {\r\n  let _type = new WeakMap();\r\n  let _limit = new WeakMap();\r\n  let _wires = new WeakMap();\r\n\r\n  return class Connector {\r\n\r\n    constructor(type, limit) {\r\n      _type.set(this, type);\r\n      _limit.set(this, isNaN(parseInt(limit, 10)) ? -1 : parseInt(limit, 10));\r\n      _wires.set(this, []);\r\n    }\r\n\r\n    getType() {\r\n      return _type.get(this);\r\n    }\r\n\r\n    getLimit() {\r\n      return _limit.get(this);\r\n    }\r\n\r\n    getWires() {\r\n      return _wires.get(this);\r\n    }\r\n\r\n    canAddWire() {\r\n      let limit = this.getLimit();\r\n      let wireLen = this.getWires().length;\r\n\r\n      return limit === -1 || (limit > 0 && wireLen < limit);\r\n    }\r\n\r\n    addWire(nodeId) {\r\n      let wire = this.getWires();\r\n\r\n      if (this.canAddWire()) {\r\n        wire.push(nodeId);\r\n        _wires.set(this, wire);\r\n      }\r\n    }\r\n\r\n    removeWire(nodeId) {\r\n      _wires.set(this, _wires.get(this).filter(wire => {\r\n        return wire !== nodeId;\r\n      }));\r\n    }\r\n\r\n    dispose() {\r\n      _type.delete(this);\r\n      _limit.delete(this);\r\n      _wires.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = Connector;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/Connector.js","'use strict';\r\n\r\nlet ParamsManager = (function () {\r\n  let _params = new WeakMap();\r\n\r\n  function _paramExist(paramName, containerObj) {\r\n    let keys = Object.keys(containerObj);\r\n\r\n    return keys.filter(k => k === paramName).length > 0;\r\n  }\r\n\r\n  function _addParam(paramName, paramType, paramValue, containerObj, isMandatory) {\r\n    if (!_paramExist(paramName, containerObj)) {\r\n      containerObj[paramName] = {\r\n        type: paramType,\r\n        value: paramValue,\r\n        mand: isMandatory\r\n      };\r\n    } else {\r\n      // console.warn();\r\n    }\r\n    return containerObj;\r\n  }\r\n\r\n  return class ParamsManager {\r\n    constructor(data) {\r\n      _params.set(this, data || {});\r\n    }\r\n\r\n    addMandatoryParam(name, type, value) {\r\n      _params.set(this, _addParam(name, type, value, _params.get(this), true));\r\n    }\r\n\r\n    addParam(name, type, value) {\r\n      _params.set(this, _addParam(name, type, value, _params.get(this), false));\r\n    }\r\n\r\n    getParam(name) {\r\n      let params = _params.get(this);\r\n\r\n      return params[name] !== undefined ? params[name] : null;\r\n    }\r\n\r\n    getParamValue(name) {\r\n      let param = this.getParam(name);\r\n\r\n      return param !== null ? param.value : null;\r\n    }\r\n\r\n    setParamValue(name, value) {\r\n      let params = _params.get(this);\r\n\r\n      if (params[name] !== undefined) params[name].value = value;\r\n    }\r\n\r\n    removeParam(name) {\r\n      let param = this.getParam(name);\r\n      let params = _params.get(this);\r\n\r\n      if (param !== null && !param.mand) {\r\n        delete params[name];\r\n        _params.set(this, params);\r\n      }\r\n    }\r\n\r\n    getParams() {\r\n      return _params.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      _params.delete(this);\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = ParamsManager;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ParamsManager.js","'use strict';\r\nimport BaseNode from '../core/BaseNode';\r\nimport Utils from '../core/Utils';\r\n\r\nlet CompoundNode = (function () {\r\n\r\n  let _children = new WeakMap();\r\n\r\n  return class CompoundNode extends BaseNode {\r\n\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _children.set(this, data && data.children ? data.children : []);\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.children = this.getChildren();\r\n      return data;\r\n    }\r\n\r\n    addChild(childId) {\r\n      let children = _children.get(this);\r\n\r\n      _children.set(this, Utils.addObjectToArray(children, childId));\r\n    }\r\n\r\n    removeChild(index) {\r\n      let children = _children.get(this);\r\n\r\n      if (index >= 0 && index < children.length) {\r\n        this.nodePool.removeNode(children[index]);\r\n        children.splice(index, 1);\r\n        _children.set(this, children);\r\n      }\r\n    }\r\n\r\n    getChild(index) {\r\n      let children = _children.get(this);\r\n\r\n      return children.length > index ? children[index] : null;\r\n    }\r\n\r\n    getChildren() {\r\n      return _children.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from CompoundNode');\r\n      _children.get(this).map(childId => {\r\n        this.nodePool.removeNode(childId);\r\n      });\r\n      _children.delete(this);\r\n      super.dispose();\r\n    }\r\n\r\n  };\r\n})();\r\n\r\nmodule.exports = CompoundNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/CompoundNode.js","'use strict';\r\n\r\nconst NODE_NOT_EXISTS = 0;\r\nconst CLASS_NOT_DEFINED = 1;\r\nconst CONNECTION_TO_ITSELF = 2;\r\nconst IMPROPER_CONNECTION = 3;\r\nconst OBJECT_NOT_FOUND = 4;\r\nconst MANDATORY_PARAM = 5;\r\nconst INCORRECT_TYPE = 6;\r\nconst INCORRECT_PARENT_NODE = 7;\r\nconst INCORRECT_LINK_TARGET = 8;\r\nconst INCOMPATIBLE_CHILD = 9;\r\n\r\nexports.NODE_NOT_EXISTS = NODE_NOT_EXISTS;\r\nexports.CLASS_NOT_DEFINED = CLASS_NOT_DEFINED;\r\nexports.CONNECTION_TO_ITSELF = CONNECTION_TO_ITSELF;\r\nexports.IMPROPER_CONNECTION = IMPROPER_CONNECTION;\r\nexports.OBJECT_NOT_FOUND = OBJECT_NOT_FOUND;\r\nexports.MANDATORY_PARAM = MANDATORY_PARAM;\r\nexports.INCORRECT_TYPE = INCORRECT_TYPE;\r\nexports.INCORRECT_PARENT_NODE = INCORRECT_PARENT_NODE;\r\nexports.INCORRECT_LINK_TARGET = INCORRECT_LINK_TARGET;\r\nexports.INCOMPATIBLE_CHILD = INCOMPATIBLE_CHILD;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ErrorCode.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\n\r\n\r\nlet ErrorHandler = function () {\r\n\r\n  let _logger = null;\r\n\r\n  function _setLogger(logger) {\r\n    _logger = logger;\r\n  }\r\n\r\n  function _showMsg(errorCode, params) {\r\n    let msg = '';\r\n\r\n    switch (errorCode) {\r\n      case ErrorCode.NODE_NOT_EXISTS:\r\n        msg = `Node of type ${params.type} is not defined.`;\r\n        break;\r\n      case ErrorCode.CLASS_NOT_DEFINED:\r\n        msg = `Class ${params.class} is not defined.`;\r\n        break;\r\n      case ErrorCode.CONNECTION_TO_ITSELF:\r\n        msg = `Cannot connect node \"${params.node}\" to itself.`;\r\n        break;\r\n      case ErrorCode.IMPROPER_CONNECTION:\r\n        msg = `Cannot create connection of type \"${params.type}\"` +\r\n        ` from node id \"${params.node1}\" to node id \"${params.node2}\".`;\r\n        break;\r\n      case ErrorCode.OBJECT_NOT_FOUND:\r\n        msg = `Cannot find object with id \"${params.id}\"`;\r\n        break;\r\n      case ErrorCode.MANDATORY_PARAM:\r\n        msg = `Parameter \"${params.param}\" was expected but instead got undefined.`;\r\n        break;\r\n      case ErrorCode.INCORRECT_TYPE:\r\n        msg = `Wrong type of argument. Expected \"${params.type}\"`;\r\n        break;\r\n      case ErrorCode.INCORRECT_PARENT_NODE:\r\n        msg = `Node of type \"${params.child}\" can be added only to \"${params.parent}\" node.`;\r\n        break;\r\n      case ErrorCode.INCORRECT_LINK_TARGET:\r\n        msg = `Cannot create link connection to null node.`;\r\n        break;\r\n      case ErrorCode.INCOMPATIBLE_CHILD:\r\n        msg = `Cannot add child of type \"${params.child}\" into parent of type \"${params.parent}\".`;\r\n        break;\r\n      default:\r\n        msg = `Unknown error code passed: ${errorCode}`;\r\n    }\r\n    if (_logger) {\r\n      _logger(msg);\r\n    } else {\r\n      throw new Error(msg);\r\n      // add warning mode?\r\n    }\r\n  }\r\n\r\n  return {\r\n    setLogger: _setLogger,\r\n    showMsg: _showMsg\r\n  };\r\n};\r\n\r\nmodule.exports = ErrorHandler;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/ErrorHandler.js","'use strict';\r\nimport BaseNode from '../core/BaseNode';\r\nimport Plug from '../core/Plug';\r\n\r\nlet AnswerNode = (function () {\r\n  // Weak maps are new feature to JavaScript. We can store private\r\n  // object properties in key/value pairs using our instance as the key,\r\n  // and our class can capture those key/value maps in a closure.\r\n  let _text = new WeakMap();\r\n\r\n  return class AnswerNode extends BaseNode {\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _text.set(this, data && data.text ? data.text : '');\r\n    }\r\n\r\n    _init() {\r\n      super._init();\r\n      this.cm.addConnector(Plug.GOTO, 1);\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.text = this.getText();\r\n      return data;\r\n    }\r\n\r\n    setText(value) {\r\n      _text.set(this, value);\r\n    }\r\n\r\n    getText() {\r\n      return _text.get(this);\r\n    }\r\n\r\n    getTalk() {\r\n      return this.getWires(Plug.GOTO)[0];\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from AnswerNode');\r\n      _text.delete(this);\r\n      super.dispose();\r\n    }\r\n\r\n  };\r\n})();\r\n\r\nmodule.exports = AnswerNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/AnswerNode.js","'use strict';\r\nimport CompoundNode from '../core/CompoundNode';\r\n\r\nlet DialogNode = (function () {\r\n\r\n  let _start = new WeakMap();\r\n\r\n  return class DialogNode extends CompoundNode {\r\n\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _start.set(this, data && data.startTalk ? data.startTalk : '');\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.startTalk = this.getStartTalk();\r\n      return data;\r\n    }\r\n\r\n    canAddChild(type) {\r\n      return type === 'TalkNode';\r\n    }\r\n\r\n    addChild(childId) {\r\n      super.addChild(childId);\r\n      let children = this.getChildren();\r\n\r\n      if (children.length === 1) this.setStartTalk(childId);\r\n    }\r\n\r\n    removeChild(index) {\r\n      let child = this.getChild(index);\r\n\r\n      if (child === this.getStartTalk()) this.setStartTalk('');\r\n      super.removeChild(index);\r\n    }\r\n\r\n    setStartTalk(talkId) {\r\n      // should only add talk nodes from internal children list\r\n      let children = this.getChildren();\r\n      let canAdd = children.filter(child => child === talkId)[0] !== undefined;\r\n\r\n      if (canAdd || talkId === '') _start.set(this, talkId);\r\n    }\r\n\r\n    getStartTalk() {\r\n      return _start.get(this);\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from DialogNode');\r\n      _start.delete(this);\r\n      super.dispose();\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = DialogNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/DialogNode.js","'use strict';\r\n\r\nlet DialogWalker = (function () {\r\n  let _currTalk = new WeakMap();\r\n  let _rpgs = new WeakMap();\r\n  let _dialog = new WeakMap();\r\n\r\n  return class DialogWalker {\r\n    constructor(rpgs) {\r\n      if (!(rpgs && rpgs.findNode)) {\r\n        throw new Error('RPGSystem instance not passed to constructor.');\r\n      }\r\n      _rpgs.set(this, rpgs);\r\n      _dialog.set(this, null);\r\n      _currTalk.set(this, null);\r\n    }\r\n\r\n    setDialog(dialogId) {\r\n      let dialog = _rpgs.get(this).findNode(dialogId);\r\n\r\n      if (dialog === null || !dialog.getStartTalk) {\r\n        throw new Error(`DialogNode with the id \"${dialogId}\" does not exists.`);\r\n      }\r\n      _dialog.set(this, dialog);\r\n      this.reset();\r\n    }\r\n\r\n    setTalk(talkId) {\r\n      let talk = _rpgs.get(this).findNode(talkId);\r\n\r\n      if (talk === null) {\r\n        throw new Error(`TalkNode with the id \"${talkId}\" does not exists.`);\r\n      }\r\n      _currTalk.set(this, talk);\r\n    }\r\n\r\n    getConversation() {\r\n      let conversation = {};\r\n      let currTalk = _currTalk.get(this);\r\n      let children = currTalk ? currTalk.getChildren() : [];\r\n\r\n      conversation.text = currTalk ? currTalk.getText() : '';\r\n      conversation.options = children.map((answerId) => {\r\n        let answer = _rpgs.get(this).findNode(answerId);\r\n\r\n        return {\r\n          id: answer.getId(),\r\n          text: answer.getText(),\r\n          active: answer.isActive(),\r\n          enabled: answer.isVisible()\r\n        };\r\n      });\r\n      return conversation;\r\n    }\r\n\r\n    // should return boolean that indicates if there is next talk\r\n    selectOption(id) {\r\n      let children = _currTalk.get(this).getChildren();\r\n      let answerId = children.filter((currId, index, array) => {\r\n        return currId === id;\r\n      });\r\n\r\n      if (answerId[0] !== undefined) {\r\n        let answerNode = _rpgs.get(this).findNode(answerId[0]);\r\n        let talkId;\r\n\r\n        if (answerNode !== null) {\r\n          talkId = answerNode.getTalk();\r\n          if (talkId !== undefined) {\r\n            this.setTalk(talkId);\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    reset() {\r\n      let dialog = _dialog.get(this);\r\n\r\n      if (dialog !== null) {\r\n        this.setTalk(dialog.getStartTalk());\r\n      }\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = DialogWalker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/DialogWalker.js","'use strict';\r\nimport CompoundNode from '../core/CompoundNode';\r\n\r\nlet TalkNode = (function () {\r\n\r\n  let _text = new WeakMap();\r\n\r\n  return class TalkNode extends CompoundNode {\r\n    constructor(nodePool, data) {\r\n      super(nodePool, data);\r\n      _text.set(this, data && data.text ? data.text : '');\r\n    }\r\n\r\n    getData() {\r\n      let data = super.getData();\r\n\r\n      data.text = this.getText();\r\n      return data;\r\n    }\r\n\r\n    setText(value) {\r\n      _text.set(this, value);\r\n    }\r\n\r\n    getText() {\r\n      return _text.get(this);\r\n    }\r\n\r\n    canAddChild(type) {\r\n      return type === 'AnswerNode';\r\n    }\r\n\r\n    canBeWiredTo(type) {\r\n      return type === 'goto';\r\n    }\r\n\r\n    dispose() {\r\n      // console.log('dispose from TalkNode');\r\n      _text.delete(this);\r\n      super.dispose();\r\n    }\r\n  };\r\n})();\r\n\r\nmodule.exports = TalkNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/dialogs/TalkNode.js","/**\r\n * Role-Playing Game System\r\n * @author Krzysztof Stano (stanosky)\r\n * @license MIT license\r\n * @link https://github.com/stanosky/rpgs\r\n * @version 1.0.0rc\r\n **/\r\n\r\n'use strict';\r\nimport ErrorHandler from './core/ErrorHandler';\r\nimport NodePool from './core/NodePool';\r\nimport NodeFactory from './core/NodeFactory';\r\nimport NodeCreator from './core/NodeCreator';\r\n\r\nconst RPGSystem = function () {\r\n\r\n  const _errorHandler = new ErrorHandler();\r\n  const _nodePool = new NodePool(_errorHandler);\r\n  const _nodeFactory = new NodeFactory(_nodePool, _errorHandler);\r\n  const _nodeCreator = new NodeCreator(_nodePool, _nodeFactory, _errorHandler);\r\n\r\n  function _mergeNodes(data) {\r\n    data.forEach((d) => {\r\n      _nodePool.addNode(_nodeFactory.createNode(d));\r\n    });\r\n  }\r\n\r\n  function _setData(data) {\r\n    let _data = data || '[]';\r\n\r\n    _nodePool.clearData();\r\n    _mergeNodes(JSON.parse(_data));\r\n  }\r\n\r\n  function _setLogger(logger) {\r\n    _errorHandler.setLogger(logger);\r\n  }\r\n\r\n  return {\r\n    setData: _setData,\r\n    setLogger: _setLogger,\r\n    mergeNodes: _mergeNodes,\r\n\r\n    addDialog: _nodeCreator.addDialog,\r\n    addTalk: _nodeCreator.addTalk,\r\n    addAnswer: _nodeCreator.addAnswer,\r\n    addWire: _nodeCreator.addWire,\r\n    addNode: _nodeCreator.addNode,\r\n\r\n    findNode: _nodePool.findNode,\r\n    removeNode: _nodePool.removeNode,\r\n    getNodes: _nodePool.getNodes,\r\n    getData: _nodePool.getData,\r\n    clearData: _nodePool.clearData,\r\n    serialize: _nodePool.serialize,\r\n    toString: _nodePool.serialize  // it is just alias of serialize\r\n  };\r\n};\r\n\r\nmodule.exports = RPGSystem;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/RPGSystem.js","'use strict';\r\nimport Utils from './Utils';\r\n// import ErrorCode from './core/ErrorCode';\r\n\r\nconst NodePool = function (errorHandler) {\r\n  // const _errorHandler = errorHandler;\r\n  let _objectPool = [];\r\n\r\n  function _findNode(nodeId) {\r\n    var i;\r\n\r\n    for (i = 0; i < _objectPool.length; i++) {\r\n      if (_objectPool[i].getId() === nodeId) return _objectPool[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function _addNode(node) {\r\n    if (!node.getId) return; // _errorHandler.showMsg();\r\n    _objectPool.push(node);\r\n  }\r\n\r\n  function _removeNode(id) {\r\n    let index = Utils.getIndexById(_objectPool, id);\r\n    let isNodeFound = index > -1;\r\n\r\n    if (isNodeFound) {\r\n      let node = _objectPool.splice(index, 1)[0];\r\n\r\n      node.dispose();\r\n    }\r\n    return isNodeFound;\r\n  }\r\n\r\n  function _getNodesByClass(className) {\r\n    return _objectPool.filter((node) => {\r\n      return node.getData().class === className;\r\n      // return node.constructor.name === className;\r\n    });\r\n  }\r\n\r\n  function _getNodes(className = '') {\r\n    return className === '' ? _objectPool.slice() : _getNodesByClass(className);\r\n  }\r\n\r\n  function _getData() {\r\n    return _objectPool.map((obj) => {\r\n      return obj.getData ? obj.getData() : obj;\r\n    });\r\n  }\r\n\r\n  function _clearData() {\r\n    _objectPool.forEach(obj => obj.dispose());\r\n    _objectPool = [];\r\n  }\r\n\r\n  function _serialize() {\r\n    return JSON.stringify(_getData());\r\n  }\r\n\r\n  return {\r\n    findNode: _findNode,\r\n    addNode: _addNode,\r\n    removeNode: _removeNode,\r\n    getNodes: _getNodes,\r\n    getData: _getData,\r\n    serialize: _serialize,\r\n    clearData: _clearData\r\n  };\r\n};\r\n\r\nmodule.exports = NodePool;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodePool.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\nimport BaseNode from './BaseNode';\r\nimport AnswerNode from '../dialogs/AnswerNode';\r\nimport DialogNode from '../dialogs/DialogNode';\r\nimport TalkNode from '../dialogs/TalkNode';\r\n\r\nconst NodeFactory = function (nodePool, errorHandler) {\r\n\r\n  const _nodePool = nodePool;\r\n  const _errorHandler = errorHandler;\r\n\r\n  function _createNode(data) {\r\n    let className = data.class;\r\n\r\n    // console.log('_createNode',_nodePool);\r\n    switch (className) {\r\n      case 'BaseNode': return new BaseNode(_nodePool, data);\r\n      case 'AnswerNode': return new AnswerNode(_nodePool, data);\r\n      case 'DialogNode': return new DialogNode(_nodePool, data);\r\n      case 'TalkNode': return new TalkNode(_nodePool, data);\r\n      default:\r\n        _errorHandler.showMsg(ErrorCode.CLASS_NOT_DEFINED, {class: className});\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return {\r\n    createNode: _createNode\r\n  };\r\n};\r\n\r\nmodule.exports = NodeFactory;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodeFactory.js","'use strict';\r\n\r\nimport ErrorCode from './ErrorCode';\r\n\r\nconst NodeCreator = function (nodePool, nodeFactory, errorHandler) {\r\n  const _nodePool = nodePool,\r\n    _nodeFactory = nodeFactory,\r\n    _errorHandler = errorHandler;\r\n\r\n  let _lastChild = null,\r\n    _parentHistory = [],\r\n    _tempWires = [];\r\n\r\n  function _setConnection(type, nodeId1, nodeId2) {\r\n    if (nodeId1 === nodeId2) {\r\n      _errorHandler.showMsg(ErrorCode.CONNECTION_TO_ITSELF, {node: nodeId1});\r\n    }\r\n\r\n    let node1 = _nodePool.findNode(nodeId1);\r\n    let node2 = _nodePool.findNode(nodeId2);\r\n\r\n    if (node2 === null) {\r\n      _tempWires.push({type: type, targetNode: nodeId1, referenceNode: nodeId2});\r\n      return;\r\n    }\r\n\r\n    if (node1.canRecieveWire(type) && node2.canBeWiredTo(type)) {\r\n      node1.addWire(type, node2.getId());\r\n    } else {\r\n      _errorHandler.showMsg(ErrorCode.IMPROPER_CONNECTION, {\r\n        type: type,\r\n        node1: nodeId1,\r\n        node2: nodeId2\r\n      });\r\n    }\r\n  }\r\n\r\n  function _getWaitingWiresForNode(nodeId) {\r\n    let wires = [], i;\r\n\r\n    for (i = _tempWires.length - 1; i >= 0 ; i--) {\r\n      if (_tempWires[i].referenceNode === nodeId) {\r\n        wires.push(_tempWires.splice(i, 1)[0]);\r\n      }\r\n    }\r\n    return wires;\r\n  }\r\n\r\n  /**\r\n   * This method helps in the creation of nodes. Its focus on proper\r\n   * placement of nodes in tree.\r\n   * @param  {object} params  Parameters of created node.\r\n   * @param  {boolean} asChild Determines if node should be added as child\r\n   * of another node or as an independent node.\r\n   */\r\n  function _nodeCreator(params, asChild) {\r\n    function createChildNode(nodeParams) {\r\n      // We create a new node, and then set as the last child.\r\n      _lastChild = _nodeFactory.createNode(nodeParams);\r\n      // Then we add our freshly created node to its parent.\r\n      _parentHistory[0].addChild(_lastChild.getId());\r\n      // Finally new node is added to main storage object.\r\n      _nodePool.addNode(_lastChild);\r\n    }\r\n    // Test if node should be added as child or parent.\r\n    if (asChild) {\r\n      // If last added child was not null then we must check additional conditions.\r\n      if (_lastChild !== null) {\r\n        // If constructor name of previous child node, is equal to name of class,\r\n        // whose we try to create, it means node should be added to current parent.\r\n        if (_lastChild.getData().class === params.class) {\r\n          createChildNode(params);\r\n        // If names of constructors not match, then we must check if new node\r\n        // can be added as child to our previous child.\r\n        } else if (_lastChild.canAddChild(params.class)) {\r\n          _parentHistory.unshift(_lastChild);\r\n          createChildNode(params);\r\n        // Finally if previous conditions are false we try go back to previous\r\n        // parent node.\r\n        } else {\r\n          _lastChild = _parentHistory.shift() || null;\r\n          _nodeCreator(params, asChild);\r\n        }\r\n      // If last child is null, then we check if node can be added to current\r\n      // parent node.\r\n      } else if (_parentHistory.length > 0 && _parentHistory[0].canAddChild(params.class)) {\r\n        createChildNode(params);\r\n      // If last child and last parent is equal to null, then new child node\r\n      // cant be added, so we throw error.\r\n      } else {\r\n        _errorHandler.showMsg(ErrorCode.INCOMPATIBLE_CHILD, {\r\n          child: params.class,\r\n          parent: _parentHistory.length > 0 ?\r\n                  _parentHistory[0].getData().class : 'null'\r\n        });\r\n      }\r\n    } else {\r\n      // If node is added as parent, then last child is set to null\r\n      // and parent history is cleared.\r\n      _lastChild = null;\r\n      _parentHistory.length = 0;\r\n      // After that, new node is created.\r\n      let node = _nodeFactory.createNode(params);\r\n\r\n      _parentHistory = [node];\r\n      _nodePool.addNode(node);\r\n    }\r\n\r\n    _getWaitingWiresForNode(params.uuid).map((wire) => {\r\n      _setConnection(wire.type, wire.targetNode, wire.referenceNode);\r\n    });\r\n  }\r\n\r\n  function _addNode(className, params = {}) {\r\n    let _params = params;\r\n\r\n    _params.class = className;\r\n    _nodeCreator(_params, false);\r\n    return this;\r\n  }\r\n\r\n  function _addDialog(id = _errorHandler.showMsg(ErrorCode.MANDATORY_PARAM,\r\n                                {param: 'id'})) {\r\n    let params = {\r\n      uuid: id,\r\n      class: 'DialogNode'\r\n    };\r\n\r\n    _nodeCreator(params, false);\r\n    return this;\r\n  }\r\n\r\n  function _addTalk(id = _errorHandler.showMsg(ErrorCode.MANDATORY_PARAM,\r\n                                {param: 'id'}), text = '') {\r\n    let params = {\r\n      uuid: id,\r\n      text: text,\r\n      class: 'TalkNode'\r\n    };\r\n\r\n    _nodeCreator(params, true);\r\n    return this;\r\n  }\r\n\r\n  function _addAnswer(text = '') {\r\n    let params = {\r\n      text: text,\r\n      class: 'AnswerNode'\r\n    };\r\n\r\n    _nodeCreator(params, true);\r\n    return this;\r\n  }\r\n\r\n  function _addWire(type, referenceNodeId) {\r\n    let targetNode = _lastChild;\r\n\r\n    if (targetNode === null && _parentHistory.length > 0) {\r\n      targetNode = _parentHistory[0];\r\n    } else {\r\n      /* _errorHandler.showMsg(ErrorCode.INCOMPATIBLE_CHILD,{\r\n        child:className,\r\n        parent: _parentHistory.length > 0\r\n              ? _parentHistory[0].constructor.name\r\n              : 'null'\r\n      });*/\r\n    }\r\n    _setConnection(type, targetNode.getId(), referenceNodeId);\r\n    return this;\r\n  }\r\n\r\n  return {\r\n    addNode: _addNode,\r\n    addDialog: _addDialog,\r\n    addTalk: _addTalk,\r\n    addAnswer: _addAnswer,\r\n    addWire: _addWire\r\n  };\r\n\r\n};\r\n\r\nmodule.exports = NodeCreator;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/eslint-loader!./src/rpgs/core/NodeCreator.js"],"sourceRoot":""}