!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("rpgs",[],factory):"object"==typeof exports?exports.rpgs=factory():root.rpgs=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";module.exports={BaseNode:__webpack_require__(1),CompoundNode:__webpack_require__(7),Connector:__webpack_require__(5),ConnectorManager:__webpack_require__(4),ErrorCode:__webpack_require__(8),ErrorHandler:__webpack_require__(9),ParamsManager:__webpack_require__(6),Plug:__webpack_require__(3),Utils:__webpack_require__(2),AnswerNode:__webpack_require__(10),DialogNode:__webpack_require__(11),DialogWalker:__webpack_require__(12),TalkNode:__webpack_require__(13),RPGSystem:__webpack_require__(14)}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"Utils":return _Utils2.default;case"ParamsManager":return _ParamsManager2.default;case"ConnectorManager":return _ConnectorManager2.default;case"Plug":return _Plug2.default;case"BaseNode":return BaseNode}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Utils=__webpack_require__(2),_Utils2=_interopRequireDefault(_Utils),_Plug=__webpack_require__(3),_Plug2=_interopRequireDefault(_Plug),_ConnectorManager=__webpack_require__(4),_ConnectorManager2=_interopRequireDefault(_ConnectorManager),_ParamsManager=__webpack_require__(6),_ParamsManager2=_interopRequireDefault(_ParamsManager),BaseNode=function(){var _uuid=new WeakMap,_label=new WeakMap,_x=new WeakMap,_y=new WeakMap;return function(){function BaseNode(data,rpgs){_classCallCheck(this,BaseNode);var _data=data||{};_uuid.set(this,_data.uuid?_data.uuid:_get__("Utils").getUUID()),_label.set(this,_data.label?_data.label:""),_x.set(this,_data.x?_data.x:0),_y.set(this,_data.y?_data.y:0),this.rpgs=rpgs,this.pm=new(_get__("ParamsManager"))(_data.params||{}),this.cm=new(_get__("ConnectorManager")),this._init(),this.cm.setData(_data)}return _createClass(BaseNode,[{key:"_init",value:function(){this.cm.addConnector(_get__("Plug").VISIBLE,1),this.cm.addConnector(_get__("Plug").ENABLED,1)}},{key:"addParam",value:function(name,type,value){this.pm.addParam(name,type,value)}},{key:"getParam",value:function(name){return this.pm.getParamValue(name)}},{key:"setParam",value:function(name,value){this.pm.setParamValue(name,value)}},{key:"removeParam",value:function(name){this.pm.removeParam(name)}},{key:"setId",value:function(value){_uuid.set(this,value)}},{key:"getId",value:function(){return _uuid.get(this)}},{key:"setLabel",value:function(value){_label.set(this,value)}},{key:"getLabel",value:function(){return _label.get(this)}},{key:"isVisible",value:function(){return!0}},{key:"isActive",value:function(){return!0}},{key:"getData",value:function(){return{class:this.constructor.name,uuid:this.getId(),label:this.getLabel(),wires:this.cm.getData(),params:this.pm.getParams(),x:this.x,y:this.y}}},{key:"canAddChild",value:function(type){return!1}},{key:"addChild",value:function(childId){}},{key:"removeChild",value:function(index){}},{key:"getChild",value:function(index){return null}},{key:"getChildren",value:function(){return[]}},{key:"canAddWireType",value:function(type){return this.cm.canAddWireType(type)}},{key:"setWire",value:function(type,nodeId){this.cm.addWireType(type,nodeId)}},{key:"getWires",value:function(type){return this.cm.getWiresType(type)}},{key:"removeWire",value:function(type,nodeId){this.cm.removeWireType(type,nodeId)}},{key:"dispose",value:function(){this.cm.dispose(),this.pm.dispose(),this.cm=null,this.pm=null,this.rpgs=null,_uuid.delete(this)}},{key:"x",set:function(value){_x.set(this,value)},get:function(){return _x.get(this)}},{key:"y",set:function(value){_y.set(this,value)},get:function(){return _y.get(this)}}]),BaseNode}()}();module.exports=_get__("BaseNode");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"UUID":return UUID;case"indexOfObject":return indexOfObject;case"getIndexById":return getIndexById}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}/**
	 * Fast UUID generator, RFC4122 version 4 compliant.
	 * @author Jeff Ward (jcward.com).
	 * @license MIT license
	 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
	 **/
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},UUID=function(){var i,self={},lut=[];for(i=0;i<256;i++)lut[i]=(i<16?"0":"")+i.toString(16);return self.generate=function(){var d0=4294967295*Math.random()|0,d1=4294967295*Math.random()|0,d2=4294967295*Math.random()|0,d3=4294967295*Math.random()|0;return lut[255&d0]+lut[d0>>8&255]+lut[d0>>16&255]+lut[d0>>24&255]+"-"+lut[255&d1]+lut[d1>>8&255]+"-"+lut[d1>>16&15|64]+lut[d1>>24&255]+"-"+lut[63&d2|128]+lut[d2>>8&255]+"-"+lut[d2>>16&255]+lut[d2>>24&255]+lut[255&d3]+lut[d3>>8&255]+lut[d3>>16&255]+lut[d3>>24&255]},self}();exports.getUUID=_get__("UUID").generate;var indexOfObject=function(array,obj){var i;for(i=0;i<array.length;i++)if(array[i]===obj)return i;return-1};exports.indexOfObject=_get__("indexOfObject");var getIndexById=function(array,id){var i;for(i=0;i<array.length;i++)if(array[i].getId()===id)return i;return-1};exports.getIndexById=_get__("getIndexById"),exports.addObjectToArray=function(array,obj){return _get__("indexOfObject")(array,obj)===-1&&array.push(obj),array},exports.removeObjectFromArray=function(array,obj){var index=_get__("indexOfObject")(array,obj);if(index!==-1){var spliced=array.splice(index,1);spliced.dispose&&spliced.dispose()}return array};var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"VISIBLE":return VISIBLE;case"ENABLED":return ENABLED;case"GOTO":return GOTO}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},VISIBLE="visible",ENABLED="enabled",GOTO="goto";exports.VISIBLE=_get__("VISIBLE"),exports.ENABLED=_get__("ENABLED"),exports.GOTO=_get__("GOTO");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"Connector":return _Connector2.default;case"ConnectorManager":return ConnectorManager}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Connector=__webpack_require__(5),_Connector2=_interopRequireDefault(_Connector),ConnectorManager=function(){var _connectors=new WeakMap;return function(){function ConnectorManager(){_classCallCheck(this,ConnectorManager),_connectors.set(this,[])}return _createClass(ConnectorManager,[{key:"setData",value:function(data){var wires=data.wires||{},parsed=[],connector=void 0,nodes=void 0;for(var type in wires)wires.hasOwnProperty(type)&&(connector=this.getConnector(type),null!==connector&&(nodes=wires[type],nodes.map(function(n){return connector.addWire(n)}),parsed.push(connector)));return parsed}},{key:"addConnector",value:function(type,limit){var connectors=_connectors.get(this),alreadyExist=connectors.filter(function(c){return c.getType()===type}).length>0;alreadyExist||(connectors.push(new(_get__("Connector"))(type,limit)),_connectors.set(this,connectors))}},{key:"getConnector",value:function(type){var connectors=_connectors.get(this)||null,connector=null;return null!==connectors&&(connector=connectors.filter(function(c){return c.getType()===type})),null!==connector&&connector.length>0?connector[0]:null}},{key:"canAddWireType",value:function(type){var connectors=_connectors.get(this);return connectors.filter(function(c){return c.getType()===type&&c.canAddWire()}).length>0}},{key:"addWireType",value:function(type,nodeId){var connector=this.getConnector(type);null!==connector&&connector.addWire(nodeId)}},{key:"getWiresType",value:function(type){var connector=this.getConnector(type);return null!==connector?connector.getWires():[]}},{key:"removeWireType",value:function(type,nodeId){var connector=this.getConnector(type);null!==connector&&connector.removeWire(nodeId)}},{key:"getData",value:function(){var data={},connectors=_connectors.get(this)||[],type=void 0,nodes=void 0,i=void 0;for(i=0;i<connectors.length;i++)type=connectors[i].getType(),nodes=connectors[i].getWires(),data[type]=nodes;return data}},{key:"dispose",value:function(){_connectors.get(this).map(function(c){c.dispose()}),_connectors.delete(this)}}]),ConnectorManager}()}();module.exports=_get__("ConnectorManager");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"Connector":return Connector}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Connector=function(){var _type=new WeakMap,_limit=new WeakMap,_wires=new WeakMap;return function(){function Connector(type,limit){_classCallCheck(this,Connector),_type.set(this,type),_limit.set(this,isNaN(parseInt(limit,10))?-1:parseInt(limit,10)),_wires.set(this,[])}return _createClass(Connector,[{key:"getType",value:function(){return _type.get(this)}},{key:"getLimit",value:function(){return _limit.get(this)}},{key:"getWires",value:function(){return _wires.get(this)}},{key:"canAddWire",value:function(){var limit=this.getLimit(),wiresLen=this.getWires().length;return limit===-1||limit>0&&wiresLen<limit}},{key:"addWire",value:function(nodeId){var wires=this.getWires();this.canAddWire()&&(wires.push(nodeId),_wires.set(this,wires))}},{key:"removeWire",value:function(nodeId){_wires.set(this,_wires.get(this).filter(function(wire){return wire!==nodeId}))}},{key:"dispose",value:function(){_type.delete(this),_limit.delete(this),_wires.delete(this)}}]),Connector}()}();module.exports=_get__("Connector");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"ParamsManager":return ParamsManager}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ParamsManager=function(){function _paramExist(paramName,containerObj){var keys=Object.keys(containerObj);return keys.filter(function(k){return k===paramName}).length>0}function _addParam(paramName,paramType,paramValue,containerObj,isMandatory){return _paramExist(paramName,containerObj)||(containerObj[paramName]={type:paramType,value:paramValue,mand:isMandatory}),containerObj}var _params=new WeakMap;return function(){function ParamsManager(data){_classCallCheck(this,ParamsManager),_params.set(this,data||{})}return _createClass(ParamsManager,[{key:"addMandatoryParam",value:function(name,type,value){_params.set(this,_addParam(name,type,value,_params.get(this),!0))}},{key:"addParam",value:function(name,type,value){_params.set(this,_addParam(name,type,value,_params.get(this),!1))}},{key:"getParam",value:function(name){var params=_params.get(this);return void 0!==params[name]?params[name]:null}},{key:"getParamValue",value:function(name){var param=this.getParam(name);return null!==param?param.value:null}},{key:"setParamValue",value:function(name,value){var params=_params.get(this);void 0!==params[name]&&(params[name].value=value)}},{key:"removeParam",value:function(name){var param=this.getParam(name),params=_params.get(this);null===param||param.mand||(delete params[name],_params.set(this,params))}},{key:"getParams",value:function(){return _params.get(this)}},{key:"dispose",value:function(){_params.delete(this)}}]),ParamsManager}()}();module.exports=_get__("ParamsManager");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"Utils":return _Utils2.default;case"BaseNode":return _BaseNode2.default;case"CompoundNode":return CompoundNode}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_BaseNode=__webpack_require__(1),_BaseNode2=_interopRequireDefault(_BaseNode),_Utils=__webpack_require__(2),_Utils2=_interopRequireDefault(_Utils),CompoundNode=function(){var _children=new WeakMap;return function(_get__2){function CompoundNode(data,rpgs){_classCallCheck(this,CompoundNode);var _this=_possibleConstructorReturn(this,(CompoundNode.__proto__||Object.getPrototypeOf(CompoundNode)).call(this,data,rpgs));return _children.set(_this,data&&data.children?data.children:[]),_this}return _inherits(CompoundNode,_get__2),_createClass(CompoundNode,[{key:"getData",value:function(){var data=_get(CompoundNode.prototype.__proto__||Object.getPrototypeOf(CompoundNode.prototype),"getData",this).call(this);return data.children=this.getChildren(),data}},{key:"addChild",value:function(childId){var children=_children.get(this);_children.set(this,_get__("Utils").addObjectToArray(children,childId))}},{key:"removeChild",value:function(index){var children=_children.get(this);index>=0&&index<children.length&&(children.splice(index,1),_children.set(this,children))}},{key:"getChild",value:function(index){var children=_children.get(this);return children.length>index?children[index]:null}},{key:"getChildren",value:function(){return _children.get(this)}},{key:"dispose",value:function(){var _this2=this;this.rpgs&&_children.get(this).map(function(childId){var nodeObj=_this2.rpgs.findNode(childId);null!==nodeObj&&nodeObj.dispose()}),_children.delete(this),_get(CompoundNode.prototype.__proto__||Object.getPrototypeOf(CompoundNode.prototype),"dispose",this).call(this)}}]),CompoundNode}(_get__("BaseNode"))}();module.exports=_get__("CompoundNode");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"NODE_NOT_EXISTS":return NODE_NOT_EXISTS;case"CLASS_NOT_DEFINED":return CLASS_NOT_DEFINED;case"CONNECTION_TO_ITSELF":return CONNECTION_TO_ITSELF;case"IMPROPER_CONNECTION":return IMPROPER_CONNECTION;case"OBJECT_NOT_FOUND":return OBJECT_NOT_FOUND;case"MANDATORY_PARAM":return MANDATORY_PARAM;case"INCORRECT_TYPE":return INCORRECT_TYPE;case"INCORRECT_PARENT_NODE":return INCORRECT_PARENT_NODE;case"INCORRECT_LINK_TARGET":return INCORRECT_LINK_TARGET;case"INCOMPATIBLE_CHILD":return INCOMPATIBLE_CHILD}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NODE_NOT_EXISTS=0,CLASS_NOT_DEFINED=1,CONNECTION_TO_ITSELF=2,IMPROPER_CONNECTION=3,OBJECT_NOT_FOUND=4,MANDATORY_PARAM=5,INCORRECT_TYPE=6,INCORRECT_PARENT_NODE=7,INCORRECT_LINK_TARGET=8,INCOMPATIBLE_CHILD=9;exports.NODE_NOT_EXISTS=_get__("NODE_NOT_EXISTS"),exports.CLASS_NOT_DEFINED=_get__("CLASS_NOT_DEFINED"),exports.CONNECTION_TO_ITSELF=_get__("CONNECTION_TO_ITSELF"),exports.IMPROPER_CONNECTION=_get__("IMPROPER_CONNECTION"),exports.OBJECT_NOT_FOUND=_get__("OBJECT_NOT_FOUND"),exports.MANDATORY_PARAM=_get__("MANDATORY_PARAM"),exports.INCORRECT_TYPE=_get__("INCORRECT_TYPE"),exports.INCORRECT_PARENT_NODE=_get__("INCORRECT_PARENT_NODE"),exports.INCORRECT_LINK_TARGET=_get__("INCORRECT_LINK_TARGET"),exports.INCOMPATIBLE_CHILD=_get__("INCOMPATIBLE_CHILD");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"ErrorCode":return _ErrorCode2.default;case"ErrorHandler":return ErrorHandler}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],
_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_ErrorCode=__webpack_require__(8),_ErrorCode2=_interopRequireDefault(_ErrorCode),ErrorHandler=function(editor){return{showMsg:function(errorCode,params){var msg="";switch(errorCode){case _get__("ErrorCode").NODE_NOT_EXISTS:msg="Node of type "+params.type+" is not defined.";break;case _get__("ErrorCode").CLASS_NOT_DEFINED:msg="Class "+params.class+" is not defined.";break;case _get__("ErrorCode").CONNECTION_TO_ITSELF:msg='Cannot connect node "'+params.node+'" to itself.';break;case _get__("ErrorCode").IMPROPER_CONNECTION:msg='Cannot create connection of type "'+params.type+'"'+(' from node id "'+params.node1+'" to node id "'+params.node2+'".');break;case _get__("ErrorCode").OBJECT_NOT_FOUND:msg='Cannot find object with id "'+params.id+'"';break;case _get__("ErrorCode").MANDATORY_PARAM:msg='Parameter "'+params.param+'" was expected but instead got undefined.';break;case _get__("ErrorCode").INCORRECT_TYPE:msg='Wrong type of argument. Expected "'+params.type+'"';break;case _get__("ErrorCode").INCORRECT_PARENT_NODE:msg='Node of type "'+params.child+'" can be added only to "'+params.parent+'" node.';break;case _get__("ErrorCode").INCORRECT_LINK_TARGET:msg="Cannot create link connection to null node.";break;case _get__("ErrorCode").INCOMPATIBLE_CHILD:msg='Cannot add child of type "'+params.child+'" into parent of type "'+params.parent+'".';break;default:msg="Unknown error code passed: "+errorCode}if(!editor)throw new Error(msg);editor.showMsg(msg)}}};module.exports=_get__("ErrorHandler");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"Plug":return _Plug2.default;case"BaseNode":return _BaseNode2.default;case"AnswerNode":return AnswerNode}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_BaseNode=__webpack_require__(1),_BaseNode2=_interopRequireDefault(_BaseNode),_Plug=__webpack_require__(3),_Plug2=_interopRequireDefault(_Plug),AnswerNode=function(){var _text=new WeakMap;return function(_get__2){function AnswerNode(data){_classCallCheck(this,AnswerNode);var _this=_possibleConstructorReturn(this,(AnswerNode.__proto__||Object.getPrototypeOf(AnswerNode)).call(this,data));return _text.set(_this,data&&data.text?data.text:""),_this}return _inherits(AnswerNode,_get__2),_createClass(AnswerNode,[{key:"_init",value:function(){_get(AnswerNode.prototype.__proto__||Object.getPrototypeOf(AnswerNode.prototype),"_init",this).call(this),this.cm.addConnector(_get__("Plug").GOTO,1)}},{key:"getData",value:function(){var data=_get(AnswerNode.prototype.__proto__||Object.getPrototypeOf(AnswerNode.prototype),"getData",this).call(this);return data.text=this.getText(),data}},{key:"setText",value:function(value){_text.set(this,value)}},{key:"getText",value:function(){return _text.get(this)}},{key:"getTalk",value:function(){return this.getWires(_get__("Plug").GOTO)[0]}},{key:"dispose",value:function(){_text.delete(this),_get(AnswerNode.prototype.__proto__||Object.getPrototypeOf(AnswerNode.prototype),"dispose",this).call(this)}}]),AnswerNode}(_get__("BaseNode"))}();module.exports=_get__("AnswerNode");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"CompoundNode":return _CompoundNode2.default;case"DialogNode":return DialogNode}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_CompoundNode=__webpack_require__(7),_CompoundNode2=_interopRequireDefault(_CompoundNode),DialogNode=function(){var _start=new WeakMap;return function(_get__2){function DialogNode(data){_classCallCheck(this,DialogNode);var _this=_possibleConstructorReturn(this,(DialogNode.__proto__||Object.getPrototypeOf(DialogNode)).call(this,data));return _start.set(_this,data&&data.startTalk?data.startTalk:""),_this}return _inherits(DialogNode,_get__2),_createClass(DialogNode,[{key:"getData",value:function(){var data=_get(DialogNode.prototype.__proto__||Object.getPrototypeOf(DialogNode.prototype),"getData",this).call(this);return data.startTalk=this.getStartTalk(),data}},{key:"canAddChild",value:function(type){return"TalkNode"===type}},{key:"addChild",value:function(childId){_get(DialogNode.prototype.__proto__||Object.getPrototypeOf(DialogNode.prototype),"addChild",this).call(this,childId);var children=this.getChildren();1===children.length&&this.setStartTalk(childId)}},{key:"removeChild",value:function(index){var child=this.getChild(index);child===this.getStartTalk()&&this.setStartTalk(""),_get(DialogNode.prototype.__proto__||Object.getPrototypeOf(DialogNode.prototype),"removeChild",this).call(this,index)}},{key:"setStartTalk",value:function(talkId){var children=this.getChildren(),canAdd=void 0!==children.filter(function(child){return child===talkId})[0];(canAdd||""===talkId)&&_start.set(this,talkId)}},{key:"getStartTalk",value:function(){return _start.get(this)}},{key:"dispose",value:function(){_start.delete(this),_get(DialogNode.prototype.__proto__||Object.getPrototypeOf(DialogNode.prototype),"dispose",this).call(this)}}]),DialogNode}(_get__("CompoundNode"))}();module.exports=_get__("DialogNode");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"DialogWalker":return DialogWalker}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),DialogWalker=function(){var _currTalk=new WeakMap,_rpgs=new WeakMap,_dialog=new WeakMap;return function(){function DialogWalker(rpgs){if(_classCallCheck(this,DialogWalker),!rpgs||!rpgs.findNode)throw new Error("RPGSystem instance not passed to constructor.");_rpgs.set(this,rpgs),_dialog.set(this,null),_currTalk.set(this,null)}return _createClass(DialogWalker,[{key:"setDialog",value:function(dialogId){var dialog=_rpgs.get(this).findNode(dialogId);if(null===dialog||!dialog.getStartTalk)throw new Error('DialogNode with the id "'+dialogId+'" does not exists.');_dialog.set(this,dialog),this.reset()}},{key:"setTalk",value:function(talkId){var talk=_rpgs.get(this).findNode(talkId);if(null===talk)throw new Error('TalkNode with the id "'+talkId+'" does not exists.');_currTalk.set(this,talk)}},{key:"getConversation",value:function(){var _this=this,conversation={},currTalk=_currTalk.get(this),children=currTalk?currTalk.getChildren():[];return conversation.text=currTalk?currTalk.getText():"",conversation.options=children.map(function(answerId){var answer=_rpgs.get(_this).findNode(answerId);return{id:answer.getId(),text:answer.getText(),active:answer.isActive(),enabled:answer.isVisible()}}),conversation}},{key:"selectOption",value:function(id){var children=_currTalk.get(this).getChildren(),answerId=children.filter(function(currId,index,array){return currId===id});if(void 0!==answerId[0]){var answerNode=_rpgs.get(this).findNode(answerId[0]),talkId=void 0;if(null!==answerNode&&(talkId=answerNode.getTalk(),void 0!==talkId))return this.setTalk(talkId),!0}return!1}},{key:"reset",value:function(){var dialog=_dialog.get(this);null!==dialog&&this.setTalk(dialog.getStartTalk())}}]),DialogWalker}()}();module.exports=_get__("DialogWalker");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"CompoundNode":return _CompoundNode2.default;case"TalkNode":return TalkNode}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_CompoundNode=__webpack_require__(7),_CompoundNode2=_interopRequireDefault(_CompoundNode),TalkNode=function(){var _text=new WeakMap;return function(_get__2){function TalkNode(data){_classCallCheck(this,TalkNode);var _this=_possibleConstructorReturn(this,(TalkNode.__proto__||Object.getPrototypeOf(TalkNode)).call(this,data));return _text.set(_this,data&&data.text?data.text:""),_this}return _inherits(TalkNode,_get__2),_createClass(TalkNode,[{key:"getData",value:function(){var data=_get(TalkNode.prototype.__proto__||Object.getPrototypeOf(TalkNode.prototype),"getData",this).call(this);return data.text=this.getText(),data}},{key:"setText",value:function(value){_text.set(this,value)}},{key:"getText",value:function(){return _text.get(this)}},{key:"canAddChild",value:function(type){return"AnswerNode"===type}},{key:"dispose",value:function(){_text.delete(this),_get(TalkNode.prototype.__proto__||Object.getPrototypeOf(TalkNode.prototype),"dispose",this).call(this)}}]),TalkNode}(_get__("CompoundNode"))}();module.exports=_get__("TalkNode");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))},function(module,exports,__webpack_require__){/**
	 * Role-Playing Game System
	 * @author Krzysztof Stano (stanosky)
	 * @license MIT license
	 * @link https://github.com/stanosky/rpgs
	 * @version 1.0.0rc
	 **/
"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _get__(variableName){if(void 0===_RewiredData__||void 0===_RewiredData__[variableName])return _get_original__(variableName);var value=_RewiredData__[variableName];return value===INTENTIONAL_UNDEFINED?void 0:value}function _get_original__(variableName){switch(variableName){case"ErrorHandler":return _ErrorHandler2.default;case"ErrorCode":return _ErrorCode2.default;case"BaseNode":return _BaseNode2.default;case"AnswerNode":return _AnswerNode2.default;case"DialogNode":return _DialogNode2.default;case"TalkNode":return _TalkNode2.default;case"Utils":return _Utils2.default;case"RPGSystem":return RPGSystem}}function _set__(variableName,value){return"object"!==("undefined"==typeof variableName?"undefined":_typeof(variableName))?(void 0===value?_RewiredData__[variableName]=INTENTIONAL_UNDEFINED:_RewiredData__[variableName]=value,function(){_reset__(variableName)}):void Object.keys(variableName).forEach(function(name){_RewiredData__[name]=variableName[name]})}function _reset__(variableName){delete _RewiredData__[variableName]}function _with__(object){function reset(){rewiredVariableNames.forEach(function(variableName){_RewiredData__[variableName]=previousValues[variableName]})}var rewiredVariableNames=Object.keys(object),previousValues={};return function(callback){rewiredVariableNames.forEach(function(variableName){previousValues[variableName]=_RewiredData__[variableName],_RewiredData__[variableName]=object[variableName]});var result=callback();return result&&"function"==typeof result.then?result.then(reset).catch(reset):reset(),result}}function addNonEnumerableProperty(name,value){Object.defineProperty(module.exports,name,{value:value,enumerable:!1,configurable:!0})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_Utils=__webpack_require__(2),_Utils2=_interopRequireDefault(_Utils),_BaseNode=__webpack_require__(1),_BaseNode2=_interopRequireDefault(_BaseNode),_ErrorHandler=__webpack_require__(9),_ErrorHandler2=_interopRequireDefault(_ErrorHandler),_ErrorCode=__webpack_require__(8),_ErrorCode2=_interopRequireDefault(_ErrorCode),_AnswerNode=__webpack_require__(10),_AnswerNode2=_interopRequireDefault(_AnswerNode),_DialogNode=__webpack_require__(11),_DialogNode2=_interopRequireDefault(_DialogNode),_TalkNode=__webpack_require__(13),_TalkNode2=_interopRequireDefault(_TalkNode),RPGSystem=function(data,editor){function _findNode(nodeId){var i;for(i=0;i<_objectPool.length;i++)if(_objectPool[i].getId()===nodeId)return _objectPool[i];return null}function _setConnection(type,nodeId1,nodeId2){nodeId1===nodeId2&&_errorHandler.showMsg(_get__("ErrorCode").CONNECTION_TO_ITSELF,{node:nodeId1});var node1=_findNode(nodeId1),node2=_findNode(nodeId2);return null===node2?void _tempWires.push({type:type,targetNode:nodeId1,referenceNode:nodeId2}):void(node1.canAddWireType(type)?node1.setWire(type,node2.getId()):_errorHandler.showMsg(_get__("ErrorCode").IMPROPER_CONNECTION,{type:type,node1:nodeId1,node2:nodeId2}))}function _nodeFactory(data,rpgs){var className=data.class;switch(className){case"BaseNode":return new(_get__("BaseNode"))(data,rpgs);case"AnswerNode":return new(_get__("AnswerNode"))(data,rpgs);case"DialogNode":return new(_get__("DialogNode"))(data,rpgs);case"TalkNode":return new(_get__("TalkNode"))(data,rpgs);default:return _errorHandler.showMsg(_get__("ErrorCode").CLASS_NOT_DEFINED,{class:className}),null}}function _getWaitingWiresForNode(nodeId){var wires=[],i=void 0;for(i=_tempWires.length-1;i>=0;i--)_tempWires[i].referenceNode===nodeId&&wires.push(_tempWires.splice(i,1)[0]);return wires}function _nodeCreator(params,asChild){function createChildNode(nodeParams){_lastChild=_nodeFactory(nodeParams,_self),_parentHistory[0].addChild(_lastChild.getId()),_objectPool.push(_lastChild)}if(asChild)null!==_lastChild?_lastChild.constructor.name===params.class?createChildNode(params):_lastChild.canAddChild(params.class)?(_parentHistory.unshift(_lastChild),createChildNode(params)):(_lastChild=_parentHistory.shift()||null,_nodeCreator(params,asChild)):_parentHistory.length>0&&_parentHistory[0].canAddChild(params.class)?createChildNode(params):_errorHandler.showMsg(_get__("ErrorCode").INCOMPATIBLE_CHILD,{child:params.class,parent:_parentHistory.length>0?_parentHistory[0].constructor.name:"null"});else{_lastChild=null,_parentHistory.length=0;var node=_nodeFactory(params,_self);_parentHistory=[node],_objectPool.push(node)}_getWaitingWiresForNode(params.uuid).map(function(wire){_setConnection(wire.type,wire.targetNode,wire.referenceNode)})}function _removeNode(id){var index=_get__("Utils").getIndexById(_objectPool,id),isNodeFound=index>-1;if(isNodeFound){var node=_objectPool.splice(index,1)[0];node.dispose()}return isNodeFound}function _addNode(className,params,asChild){return params.class=className,_nodeCreator(params,asChild),_self}function _addDialog(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_errorHandler.showMsg(_get__("ErrorCode").MANDATORY_PARAM,{param:"id"}),params={uuid:id,class:"DialogNode"};return _nodeCreator(params,!1),_self}function _addTalk(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_errorHandler.showMsg(_get__("ErrorCode").MANDATORY_PARAM,{param:"id"}),text=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",params={uuid:id,text:text,class:"TalkNode"};return _nodeCreator(params,!0),_self}function _addAnswer(){var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",params={text:text,class:"AnswerNode"};return _nodeCreator(params,!0),_self}function _setWire(type,referenceNodeId){var targetNode=_lastChild;return null===targetNode&&_parentHistory.length>0&&(targetNode=_parentHistory[0]),_setConnection(type,targetNode.getId(),referenceNodeId),_self}function _getNodesByClass(className){return _objectPool.filter(function(node){return node.constructor.name===className})}function _getNodes(){var className=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===className?_objectPool.slice():_getNodesByClass(className)}function _serializeData(){var data=_objectPool.map(function(obj){return obj.getData?obj.getData():obj});return JSON.stringify(data)}var _objectPool=[],_editor=editor||null,_errorHandler=new(_get__("ErrorHandler"))(_editor),_lastChild=null,_parentHistory=[],_tempWires=[],_self={};return data&&(_objectPool=JSON.parse(data).map(function(d){return _nodeFactory(d,_self)})),_self={findNode:_findNode,addNode:_addNode,removeNode:_removeNode,getNodes:_getNodes,setWire:_setWire,addDialog:_addDialog,addTalk:_addTalk,addAnswer:_addAnswer,serializeData:_serializeData,toString:_serializeData}};module.exports=_get__("RPGSystem");var _RewiredData__=Object.create(null),INTENTIONAL_UNDEFINED="__INTENTIONAL_UNDEFINED__",_RewireAPI__={};!function(){function addPropertyToAPIObject(name,value){Object.defineProperty(_RewireAPI__,name,{value:value,enumerable:!1,configurable:!0})}addPropertyToAPIObject("__get__",_get__),addPropertyToAPIObject("__GetDependency__",_get__),addPropertyToAPIObject("__Rewire__",_set__),addPropertyToAPIObject("__set__",_set__),addPropertyToAPIObject("__reset__",_reset__),addPropertyToAPIObject("__ResetDependency__",_reset__),addPropertyToAPIObject("__with__",_with__)}();var _typeOfOriginalExport=_typeof(module.exports);"object"!==_typeOfOriginalExport&&"function"!==_typeOfOriginalExport||!Object.isExtensible(module.exports)||(addNonEnumerableProperty("__get__",_get__),addNonEnumerableProperty("__GetDependency__",_get__),addNonEnumerableProperty("__Rewire__",_set__),addNonEnumerableProperty("__set__",_set__),addNonEnumerableProperty("__reset__",_reset__),addNonEnumerableProperty("__ResetDependency__",_reset__),addNonEnumerableProperty("__with__",_with__),addNonEnumerableProperty("__RewireAPI__",_RewireAPI__))}])});
//# sourceMappingURL=rpgs.min.js.map