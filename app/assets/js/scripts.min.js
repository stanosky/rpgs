/*!
 * rpgs
 * RPG System
 * https://github.com/stanosky/rpgs
 * @author Krzysztof Stano
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
'use strict'

module.exports = {
  compileCode,
  compileExpression,
  expose,
  hide
}

let globalObj
if (typeof window !== 'undefined') globalObj = window // eslint-disable-line
else if (typeof global !== 'undefined') globalObj = global // eslint-disable-line
else if (typeof self !== 'undefined') globalObj = self // eslint-disable-line
globalObj.$nxCompileToSandbox = toSandbox
globalObj.$nxCompileCreateBackup = createBackup

const proxies = new WeakMap()
const expressionCache = new Map()
const codeCache = new Map()
const globals = new Set()
const handlers = {has}

function compileExpression (src) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  let expression = expressionCache.get(src)
  if (!expression) {
    expression = new Function('context', // eslint-disable-line
      `const sandbox = $nxCompileToSandbox(context)
      try { with (sandbox) { return ${src} } } catch (err) {
        if (!(err instanceof TypeError)) throw err
      }`)
    expressionCache.set(src, expression)
  }
  return expression
}

function compileCode (src) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  let code = codeCache.get(src)
  if (!code) {
    code = new Function('context', 'tempVars', // eslint-disable-line
    `const backup = $nxCompileCreateBackup(context, tempVars)
    Object.assign(context, tempVars)
    const sandbox = $nxCompileToSandbox(context)
    try {
      with (sandbox) { ${src} }
    } finally {
      Object.assign(context, backup)
    }`)
    codeCache.set(src, code)
  }
  return code
}

function expose (...globalNames) {
  for (let globalName of globalNames) {
    globals.add(globalName)
  }
}

function hide (...globalNames) {
  for (let globalName of globalNames) {
    globals.delete(globalName)
  }
}

function toSandbox (obj) {
  if (typeof obj !== 'object') {
    throw new TypeError('first argument must be an object')
  }
  let sandbox = proxies.get(obj)
  if (!sandbox) {
    sandbox = new Proxy(obj, handlers)
    proxies.set(obj, sandbox)
  }
  return sandbox
}

function createBackup (context, tempVars) {
  if (typeof tempVars === 'object') {
    const backup = {}
    for (let key of Object.keys(tempVars)) {
      backup[key] = context[key]
    }
    return backup
  }
}

function has (target, key) {
  return globals.has(key) ? Reflect.has(target, key) : true
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(require,module,exports){
module.exports={
    "actors":[ {
        "class":"ActorNode",
        "uuid":"act1",
        "input": {
            "dialog": ["4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e"]
        }
        ,
        "name":"Adam"
    }
    ],
    "conditions":[ {
        "class":"ConditionNode",
        "uuid":"cond1",
        "output": {
            "visibility": ["a086a9cb-3aaa-4cdb-abcc-9955c54673db"]
        }
        ,
        "label":"",
        "code":"\n        (function(){\n          alert(\"Condition test!\");\n          //return true;\n        })();\n      "
    }
    ],
    "dialogs":[ {
        "class":"DialogNode",
        "uuid":"dlg1",
        "input": {}
        ,
        "output": {
            "dialog": ["4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e"]
        }
        ,
        "children":["tlk0",
        "tlk1",
        "tlk2",
        "tlk3"],
        "startTalk":"tlk0"
    }
    ],
    "links":[ {
        "class": "LinkNode", "uuid": "4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e", "input": "act1", "output": "dlg1", "type": "dialog"
    }
    ,
    {
        "class": "LinkNode", "uuid": "a086a9cb-3aaa-4cdb-abcc-9955c54673db", "input": "tlk0ans1", "output": "cond1", "type": "visibility"
    }
    ,
    {
        "class": "LinkNode", "uuid": "e52ed77b-515b-4c15-9d50-d43fca635b48", "input": "tlk1", "output": "tlk0ans1", "type": "goto"
    }
    ,
    {
        "class": "LinkNode", "uuid": "c09982b8-5f1f-47c5-b05d-e2ec56187216", "input": "tlk2", "output": "tlk0ans2", "type": "goto"
    }
    ,
    {
        "class": "LinkNode", "uuid": "3d66f4f8-dcd8-486c-bf8d-433531f108b1", "input": "tlk3", "output": "tlk0ans3", "type": "goto"
    }
    ],
    "talks":[ {
        "class":"TalkNode",
        "uuid":"tlk0",
        "input": {}
        ,
        "children": ["tlk0ans1", "tlk0ans2", "tlk0ans3"], "text": "This is talk 0."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk1",
        "input": {
            "goto": ["e52ed77b-515b-4c15-9d50-d43fca635b48"]
        }
        ,
        "children":["tlk1ans1"],
        "text":"This is talk 1."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk2",
        "input": {
            "goto": ["c09982b8-5f1f-47c5-b05d-e2ec56187216"]
        }
        ,
        "children":["tlk2ans1"],
        "text":"This is talk 2."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk3",
        "input": {
            "goto": ["3d66f4f8-dcd8-486c-bf8d-433531f108b1"]
        }
        ,
        "children":["tlk3ans1"],
        "text":"This is talk 3."
    }
    ],
    "answers":[ {
        "class":"AnswerNode",
        "uuid":"tlk0ans1",
        "input": {
            "visibility": ["a086a9cb-3aaa-4cdb-abcc-9955c54673db"]
        }
        ,
        "output": {
            "goto": ["e52ed77b-515b-4c15-9d50-d43fca635b48"]
        }
        ,
        "text":"Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk0ans2",
        "input": {}
        ,
        "output": {
            "goto": ["c09982b8-5f1f-47c5-b05d-e2ec56187216"]
        }
        ,
        "text":"Answer2"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk0ans3",
        "input": {}
        ,
        "output": {
            "goto": ["3d66f4f8-dcd8-486c-bf8d-433531f108b1"]
        }
        ,
        "text":"Answer3"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk1ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk2ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk3ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ]
}

},{}],3:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };
//import InventoryNode  from './actors/InvenotryNode';


var _Utils = require('./core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _ErrorHandler = require('./core/ErrorHandler');

var _ErrorHandler2 = _interopRequireDefault(_ErrorHandler);

var _ErrorCode = require('./core/ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

var _BaseNode = require('./core/BaseNode');

var _BaseNode2 = _interopRequireDefault(_BaseNode);

var _LinkNode = require('./core/LinkNode');

var _LinkNode2 = _interopRequireDefault(_LinkNode);

var _ActorNode = require('./actors/ActorNode');

var _ActorNode2 = _interopRequireDefault(_ActorNode);

var _ConditionNode = require('./conditions/ConditionNode');

var _ConditionNode2 = _interopRequireDefault(_ConditionNode);

var _AnswerNode = require('./dialogs/AnswerNode');

var _AnswerNode2 = _interopRequireDefault(_AnswerNode);

var _DialogNode = require('./dialogs/DialogNode');

var _DialogNode2 = _interopRequireDefault(_DialogNode);

var _TalkNode = require('./dialogs/TalkNode');

var _TalkNode2 = _interopRequireDefault(_TalkNode);

var _QuestNode = require('./quests/QuestNode');

var _QuestNode2 = _interopRequireDefault(_QuestNode);

var _TaskNode = require('./quests/TaskNode');

var _TaskNode2 = _interopRequireDefault(_TaskNode);

var _VariableNode = require('./variables/VariableNode');

var _VariableNode2 = _interopRequireDefault(_VariableNode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var KEY_ACTORS = 'actors';
var KEY_ANSWERS = 'answers';
var KEY_CONDITIONS = 'conditions';
var KEY_DIALOGS = 'dialogs';
var KEY_LINKS = 'links';
var KEY_SCRIPTS = 'scripts';
var KEY_TALKS = 'talks';
var KEY_TASKS = 'tasks';
var KEY_QUESTS = 'quests';
var KEY_VARIABLES = 'variables';

var RPGSystem = function RPGSystem(data, editor) {
  var _objectPool = {},
      _editor = editor || null,
      _errorHandler = new _ErrorHandler2.default(_editor),
      _context = null,
      _lastChild = null,
      _parentHistory = [],
      _halfLinks = {
    out: [],
    inp: []
  };

  for (var key in data) {
    if (data.hasOwnProperty(key)) {
      _objectPool[key] = data[key].map(function (d) {
        return _nodeFactory(d, _self);
      });
    }
  }

  function _nodeFactory(data, rpgs) {
    var className = data.class;
    switch (className) {
      case 'ActorNode':
        return new _ActorNode2.default(data, rpgs);
      case 'ConditionNode':
        return new _ConditionNode2.default(data, rpgs);
      case 'AnswerNode':
        return new _AnswerNode2.default(data, rpgs);
      case 'DialogNode':
        return new _DialogNode2.default(data, rpgs);
      case 'TalkNode':
        return new _TalkNode2.default(data, rpgs);
      case 'QuestNode':
        return new _QuestNode2.default(data, rpgs);
      case 'TaskNode':
        return new _TaskNode2.default(data, rpgs);
      case 'LinkNode':
        return new _LinkNode2.default(data, rpgs);
      case 'VariableNode':
        return new _VariableNode2.default(data, rpgs);
      default:
        _errorHandler.showMsg(_ErrorCode2.default.CLASS_NOT_DEFINED, { class: className });
        return null;
    }
  }

  function _findNodeInArray(array, id) {
    for (var i = 0; i < array.length; i++) {
      if (array[i].getId() === id) return array[i];
    }
    return null;
  }

  var _findNode = function _findNode(objId) {
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        var obj = _findNodeInArray(_objectPool[key], objId);
        if (obj !== null) return obj;
      }
    }
    //Is error message neccessary here? To consider.
    //_errorHandler.showMsg(ErrorCode.OBJECT_NOT_FOUND,{id:objId});
    return null;
  },
      _getNode = function _getNode(key, objId) {
    var obj = _findNodeInArray(_objectPool[key], objId);
    return obj;
  },
      _addNode = function _addNode(key, obj) {
    if (!_objectPool[key]) _objectPool[key] = [];
    _objectPool[key].push(obj);
  },
      _removeNode = function _removeNode(id) {
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        if (this._removeNodeByKey(key, id)) return true;
      }
    }
    return false;
  },
      _removeNodeByKey = function _removeNodeByKey(key, id) {
    var index = _Utils2.default.getIndexById(_objectPool[key], id);
    var isNodeFound = index > -1;
    if (isNodeFound) {
      var node = _objectPool[key].splice(index, 1)[0];
      node.dispose();
    }
    return isNodeFound;
  },
      _setConnection = function _setConnection(type, nodeId1, nodeId2) {
    if (nodeId1 === nodeId2) {
      _errorHandler.showMsg(_ErrorCode2.default.CONNECTION_TO_ITSELF, { node: nodeId1 });
      return false;
    }
    var node1 = _findNode(nodeId1);
    var node2 = _findNode(nodeId2);
    if (node1 === null || node2 === null) return;
    if (node1.canCreateOutputConnection(type) && node2.canCreateInputConnection(type)) {
      var link = new _LinkNode2.default({ type: type, output: nodeId1, input: nodeId2 });
      var linkId = link.getId();
      _addNode(KEY_LINKS, link);
      node1.setOutputConnection(type, linkId);
      node2.setInputConnection(type, linkId);
      return linkId;
    } else {
      _errorHandler.showMsg(_ErrorCode2.default.IMPROPER_CONNECTION, {
        type: type,
        node1: nodeId1,
        node2: nodeId2
      });
      return false;
    }
  },
      _getConnection = function _getConnection(linkId) {
    return this._getNode(KEY_LINKS, linkId);
  },
      _getConnections = function _getConnections() {
    return _objectPool[KEY_LINKS];
  },
      _removeConnection = function _removeConnection(linkId) {
    this._removeNodeByKey(KEY_LINKS, linkId);
  };

  ////////////////////////////////////////////////////////////////
  //METHOD CHAINING
  ////////////////////////////////////////////////////////////////

  /**
   * Method used to check passed parameters and later merge them into
   * single object.
   * @param  {string} id      Mandatory id of node.
   * @param  {object} params  Optional parameters.
   * @return {object} Parameters merged into object.
   */
  function _checkAndMergeParams() {
    var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _errorHandler.showMsg(_ErrorCode2.default.MANDATORY_PARAM, { param: 'id' });
    var params = arguments[1];

    if (typeof id !== 'string') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'string' });
    }
    if (params !== undefined && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) !== 'object') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'object' });
    } else if (params === undefined) {
      params = {};
    }
    params.uuid = id;
    return params;
  }

  /**
   * This method helps in the creation of nodes. Its focus on proper
   * placement of nodes in tree.
   * @param  {string} id      Mandatory id of newly created node.
   * @param  {object} params  Parameters of created node.
   * @param  {boolean} asChild Determines if node should be added as child
   * of another node or as an independent node.
   * @param  {string} className   Name of class that will be used to create node.
   * @param  {string} storage Name of node group inside which node will be added.
   */
  function _chainNodeCreator(id, params, asChild, className, storage) {
    //First, we check that id and params are valid.
    params = _checkAndMergeParams(id, params);
    //Class name for later usage.
    params.class = className;

    //Test if node should be added as child or parent.
    if (asChild) {
      //If last added child was not null then we must check additional conditions.
      if (_lastChild !== null) {
        //If constructor name of previous child node, is equal to name of class,
        //whose we try to create, it means node should be added to current parent.
        if (_lastChild.constructor.name === className) {
          createChildNode(params);
        }
        //If names of constructors not match, then we must check if new node
        //can be added as child to our previous child.
        else if (_lastChild.canAddChild(className)) {
            _parentHistory.unshift(_lastChild);
            createChildNode(params);
          }
          //Finally if previous conditions are false we try go back to previous
          //parent node.
          else {
              _lastChild = _parentHistory.shift() || null;
              _chainNodeCreator(id, params, asChild, className, storage);
            }
      }
      //If last child is null, then we check if node can be added to current
      //parent node.
      else if (_parentHistory.length > 0 && _parentHistory[0].canAddChild(className)) {
          createChildNode(params);
        }
        //If last child and last parent is equal to null, then new child node
        //cant be added, so we throw error.
        else {
            _errorHandler.showMsg(_ErrorCode2.default.INCOMPATIBLE_CHILD, {
              child: className,
              parent: _parentHistory.length > 0 ? _parentHistory[0].constructor.name : 'null'
            });
          }
    } else {
      //If node is added as parent, then last child is set to null
      //and parent history is cleared.
      _lastChild = null;
      _parentHistory.length = 0;
      //After that, new node is created.
      var node = _nodeFactory(params, _self);
      _parentHistory = [node];
      _addNode(storage, node);
    }

    function createChildNode(nodeParams) {
      //We create a new node, and then set as the last child.
      _lastChild = _nodeFactory(nodeParams, _self);
      //Then we add our freshly created node to its parent.
      _parentHistory[0].addChild(_lastChild.getId());
      //Finally new node is added to main storage object.
      _addNode(storage, _lastChild);
    }
  }

  /**
   * Helper method that is used to remove nodes from object pool
   * and reset context of "method chaining" algorithm.
   * @param  {string} id  Id of node to be removed.
   * @param  {string} key Name of node group which contains node to remove.
   */
  function _chainNodeRemover(id, key) {
    _lastChild = null;
    _parentHistory.length = 0;
    this._removeNodeByKey(key, id);
  }

  /**
   * Helper method that is used for creating temporary links (half links)
   * or complete Link nodes, when input and output counterparts are present.
   * @param  {string} type      Defines type of connection.
   * @param  {string} id        Id of targeted node into which connection
   * should be made.
   * @param  {string} startSide Defines current start side of the link.
   * @param  {string} endSide   Defines current end side of the link.
   */
  function _chainLinkCreator(type, id, startSide, endSide) {
    var opposite = null;
    var node = null;
    //First we must check whether our method is called on node.
    if (_lastChild !== null) {
      node = _lastChild;
    } else if (_parentHistory[0] !== undefined) {
      node = _parentHistory[0];
    }
    //If our last node is not null, we can proceed further.
    if (node !== null) {
      //Our next task is to iterate through an array of "half links". This step
      //is necessary to find out whether we should create another "half link"
      //or complete LinkNode. We are looking for the opposite side of the link.
      for (var i = 0; i < _halfLinks[endSide].length; i++) {
        var link = _halfLinks[endSide][i];
        if (link.type === type && link.id === node.getId()) {
          opposite = _halfLinks[endSide].splice(i, 1)[0];
          break;
        }
      }
      //If opposite side is not available, it means we should create "half link".
      if (opposite === null) {
        _halfLinks[startSide].push({ type: type, id: id });
      }
      //Otherwise we create LinkNode.
      else {
          //Method "_setConnection" always create links in defined direction
          //starting from input side to output side, so is it important to
          //pass parameters in proper manner.
          if (startSide === 'inp') {
            _setConnection(type, id, opposite.id);
          } else {
            _setConnection(type, opposite.id, id);
          }
        }
    }
    //Else if a node is null then it means that method was called on
    //an incorrect target.
    else {
        _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_LINK_TARGET);
      }
  }

  var _addActor = function _addActor(id, params) {
    _chainNodeCreator(id, params, false, 'ActorNode', KEY_ACTORS);
    return this;
  },
      _removeActor = function _removeActor(actorId) {
    _chainNodeRemover(actorId, KEY_ACTORS);
    return this;
  },
      _addQuest = function _addQuest(id, params) {
    _chainNodeCreator(id, params, false, 'QuestNode', KEY_QUESTS);
    return this;
  },
      _removeQuest = function _removeQuest(questId) {
    _chainNodeRemover(questId, KEY_QUESTS);
    return this;
  },
      _addDialog = function _addDialog(id, params) {
    _chainNodeCreator(id, params, false, 'DialogNode', KEY_DIALOGS);
    return this;
  },
      _removeDialog = function _removeDialog(dialogId) {
    _chainNodeRemover(dialogId, KEY_DIALOGS);
    return this;
  },
      _addCondition = function _addCondition(id, params) {
    _chainNodeCreator(id, params, false, 'ConditionNode', KEY_CONDITIONS);
    return this;
  },
      _removeCondition = function _removeCondition(conditionId) {
    _chainNodeRemover(conditionId, KEY_CONDITIONS);
    return this;
  },
      _addVariable = function _addVariable(id, params) {
    _chainNodeCreator(id, params, false, 'VariableNode', KEY_VARIABLES);
    return this;
  },
      _removeVariable = function _removeVariable(variableId) {
    _chainNodeRemover(variableId, KEY_VARIABLES);
    return this;
  },
      _addTalk = function _addTalk(id, params) {
    _chainNodeCreator(id, params, true, 'TalkNode', KEY_TALKS);
    return this;
  },
      _removeTalk = function _removeTalk(id) {
    _chainNodeRemover(id, KEY_TALKS);
    return this;
  },
      _addAnswer = function _addAnswer(id, params) {
    _chainNodeCreator(id, params, true, 'AnswerNode', KEY_ANSWERS);
    return this;
  },
      _removeAnswer = function _removeAnswer(id) {
    _chainNodeRemover(id, KEY_ANSWERS);
    return this;
  },
      _inp = function _inp(type, id) {
    _chainLinkCreator(type, id, 'inp', 'out');
    return this;
  },
      _out = function _out(type, id) {
    _chainLinkCreator(type, id, 'out', 'inp');
    return this;
  },


  ////////////////////////////////////////////////////////////////
  //GETTERS
  ////////////////////////////////////////////////////////////////
  _getActor = function _getActor(actorId) {
    return this._getNode(KEY_ACTORS, actorId);
  },
      _getActors = function _getActors() {
    return _objectPool[KEY_ACTORS];
  },
      _getCondition = function _getCondition(conditionId) {
    return _getNode(KEY_CONDITIONS, conditionId);
  },
      _getConditions = function _getConditions() {
    return _objectPool[KEY_CONDITIONS];
  },
      _getDialog = function _getDialog(dialogId) {
    return _getNode(KEY_DIALOGS, dialogId);
  },
      _getDialogs = function _getDialogs() {
    return _objectPool[KEY_DIALOGS];
  },
      _getQuest = function _getQuest(questId) {
    return _getNode(KEY_QUESTS, questId);
  },
      _getQuests = function _getQuests() {
    return _objectPool[KEY_QUESTS];
  },
      _getVariable = function _getVariable(variableId) {
    return _getNode(KEY_VARIABLES, variableId);
  },
      _getVariables = function _getVariables() {
    return _objectPool[KEY_VARIABLES];
  },
      _serializeData = function _serializeData() {
    var data = {};
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        data[key] = _objectPool[key].map(function (obj) {
          return obj.getData ? obj.getData() : obj;
        });
      }
    }
    return JSON.stringify(data);
  };

  var _self = {
    ////////////////////////////////////////////
    //General node methods
    ////////////////////////////////////////////
    findNode: _findNode,
    getNode: _getNode,
    addNode: _addNode,
    removeNode: _removeNode,

    ////////////////////////////////////////////
    //Link creation methods
    ////////////////////////////////////////////
    setConnection: _setConnection,
    getConnection: _getConnection,
    getConnections: _getConnections,
    removeConnection: _removeConnection,

    ////////////////////////////////////////////
    //Chainable methods
    ////////////////////////////////////////////
    addActor: _addActor,
    removeActor: _removeActor,
    addQuest: _addQuest,
    removeQuest: _removeQuest,
    addDialog: _addDialog,
    removeDialog: _removeDialog,
    addCondition: _addCondition,
    removeCondition: _removeCondition,
    addVariable: _addVariable,
    removeVariable: _removeVariable,
    addTalk: _addTalk,
    removeTalk: _removeTalk,
    addAnswer: _addAnswer,
    removeAnswer: _removeAnswer,
    inp: _inp,
    out: _out,

    ////////////////////////////////////////////
    //Getter methods
    ////////////////////////////////////////////
    getActor: _getActor,
    getActors: _getActors,
    getCondition: _getCondition,
    getConditions: _getConditions,
    getDialog: _getDialog,
    getDialogs: _getDialogs,
    getQuest: _getQuest,
    getQuests: _getQuests,
    getVariable: _getVariable,
    getVariables: _getVariables,

    ////////////////////////////////////////////
    //Miscalineus methods
    ////////////////////////////////////////////
    serializeData: _serializeData
  };
  return _self;
};
module.exports = RPGSystem;

},{"./actors/ActorNode":4,"./conditions/ConditionNode":5,"./core/BaseNode":6,"./core/ErrorCode":8,"./core/ErrorHandler":9,"./core/LinkNode":10,"./core/Utils":12,"./dialogs/AnswerNode":13,"./dialogs/DialogNode":14,"./dialogs/TalkNode":15,"./quests/QuestNode":16,"./quests/TaskNode":18,"./variables/VariableNode":19}],4:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActorNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _name = new WeakMap();
  var _dialog = new WeakMap();
  //let _inventory = new WeakMap();


  return function (_BaseNode) {
    _inherits(ActorNode, _BaseNode);

    function ActorNode(data) {
      _classCallCheck(this, ActorNode);

      var _this = _possibleConstructorReturn(this, (ActorNode.__proto__ || Object.getPrototypeOf(ActorNode)).call(this, data));

      _name.set(_this, data ? data.name : '');
      _dialog.set(_this, data ? data.dialog : '');
      //_inventory.set(this,data.inventory ? );
      return _this;
    }

    _createClass(ActorNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(ActorNode.prototype.__proto__ || Object.getPrototypeOf(ActorNode.prototype), 'getData', this).call(this);
        data.name = this.getName();
        data.dialog = this.getDialog();
        return data;
      }
    }, {
      key: 'setName',
      value: function setName(value) {
        _name.set(this, value);
      }
    }, {
      key: 'getName',
      value: function getName() {
        return _name.get(this);
      }
    }, {
      key: 'getDialog',
      value: function getDialog() {
        return _dialog.get(this);
      }

      /*getInventory() {
        return _inventory.get(this);
      }*/

    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return this.getInputConnections(_LinkType2.default.DIALOG).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _name.delete(this);
        _dialog.delete(this);
        //_inventory.delete(this);
        _get(ActorNode.prototype.__proto__ || Object.getPrototypeOf(ActorNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return ActorNode;
  }(_BaseNode3.default);
}();

module.exports = ActorNode;

},{"../core/BaseNode":6,"../core/LinkType":11}],5:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _nxCompile = require('@risingstack/nx-compile');

var _nxCompile2 = _interopRequireDefault(_nxCompile);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ConditionNode = function () {
  var _label = new WeakMap();
  var _code = new WeakMap();
  var _compiled = new WeakMap();
  var _sandbox = new WeakMap();

  return function (_BaseNode) {
    _inherits(ConditionNode, _BaseNode);

    function ConditionNode(data, rpgs) {
      _classCallCheck(this, ConditionNode);

      var _this = _possibleConstructorReturn(this, (ConditionNode.__proto__ || Object.getPrototypeOf(ConditionNode)).call(this, data, rpgs));

      _label.set(_this, data.label ? data.label : '');
      _code.set(_this, data.code ? data.code : '(function(){return true;})();');
      _nxCompile2.default.expose('console');
      _compiled.set(_this, _nxCompile2.default.compileExpression(_code.get(_this)));
      //_sandbox.set(this,compiler.toSandbox(rpgs));
      //compiler.expose('console', 'Math');
      return _this;
    }

    _createClass(ConditionNode, [{
      key: 'setLabel',
      value: function setLabel(text) {
        _label.set(this, text);
      }
    }, {
      key: 'getLabel',
      value: function getLabel() {
        return _label.get(this);
      }
    }, {
      key: 'setCode',
      value: function setCode(code) {
        _code.set(this, code);
        _compiled.set(this, _nxCompile2.default.compileExpression(_code.get(this), _sandbox.get(this)));
      }
    }, {
      key: 'getCode',
      value: function getCode() {
        return _code.get(this);
      }
    }, {
      key: 'check',
      value: function check() {
        return _compiled.get(this)({ rpgs: this.getRPGS() });
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(ConditionNode.prototype.__proto__ || Object.getPrototypeOf(ConditionNode.prototype), 'getData', this).call(this);
        data.label = this.getLabel();
        data.code = this.getCode();
        return data;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
          case _LinkType2.default.ACTIVITY:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _label.delete(this);
        _code.delete(this);
        _sandbox.delete(this);
        _compiled.delete(this);
        _get(ConditionNode.prototype.__proto__ || Object.getPrototypeOf(ConditionNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return ConditionNode;
  }(_BaseNode3.default);
}();
module.exports = ConditionNode;

},{"../core/BaseNode":6,"../core/LinkType":11,"@risingstack/nx-compile":1}],6:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require('./Utils');

var _LinkType = require('./LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var KEY_LINKS = 'links';
var KEY_CONDITIONS = 'conditions';

var BaseNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _rpgs = new WeakMap();
  var _uuid = new WeakMap();
  var _input = new WeakMap();
  var _output = new WeakMap();

  return function () {
    function BaseNode(data, rpgs) {
      _classCallCheck(this, BaseNode);

      _rpgs.set(this, rpgs);
      //If uuid not present, then by default we assign Universally Unique ID.
      _uuid.set(this, data.uuid ? data.uuid : _Utils.UUID.generate());
      _input.set(this, data.input ? data.input : {});
      _output.set(this, data.output ? data.output : {});
    }

    _createClass(BaseNode, [{
      key: 'getRPGS',
      value: function getRPGS() {
        return _rpgs.get(this);
      }
    }, {
      key: 'setId',
      value: function setId(value) {
        _uuid.set(this, value);
      }
    }, {
      key: 'getId',
      value: function getId() {
        return _uuid.get(this);
      }
    }, {
      key: 'checkCondition',
      value: function checkCondition(conditionId) {
        var condition = this.getRPGS().getNode(KEY_CONDITIONS, conditionId);
        return condition ? condition.check() : true;
      }

      /**
       * Returns boolean that reflects visiblility state of node.
       * @return {Boolean} Visibility state
       */

    }, {
      key: 'isVisible',
      value: function isVisible() {
        var conditions = getInputConnections(_LinkType2.default.VISIBILITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }

      /**
       * Returns boolean that reflects activity state of node.
       * @return {Boolean} Active state
       */

    }, {
      key: 'isActive',
      value: function isActive() {
        var conditions = getInputConnections(_LinkType2.default.ACTIVITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }
    }, {
      key: 'getData',
      value: function getData() {
        return {
          class: this.constructor.name,
          uuid: this.getId(),
          input: this.getInputConnections(),
          output: this.getOutputConnections()
        };
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return false;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {}
    }, {
      key: 'removeChild',
      value: function removeChild(index) {}
    }, {
      key: 'getChild',
      value: function getChild(index) {
        return null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return [];
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {}
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        return false;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        return false;
      }
    }, {
      key: '_setConnection',
      value: function _setConnection(obj, type, linkId) {
        if (!obj.hasOwnProperty(type)) {
          obj[type] = [];
        }
        obj[type].push(linkId);
        return obj;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {
        _output.set(this, this._setConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {
        _input.set(this, this._setConnection(_input.get(this), type, linkId));
      }
    }, {
      key: '_getConnections',
      value: function _getConnections(obj, type) {
        if (type) return !obj.hasOwnProperty(type) ? [] : obj[type];else return obj;
      }
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {
        return this._getConnections(_output.get(this), type);
      }
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {
        return this._getConnections(_input.get(this), type);
      }
    }, {
      key: '_removeConnection',
      value: function _removeConnection(obj, type, linkId) {
        if (obj.hasOwnProperty(type)) {
          obj[type] = Utils.removeObjectFromArray(obj[type], linkId);
        }
        return obj;
      }
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {
        _output.set(this, this._removeConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {
        _input.set(this, this._removeConnection(_input.get(this), type, linkId));
      }
    }, {
      key: 'removeChildrenFrom',
      value: function removeChildrenFrom(obj, key) {
        var _this = this;

        obj.filter(function (childId, index, arr) {
          _this.getRPGS().removeNode(key, childId);
          return true;
        });
      }
    }, {
      key: '_removeLinksFrom',
      value: function _removeLinksFrom(obj) {
        for (var type in obj) {
          if (obj.hasOwnProperty(type)) {
            removeChildrenFrom(obj[type], KEY_LINKS);
          }
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeLinksFrom(_output.get(this));
        this._removeLinksFrom(_input.get(this));
        _rpgs.delete(this);
        _uuid.delete(this);
        _input.delete(this);
        _output.delete(this);
      }
    }]);

    return BaseNode;
  }();
}();
module.exports = BaseNode;

},{"./LinkType":11,"./Utils":12}],7:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CompoundNode = function () {
  var _children = new WeakMap();

  return function (_BaseNode) {
    _inherits(CompoundNode, _BaseNode);

    function CompoundNode(data, rpgs) {
      _classCallCheck(this, CompoundNode);

      var _this = _possibleConstructorReturn(this, (CompoundNode.__proto__ || Object.getPrototypeOf(CompoundNode)).call(this, data, rpgs));

      _children.set(_this, data.children ? data.children : []);
      return _this;
    }

    _createClass(CompoundNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'getData', this).call(this);
        data.children = this.getChildren();
        return data;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {
        var children = _children.get(this);
        _children.set(this, _Utils2.default.addObjectToArray(children, childId));
      }
    }, {
      key: 'removeChild',
      value: function removeChild(index) {
        var children = _children.get(this);
        _children.set(this, children.splice(index, 1));
      }
    }, {
      key: 'getChild',
      value: function getChild(index) {
        var children = _children.get(this);
        return children.length > index ? children[index] : null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return _children.get(this);
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {
        this.removeChildrenFrom(_children.get(this), key);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _children.delete(this);
        _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return CompoundNode;
  }(_BaseNode3.default);
}();
module.exports = CompoundNode;

},{"../core/BaseNode":6,"../core/Utils":12}],8:[function(require,module,exports){
"use strict";

var NODE_NOT_EXISTS = 0;
var CLASS_NOT_DEFINED = 1;
var CONNECTION_TO_ITSELF = 2;
var IMPROPER_CONNECTION = 3;
var OBJECT_NOT_FOUND = 4;
var MANDATORY_PARAM = 5;
var INCORRECT_TYPE = 6;
var INCORRECT_PARENT_NODE = 7;
var INCORRECT_LINK_TARGET = 8;
var INCOMPATIBLE_CHILD = 9;

exports.NODE_NOT_EXISTS = NODE_NOT_EXISTS;
exports.CLASS_NOT_DEFINED = CLASS_NOT_DEFINED;
exports.CONNECTION_TO_ITSELF = CONNECTION_TO_ITSELF;
exports.IMPROPER_CONNECTION = IMPROPER_CONNECTION;
exports.OBJECT_NOT_FOUND = OBJECT_NOT_FOUND;
exports.MANDATORY_PARAM = MANDATORY_PARAM;
exports.INCORRECT_TYPE = INCORRECT_TYPE;
exports.INCORRECT_PARENT_NODE = INCORRECT_PARENT_NODE;
exports.INCORRECT_LINK_TARGET = INCORRECT_LINK_TARGET;
exports.INCOMPATIBLE_CHILD = INCOMPATIBLE_CHILD;

},{}],9:[function(require,module,exports){
"use strict";

var _ErrorCode = require('./ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ErrorHandler = function ErrorHandler(editor) {
  return {
    showMsg: function showMsg(errorCode, params) {
      var msg = '';
      switch (errorCode) {
        case _ErrorCode2.default.NODE_NOT_EXISTS:
          msg = 'Node of type ' + params.type + ' is not defined.';
          break;
        case _ErrorCode2.default.CLASS_NOT_DEFINED:
          msg = 'Class ' + params.class + ' is not defined.';
          break;
        case _ErrorCode2.default.CONNECTION_TO_ITSELF:
          msg = 'Cannot connect node "' + params.node + '" to itself.';
          break;
        case _ErrorCode2.default.IMPROPER_CONNECTION:
          msg = 'Cannot create connection of type "' + params.type + '" from node id "' + params.node1 + '" to node id "' + params.node2 + '".';
          break;
        case _ErrorCode2.default.OBJECT_NOT_FOUND:
          msg = 'Cannot find object with id "' + params.id + '"';
          break;
        case _ErrorCode2.default.MANDATORY_PARAM:
          msg = 'Parameter "' + params.param + '" was expected but instead got undefined.';
          break;
        case _ErrorCode2.default.INCORRECT_TYPE:
          msg = 'Wrong type of argument. Expected "' + params.type + '"';
          break;
        case _ErrorCode2.default.INCORRECT_PARENT_NODE:
          msg = 'Node of type "' + params.child + '" can be added only to "' + params.parent + '" node.';
          break;
        case _ErrorCode2.default.INCORRECT_LINK_TARGET:
          msg = 'Cannot create link connection to null node.';
          break;
        case _ErrorCode2.default.INCOMPATIBLE_CHILD:
          msg = 'Cannot add child of type "' + params.child + '" into parent of type "' + params.parent + '".';
          break;
        default:
          msg = 'Unknown error code passed: ' + errorCode;
      }
      if (editor) {
        editor.showMsg(msg);
      } else {
        throw new Error(msg);
        //add warning mode?
      }
    }
  };
};
module.exports = ErrorHandler;

},{"./ErrorCode":8}],10:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LinkNode = function () {

  var _type = new WeakMap();
  var _output = new WeakMap();
  var _input = new WeakMap();

  return function (_BaseNode) {
    _inherits(LinkNode, _BaseNode);

    function LinkNode(data, rpgs) {
      _classCallCheck(this, LinkNode);

      var _this = _possibleConstructorReturn(this, (LinkNode.__proto__ || Object.getPrototypeOf(LinkNode)).call(this, data, rpgs));

      _type.set(_this, data.type);
      _input.set(_this, data.input ? data.input : '');
      _output.set(_this, data.output ? data.output : '');
      return _this;
    }

    _createClass(LinkNode, [{
      key: 'getInp',
      value: function getInp() {
        return _input.get(this);
      }
    }, {
      key: 'getOut',
      value: function getOut() {
        return _output.get(this);
      }
    }, {
      key: 'getType',
      value: function getType() {
        return _type.get(this);
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(LinkNode.prototype.__proto__ || Object.getPrototypeOf(LinkNode.prototype), 'getData', this).call(this);
        data.type = this.getType();
        data.input = this.getInp();
        data.output = this.getOut();
        return data;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        var linkInp = this.getInp();
        var linkOut = this.getOut();
        var inpObj = this.getRPGS().findNode(linkInp);
        var outObj = this.getRPGS().findNode(linkOut);
        if (inpObj) inpObj.removeInputConnection(this.getType(), linkInp);
        if (outObj) outObj.removeOutputConnection(this.getType(), linkOut);
        _type.delete(this);
        _input.delete(this);
        _output.delete(this);
        _get(LinkNode.prototype.__proto__ || Object.getPrototypeOf(LinkNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return LinkNode;
  }(_BaseNode3.default);
}();
module.exports = LinkNode;

},{"../core/BaseNode":6}],11:[function(require,module,exports){
"use strict";

var REFERENCE = 'reference';
var VISIBILITY = 'visibility';
var ACTIVITY = 'activity';
var ACTION = 'action';
var GOTO = 'goto';
var DIALOG = 'dialog';

exports.REFERENCE = REFERENCE;
exports.VISIBILITY = VISIBILITY;
exports.ACTIVITY = ACTIVITY;
exports.ACTION = ACTION;
exports.GOTO = GOTO;
exports.DIALOG = DIALOG;

},{}],12:[function(require,module,exports){
"use strict";

/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/

var UUID = function () {
  var self = {};
  var lut = [];for (var i = 0; i < 256; i++) {
    lut[i] = (i < 16 ? '0' : '') + i.toString(16);
  }
  self.generate = function () {
    var d0 = Math.random() * 0xffffffff | 0;
    var d1 = Math.random() * 0xffffffff | 0;
    var d2 = Math.random() * 0xffffffff | 0;
    var d3 = Math.random() * 0xffffffff | 0;
    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
  };
  return self;
}();

exports.UUID = UUID;

var indexOfObject = function indexOfObject(array, obj) {
  for (var i = 0; i < array.length; i++) {
    if (array[i] === obj) return i;
  }
  return -1;
};

exports.indexOfObject = indexOfObject;

var getIndexById = function getIndexById(array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return i;
  }
  return -1;
};
exports.getIndexById = getIndexById;

exports.addObjectToArray = function (array, obj, expectedType) {
  if (expectedType !== undefined && expectedType !== null) {
    if (expectedType.isPrototypeOf(obj)) {
      throw new Error('Wrong type of object passed. Expected ' + expectedType.constructor.name + ' object.');
    }
  }
  if (indexOfObject(array, obj) === -1) {
    array.push(obj);
  }
  return array;
};

/*exports.removeObjectById = function(array,id) {
  let index = getIndexById(array,id);
  if(index !== -1) {
    let spliced = array.splice(index,1);
    if(spliced.dispose) spliced.dispose();
  }
  return array;
}*/

exports.removeObjectFromArray = function (array, obj) {
  var index = indexOfObject(array, obj);
  if (index !== -1) {
    var spliced = array.splice(index, 1);
    if (spliced.dispose) spliced.dispose();
  }
  return array;
};

},{}],13:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var AnswerNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _text = new WeakMap();

  return function (_BaseNode) {
    _inherits(AnswerNode, _BaseNode);

    function AnswerNode(data, rpgs) {
      _classCallCheck(this, AnswerNode);

      var _this = _possibleConstructorReturn(this, (AnswerNode.__proto__ || Object.getPrototypeOf(AnswerNode)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(AnswerNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(AnswerNode.prototype.__proto__ || Object.getPrototypeOf(AnswerNode.prototype), 'getData', this).call(this);
        data.text = this.getText();

        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'getTalk',
      value: function getTalk() {
        var talks = getOutputConnections(_LinkType2.default.GOTO);
        return talks ? talks[0] : null;
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return this.getOutputConnections(_LinkType2.default.GOTO).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _text.delete(this);
        _get(AnswerNode.prototype.__proto__ || Object.getPrototypeOf(AnswerNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return AnswerNode;
  }(_BaseNode3.default);
}();
module.exports = AnswerNode;

},{"../core/BaseNode":6,"../core/LinkType":11}],14:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TALKS = 'talks';

var DialogNode = function () {
  var _start = new WeakMap();

  return function (_CompoundNode) {
    _inherits(DialogNode, _CompoundNode);

    function DialogNode(data, rpgs) {
      _classCallCheck(this, DialogNode);

      var _this = _possibleConstructorReturn(this, (DialogNode.__proto__ || Object.getPrototypeOf(DialogNode)).call(this, data, rpgs));

      _start.set(_this, data.startTalk ? data.startTalk : '');
      return _this;
    }

    _createClass(DialogNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(DialogNode.prototype.__proto__ || Object.getPrototypeOf(DialogNode.prototype), 'getData', this).call(this);
        data.startTalk = this.getStartTalk();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'TalkNode';
      }
    }, {
      key: 'setStartTalk',
      value: function setStartTalk(talkId) {
        _start.set(this, talkId);
      }
    }, {
      key: 'getStartTalk',
      value: function getStartTalk() {
        return _start.get(this);
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TALKS);
        _start.delete(this);
        _get(DialogNode.prototype.__proto__ || Object.getPrototypeOf(DialogNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return DialogNode;
  }(_CompoundNode3.default);
}();
module.exports = DialogNode;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],15:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_ANSWERS = 'answers';

var TalkNode = function () {

  var _text = new WeakMap();

  return function (_CompoundNode) {
    _inherits(TalkNode, _CompoundNode);

    function TalkNode(data, rpgs) {
      _classCallCheck(this, TalkNode);

      var _this = _possibleConstructorReturn(this, (TalkNode.__proto__ || Object.getPrototypeOf(TalkNode)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(TalkNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(TalkNode.prototype.__proto__ || Object.getPrototypeOf(TalkNode.prototype), 'getData', this).call(this);
        data.text = this.getText();
        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'AnswerNode';
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_ANSWERS);
        _text.delete(this);
        _get(TalkNode.prototype.__proto__ || Object.getPrototypeOf(TalkNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return TalkNode;
  }(_CompoundNode3.default);
}();
module.exports = TalkNode;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],16:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _QuestStatus = require('./QuestStatus');

var _QuestStatus2 = _interopRequireDefault(_QuestStatus);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TASKS = 'tasks';

var QuestNode = function () {
  var _title = new WeakMap();
  var _description = new WeakMap();
  var _status = new WeakMap();

  return function (_CompoundNode) {
    _inherits(QuestNode, _CompoundNode);

    function QuestNode(data, rpgs) {
      _classCallCheck(this, QuestNode);

      var _this = _possibleConstructorReturn(this, (QuestNode.__proto__ || Object.getPrototypeOf(QuestNode)).call(this, data, rpgs));

      _title.set(_this, data.title ? data.title : '');
      _description.set(_this, data.description ? data.description : '');
      _status.set(_this, data.status ? data.status : _QuestStatus2.default.INCOMPLETE);
      return _this;
    }

    _createClass(QuestNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(QuestNode.prototype.__proto__ || Object.getPrototypeOf(QuestNode.prototype), 'getData', this).call(this);
        data.title = this.getTitle();
        data.description = this.getDescription();
        data.status = this.getStatus();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'Task';
      }
    }, {
      key: 'setTitle',
      value: function setTitle(value) {
        _title.set(this, value);
      }
    }, {
      key: 'getTitle',
      value: function getTitle() {
        return _title.get(this);
      }
    }, {
      key: 'setDescription',
      value: function setDescription(value) {
        _description.set(this, value);
      }
    }, {
      key: 'getDescription',
      value: function getDescription() {
        return _description.get(this);
      }
    }, {
      key: 'setStatus',
      value: function setStatus(value) {
        switch (value) {
          case _QuestStatus2.default.COMPLETED:
          case _QuestStatus2.default.FAILED:
            _status.set(this, value);
          case _QuestStatus2.default.INCOMPLETE:
          default:
            _status.set(this, _QuestStatus2.default.INCOMPLETE);
            break;
        };
      }
    }, {
      key: 'getStatus',
      value: function getStatus() {
        return _status.get(this);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TASKS);
        _title.delete(this);
        _description.delete(this);
        _status.delete(this);
      }
    }]);

    return QuestNode;
  }(_CompoundNode3.default);
}();
module.exports = QuestNode;

},{"../core/CompoundNode":7,"./QuestStatus":17}],17:[function(require,module,exports){
"use strict";

var INCOMPLETE = 'questIncomplete';
var COMPLETED = 'questCompleted';
var FAILED = 'questFailed';

exports.INCOMPLETE = INCOMPLETE;
exports.COMPLETED = COMPLETED;
exports.FAILED = FAILED;

},{}],18:[function(require,module,exports){
"use strict";

var _BaseNode2 = require("../core/BaseNode");

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TaskNode = function () {
  return function (_BaseNode) {
    _inherits(TaskNode, _BaseNode);

    function TaskNode(data) {
      _classCallCheck(this, TaskNode);

      return _possibleConstructorReturn(this, (TaskNode.__proto__ || Object.getPrototypeOf(TaskNode)).call(this, data));
    }

    //to do


    return TaskNode;
  }(_BaseNode3.default);
}();

module.exports = TaskNode;

},{"../core/BaseNode":6}],19:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _VariableType = require('./VariableType');

var _VariableType2 = _interopRequireDefault(_VariableType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VariableNode = function () {
  var _value = new WeakMap();
  var _type = new WeakMap();

  function _parseBoolean(val) {
    var isBool = (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.BOOLEAN;
    if (isBool) {
      return val;
    } else {
      switch (String(val).toLowerCase().trim()) {
        case "true":case "yes":case "1":
          return true;
        case "false":case "no":case "0":case null:
          return false;
        default:
          return Boolean(val);
      }
    }
  }

  function _parseString(val) {
    return (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.STRING ? val : String(val);
  }

  function _parseNumber(val) {
    return (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.NUMBER ? val : parseFloat(val);
  }

  function _parseValue(val, type) {
    switch (type) {
      case _VariableType2.default.BOOLEAN:
        return _parseBoolean(val);
      case _VariableType2.default.NUMBER:
        return _parseNumber(val);
      case _VariableType2.default.STRING:
      default:
        return _parseString(val);
    }
  }

  return function (_BaseNode) {
    _inherits(VariableNode, _BaseNode);

    function VariableNode(data, rpgs) {
      _classCallCheck(this, VariableNode);

      var _this = _possibleConstructorReturn(this, (VariableNode.__proto__ || Object.getPrototypeOf(VariableNode)).call(this, data, rpgs));

      _type.set(_this, data.hasOwnProperty('type') ? data.type : _VariableType2.default.STRING);
      _value.set(_this, data.hasOwnProperty('value') ? _parseValue(data.value, _type.get(_this)) : '');
      return _this;
    }

    _createClass(VariableNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(VariableNode.prototype.__proto__ || Object.getPrototypeOf(VariableNode.prototype), 'getData', this).call(this);
        data.type = this.getType();
        data.value = this.getValue();
        return data;
      }
    }, {
      key: 'setValue',
      value: function setValue(val) {
        _value.set(this, _parseValue(val, _type.get(this)));
      }
    }, {
      key: 'getValue',
      value: function getValue() {
        return _value.get(this);
      }
    }, {
      key: 'getType',
      value: function getType() {
        return _type.get(this);
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        return false;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case LinkType.REFERENCE:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _value.delete(this);
        _type.delete(this);
        _get(VariableNode.prototype.__proto__ || Object.getPrototypeOf(VariableNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return VariableNode;
  }(_BaseNode3.default);
}();

module.exports = VariableNode;

},{"../core/BaseNode":6,"./VariableType":20}],20:[function(require,module,exports){
'use strict';

var BOOLEAN = 'boolean';
var STRING = 'string';
var NUMBER = 'number';

exports.BOOLEAN = BOOLEAN;
exports.STRING = STRING;
exports.NUMBER = NUMBER;

},{}],21:[function(require,module,exports){
"use strict";

var _data = require('../data/data.json');

var _data2 = _interopRequireDefault(_data);

var _RPGSystem = require('./rpgs/RPGSystem');

var _RPGSystem2 = _interopRequireDefault(_RPGSystem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(function ($, window, document, undefined) {
  $(function () {
    var rpgs1 = new _RPGSystem2.default();
    rpgs1.addActor('act1', { name: 'Adam' }).inp('dialog', 'dlg1').addCondition('cond1', {
      code: 'console.log(rpgs.getVariable(\'s1\').getValue());'
    }).out('visibility', 'tlk0ans1').addDialog('dlg1', { startTalk: 'tlk0' }).out('dialog', 'act1').addTalk('tlk0', { text: 'This is talk 0.' }).addAnswer('tlk0ans1', { text: 'Answer1' }).out('goto', 'tlk1').inp('visibility', 'cond1').addAnswer('tlk0ans2', { text: 'Answer2' }).out('goto', 'tlk2').addAnswer('tlk0ans3', { text: 'Answer3' }).out('goto', 'tlk3').addTalk('tlk1', { text: 'This is talk 1.' }).inp('goto', 'tlk0ans1').addAnswer('tlk1ans1', { text: 'Answer1' }).addTalk('tlk2', { text: 'This is talk 2.' }).inp('goto', 'tlk0ans2').addAnswer('tlk2ans1', { text: 'Answer1' }).addTalk('tlk3', { text: 'This is talk 3.' }).inp('goto', 'tlk0ans3').addAnswer('tlk3ans1', { text: 'Answer1' }).addVariable('b1', { type: 'boolean', value: false }).addVariable('s1', { type: 'string', value: 'This is message from compiled code!' }).addVariable('n1', { type: 'number', value: 56 });
    var cond = rpgs1.getCondition('cond1');
    console.log(cond.check());
    var b1 = rpgs1.getVariable('b1');
    var s1 = rpgs1.getVariable('s1');
    var n1 = rpgs1.getVariable('n1');
    /*console.log('b1 value',b1.getValue(),b1.getType());
    console.log('s1 value',s1.getValue(),s1.getType());
    console.log('n1 value',n1.getValue(),n1.getType());*/

    var rpgs1Serialized = rpgs1.serializeData();
    console.log("rpgs1", rpgs1Serialized);

    var rpgs2 = new _RPGSystem2.default(JSON.parse(rpgs1Serialized));
    console.log("data created is equal to data parsed:", rpgs1Serialized === rpgs2.serializeData());
  });
})(jQuery, window, document);

},{"../data/data.json":2,"./rpgs/RPGSystem":3}]},{},[21])


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQHJpc2luZ3N0YWNrL254LWNvbXBpbGUvY29tcGlsZXIuanMiLCJzcmMvZGF0YS9kYXRhLmpzb24iLCJzcmMvanMvcnBncy9SUEdTeXN0ZW0uanMiLCJzcmMvanMvcnBncy9hY3RvcnMvQWN0b3JOb2RlLmpzIiwic3JjL2pzL3JwZ3MvY29uZGl0aW9ucy9Db25kaXRpb25Ob2RlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9CYXNlTm9kZS5qcyIsInNyYy9qcy9ycGdzL2NvcmUvQ29tcG91bmROb2RlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9FcnJvckNvZGUuanMiLCJzcmMvanMvcnBncy9jb3JlL0Vycm9ySGFuZGxlci5qcyIsInNyYy9qcy9ycGdzL2NvcmUvTGlua05vZGUuanMiLCJzcmMvanMvcnBncy9jb3JlL0xpbmtUeXBlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9VdGlscy5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvQW5zd2VyTm9kZS5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvRGlhbG9nTm9kZS5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvVGFsa05vZGUuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3ROb2RlLmpzIiwic3JjL2pzL3JwZ3MvcXVlc3RzL1F1ZXN0U3RhdHVzLmpzIiwic3JjL2pzL3JwZ3MvcXVlc3RzL1Rhc2tOb2RlLmpzIiwic3JjL2pzL3JwZ3MvdmFyaWFibGVzL1ZhcmlhYmxlTm9kZS5qcyIsInNyYy9qcy9ycGdzL3ZhcmlhYmxlcy9WYXJpYWJsZVR5cGUuanMiLCJzcmMvanMvc2NyaXB0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFUO0FBQ0EsUUFBSSxLQUFLLE1BQU0sV0FBTixDQUFrQixJQUFsQixDQUFUO0FBQ0EsUUFBSSxLQUFLLE1BQU0sV0FBTixDQUFrQixJQUFsQixDQUFUO0FBQ0E7Ozs7QUFJQSxRQUFJLGtCQUFrQixNQUFNLGFBQU4sRUFBdEI7QUFDQSxZQUFRLEdBQVIsQ0FBWSxPQUFaLEVBQW9CLGVBQXBCOztBQUVBLFFBQUksUUFBUSx3QkFBYyxLQUFLLEtBQUwsQ0FBVyxlQUFYLENBQWQsQ0FBWjtBQUNBLFlBQVEsR0FBUixDQUFZLHVDQUFaLEVBQW9ELG9CQUFvQixNQUFNLGFBQU4sRUFBeEU7QUFDRCxHQXZDRDtBQXlDRCxDQTFDRCxFQTBDRyxNQTFDSCxFQTBDVyxNQTFDWCxFQTBDbUIsUUExQ25CIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBpbGVDb2RlLFxuICBjb21waWxlRXhwcmVzc2lvbixcbiAgZXhwb3NlLFxuICBoaWRlXG59XG5cbmxldCBnbG9iYWxPYmpcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgZ2xvYmFsT2JqID0gd2luZG93IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbmVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSBnbG9iYWxPYmogPSBnbG9iYWwgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSBnbG9iYWxPYmogPSBzZWxmIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbmdsb2JhbE9iai4kbnhDb21waWxlVG9TYW5kYm94ID0gdG9TYW5kYm94XG5nbG9iYWxPYmouJG54Q29tcGlsZUNyZWF0ZUJhY2t1cCA9IGNyZWF0ZUJhY2t1cFxuXG5jb25zdCBwcm94aWVzID0gbmV3IFdlYWtNYXAoKVxuY29uc3QgZXhwcmVzc2lvbkNhY2hlID0gbmV3IE1hcCgpXG5jb25zdCBjb2RlQ2FjaGUgPSBuZXcgTWFwKClcbmNvbnN0IGdsb2JhbHMgPSBuZXcgU2V0KClcbmNvbnN0IGhhbmRsZXJzID0ge2hhc31cblxuZnVuY3Rpb24gY29tcGlsZUV4cHJlc3Npb24gKHNyYykge1xuICBpZiAodHlwZW9mIHNyYyAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJylcbiAgfVxuICBsZXQgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25DYWNoZS5nZXQoc3JjKVxuICBpZiAoIWV4cHJlc3Npb24pIHtcbiAgICBleHByZXNzaW9uID0gbmV3IEZ1bmN0aW9uKCdjb250ZXh0JywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgYGNvbnN0IHNhbmRib3ggPSAkbnhDb21waWxlVG9TYW5kYm94KGNvbnRleHQpXG4gICAgICB0cnkgeyB3aXRoIChzYW5kYm94KSB7IHJldHVybiAke3NyY30gfSB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgVHlwZUVycm9yKSkgdGhyb3cgZXJyXG4gICAgICB9YClcbiAgICBleHByZXNzaW9uQ2FjaGUuc2V0KHNyYywgZXhwcmVzc2lvbilcbiAgfVxuICByZXR1cm4gZXhwcmVzc2lvblxufVxuXG5mdW5jdGlvbiBjb21waWxlQ29kZSAoc3JjKSB7XG4gIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKVxuICB9XG4gIGxldCBjb2RlID0gY29kZUNhY2hlLmdldChzcmMpXG4gIGlmICghY29kZSkge1xuICAgIGNvZGUgPSBuZXcgRnVuY3Rpb24oJ2NvbnRleHQnLCAndGVtcFZhcnMnLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgYGNvbnN0IGJhY2t1cCA9ICRueENvbXBpbGVDcmVhdGVCYWNrdXAoY29udGV4dCwgdGVtcFZhcnMpXG4gICAgT2JqZWN0LmFzc2lnbihjb250ZXh0LCB0ZW1wVmFycylcbiAgICBjb25zdCBzYW5kYm94ID0gJG54Q29tcGlsZVRvU2FuZGJveChjb250ZXh0KVxuICAgIHRyeSB7XG4gICAgICB3aXRoIChzYW5kYm94KSB7ICR7c3JjfSB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIE9iamVjdC5hc3NpZ24oY29udGV4dCwgYmFja3VwKVxuICAgIH1gKVxuICAgIGNvZGVDYWNoZS5zZXQoc3JjLCBjb2RlKVxuICB9XG4gIHJldHVybiBjb2RlXG59XG5cbmZ1bmN0aW9uIGV4cG9zZSAoLi4uZ2xvYmFsTmFtZXMpIHtcbiAgZm9yIChsZXQgZ2xvYmFsTmFtZSBvZiBnbG9iYWxOYW1lcykge1xuICAgIGdsb2JhbHMuYWRkKGdsb2JhbE5hbWUpXG4gIH1cbn1cblxuZnVuY3Rpb24gaGlkZSAoLi4uZ2xvYmFsTmFtZXMpIHtcbiAgZm9yIChsZXQgZ2xvYmFsTmFtZSBvZiBnbG9iYWxOYW1lcykge1xuICAgIGdsb2JhbHMuZGVsZXRlKGdsb2JhbE5hbWUpXG4gIH1cbn1cblxuZnVuY3Rpb24gdG9TYW5kYm94IChvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKVxuICB9XG4gIGxldCBzYW5kYm94ID0gcHJveGllcy5nZXQob2JqKVxuICBpZiAoIXNhbmRib3gpIHtcbiAgICBzYW5kYm94ID0gbmV3IFByb3h5KG9iaiwgaGFuZGxlcnMpXG4gICAgcHJveGllcy5zZXQob2JqLCBzYW5kYm94KVxuICB9XG4gIHJldHVybiBzYW5kYm94XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhY2t1cCAoY29udGV4dCwgdGVtcFZhcnMpIHtcbiAgaWYgKHR5cGVvZiB0ZW1wVmFycyA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCBiYWNrdXAgPSB7fVxuICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyh0ZW1wVmFycykpIHtcbiAgICAgIGJhY2t1cFtrZXldID0gY29udGV4dFtrZXldXG4gICAgfVxuICAgIHJldHVybiBiYWNrdXBcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXMgKHRhcmdldCwga2V5KSB7XG4gIHJldHVybiBnbG9iYWxzLmhhcyhrZXkpID8gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpIDogdHJ1ZVxufVxuIiwibW9kdWxlLmV4cG9ydHM9e1xyXG4gICAgXCJhY3RvcnNcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJBY3Rvck5vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcImFjdDFcIixcclxuICAgICAgICBcImlucHV0XCI6IHtcclxuICAgICAgICAgICAgXCJkaWFsb2dcIjogW1wiNGZkN2VhNTYtOTRjMy00OTQ5LWJhNzEtZjlmNmVjYjdlZjllXCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm5hbWVcIjpcIkFkYW1cIlxyXG4gICAgfVxyXG4gICAgXSxcclxuICAgIFwiY29uZGl0aW9uc1wiOlsge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIkNvbmRpdGlvbk5vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcImNvbmQxXCIsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge1xyXG4gICAgICAgICAgICBcInZpc2liaWxpdHlcIjogW1wiYTA4NmE5Y2ItM2FhYS00Y2RiLWFiY2MtOTk1NWM1NDY3M2RiXCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcImxhYmVsXCI6XCJcIixcclxuICAgICAgICBcImNvZGVcIjpcIlxcbiAgICAgICAgKGZ1bmN0aW9uKCl7XFxuICAgICAgICAgIGFsZXJ0KFxcXCJDb25kaXRpb24gdGVzdCFcXFwiKTtcXG4gICAgICAgICAgLy9yZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0pKCk7XFxuICAgICAgXCJcclxuICAgIH1cclxuICAgIF0sXHJcbiAgICBcImRpYWxvZ3NcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJEaWFsb2dOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJkbGcxXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm91dHB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZGlhbG9nXCI6IFtcIjRmZDdlYTU2LTk0YzMtNDk0OS1iYTcxLWY5ZjZlY2I3ZWY5ZVwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJjaGlsZHJlblwiOltcInRsazBcIixcclxuICAgICAgICBcInRsazFcIixcclxuICAgICAgICBcInRsazJcIixcclxuICAgICAgICBcInRsazNcIl0sXHJcbiAgICAgICAgXCJzdGFydFRhbGtcIjpcInRsazBcIlxyXG4gICAgfVxyXG4gICAgXSxcclxuICAgIFwibGlua3NcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6IFwiTGlua05vZGVcIiwgXCJ1dWlkXCI6IFwiNGZkN2VhNTYtOTRjMy00OTQ5LWJhNzEtZjlmNmVjYjdlZjllXCIsIFwiaW5wdXRcIjogXCJhY3QxXCIsIFwib3V0cHV0XCI6IFwiZGxnMVwiLCBcInR5cGVcIjogXCJkaWFsb2dcIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjogXCJMaW5rTm9kZVwiLCBcInV1aWRcIjogXCJhMDg2YTljYi0zYWFhLTRjZGItYWJjYy05OTU1YzU0NjczZGJcIiwgXCJpbnB1dFwiOiBcInRsazBhbnMxXCIsIFwib3V0cHV0XCI6IFwiY29uZDFcIiwgXCJ0eXBlXCI6IFwidmlzaWJpbGl0eVwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOiBcIkxpbmtOb2RlXCIsIFwidXVpZFwiOiBcImU1MmVkNzdiLTUxNWItNGMxNS05ZDUwLWQ0M2ZjYTYzNWI0OFwiLCBcImlucHV0XCI6IFwidGxrMVwiLCBcIm91dHB1dFwiOiBcInRsazBhbnMxXCIsIFwidHlwZVwiOiBcImdvdG9cIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjogXCJMaW5rTm9kZVwiLCBcInV1aWRcIjogXCJjMDk5ODJiOC01ZjFmLTQ3YzUtYjA1ZC1lMmVjNTYxODcyMTZcIiwgXCJpbnB1dFwiOiBcInRsazJcIiwgXCJvdXRwdXRcIjogXCJ0bGswYW5zMlwiLCBcInR5cGVcIjogXCJnb3RvXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6IFwiTGlua05vZGVcIiwgXCJ1dWlkXCI6IFwiM2Q2NmY0ZjgtZGNkOC00ODZjLWJmOGQtNDMzNTMxZjEwOGIxXCIsIFwiaW5wdXRcIjogXCJ0bGszXCIsIFwib3V0cHV0XCI6IFwidGxrMGFuczNcIiwgXCJ0eXBlXCI6IFwiZ290b1wiXHJcbiAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJ0YWxrc1wiOlsge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIlRhbGtOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGswXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcImNoaWxkcmVuXCI6IFtcInRsazBhbnMxXCIsIFwidGxrMGFuczJcIiwgXCJ0bGswYW5zM1wiXSwgXCJ0ZXh0XCI6IFwiVGhpcyBpcyB0YWxrIDAuXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJUYWxrTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMVwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge1xyXG4gICAgICAgICAgICBcImdvdG9cIjogW1wiZTUyZWQ3N2ItNTE1Yi00YzE1LTlkNTAtZDQzZmNhNjM1YjQ4XCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcImNoaWxkcmVuXCI6W1widGxrMWFuczFcIl0sXHJcbiAgICAgICAgXCJ0ZXh0XCI6XCJUaGlzIGlzIHRhbGsgMS5cIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIlRhbGtOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGsyXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZ290b1wiOiBbXCJjMDk5ODJiOC01ZjFmLTQ3YzUtYjA1ZC1lMmVjNTYxODcyMTZcIl1cclxuICAgICAgICB9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwiY2hpbGRyZW5cIjpbXCJ0bGsyYW5zMVwiXSxcclxuICAgICAgICBcInRleHRcIjpcIlRoaXMgaXMgdGFsayAyLlwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiVGFsa05vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcInRsazNcIixcclxuICAgICAgICBcImlucHV0XCI6IHtcclxuICAgICAgICAgICAgXCJnb3RvXCI6IFtcIjNkNjZmNGY4LWRjZDgtNDg2Yy1iZjhkLTQzMzUzMWYxMDhiMVwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJjaGlsZHJlblwiOltcInRsazNhbnMxXCJdLFxyXG4gICAgICAgIFwidGV4dFwiOlwiVGhpcyBpcyB0YWxrIDMuXCJcclxuICAgIH1cclxuICAgIF0sXHJcbiAgICBcImFuc3dlcnNcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJBbnN3ZXJOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGswYW5zMVwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge1xyXG4gICAgICAgICAgICBcInZpc2liaWxpdHlcIjogW1wiYTA4NmE5Y2ItM2FhYS00Y2RiLWFiY2MtOTk1NWM1NDY3M2RiXCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm91dHB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZ290b1wiOiBbXCJlNTJlZDc3Yi01MTViLTRjMTUtOWQ1MC1kNDNmY2E2MzViNDhcIl1cclxuICAgICAgICB9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwidGV4dFwiOlwiQW5zd2VyMVwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMGFuczJcIixcclxuICAgICAgICBcImlucHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwib3V0cHV0XCI6IHtcclxuICAgICAgICAgICAgXCJnb3RvXCI6IFtcImMwOTk4MmI4LTVmMWYtNDdjNS1iMDVkLWUyZWM1NjE4NzIxNlwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJ0ZXh0XCI6XCJBbnN3ZXIyXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJBbnN3ZXJOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGswYW5zM1wiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge1xyXG4gICAgICAgICAgICBcImdvdG9cIjogW1wiM2Q2NmY0ZjgtZGNkOC00ODZjLWJmOGQtNDMzNTMxZjEwOGIxXCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcInRleHRcIjpcIkFuc3dlcjNcIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIkFuc3dlck5vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcInRsazFhbnMxXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm91dHB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcInRleHRcIjogXCJBbnN3ZXIxXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJBbnN3ZXJOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGsyYW5zMVwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJ0ZXh0XCI6IFwiQW5zd2VyMVwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrM2FuczFcIixcclxuICAgICAgICBcImlucHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwib3V0cHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwidGV4dFwiOiBcIkFuc3dlcjFcIlxyXG4gICAgfVxyXG4gICAgXVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgVXRpbHMgICAgICAgICAgICBmcm9tICcuL2NvcmUvVXRpbHMnO1xyXG5pbXBvcnQgRXJyb3JIYW5kbGVyICAgICBmcm9tICcuL2NvcmUvRXJyb3JIYW5kbGVyJ1xyXG5pbXBvcnQgRXJyb3JDb2RlICAgICAgICBmcm9tICcuL2NvcmUvRXJyb3JDb2RlJztcclxuaW1wb3J0IEJhc2VOb2RlICAgICAgICAgZnJvbSAnLi9jb3JlL0Jhc2VOb2RlJztcclxuaW1wb3J0IExpbmtOb2RlICAgICAgICAgZnJvbSAnLi9jb3JlL0xpbmtOb2RlJztcclxuaW1wb3J0IEFjdG9yTm9kZSAgICAgICAgZnJvbSAnLi9hY3RvcnMvQWN0b3JOb2RlJztcclxuLy9pbXBvcnQgSW52ZW50b3J5Tm9kZSAgZnJvbSAnLi9hY3RvcnMvSW52ZW5vdHJ5Tm9kZSc7XHJcbmltcG9ydCBDb25kaXRpb25Ob2RlICAgIGZyb20gJy4vY29uZGl0aW9ucy9Db25kaXRpb25Ob2RlJztcclxuaW1wb3J0IEFuc3dlck5vZGUgICAgICAgZnJvbSAnLi9kaWFsb2dzL0Fuc3dlck5vZGUnO1xyXG5pbXBvcnQgRGlhbG9nTm9kZSAgICAgICBmcm9tICcuL2RpYWxvZ3MvRGlhbG9nTm9kZSc7XHJcbmltcG9ydCBUYWxrTm9kZSAgICAgICAgIGZyb20gJy4vZGlhbG9ncy9UYWxrTm9kZSc7XHJcbmltcG9ydCBRdWVzdE5vZGUgICAgICAgIGZyb20gJy4vcXVlc3RzL1F1ZXN0Tm9kZSc7XHJcbmltcG9ydCBUYXNrTm9kZSAgICAgICAgIGZyb20gJy4vcXVlc3RzL1Rhc2tOb2RlJztcclxuaW1wb3J0IFZhcmlhYmxlTm9kZSAgICAgZnJvbSAnLi92YXJpYWJsZXMvVmFyaWFibGVOb2RlJztcclxuXHJcbmNvbnN0IEtFWV9BQ1RPUlMgPSAnYWN0b3JzJztcclxuY29uc3QgS0VZX0FOU1dFUlMgPSAnYW5zd2Vycyc7XHJcbmNvbnN0IEtFWV9DT05ESVRJT05TID0gJ2NvbmRpdGlvbnMnO1xyXG5jb25zdCBLRVlfRElBTE9HUyA9ICdkaWFsb2dzJztcclxuY29uc3QgS0VZX0xJTktTID0gJ2xpbmtzJztcclxuY29uc3QgS0VZX1NDUklQVFMgPSAnc2NyaXB0cyc7XHJcbmNvbnN0IEtFWV9UQUxLUyA9ICd0YWxrcyc7XHJcbmNvbnN0IEtFWV9UQVNLUyA9ICd0YXNrcyc7XHJcbmNvbnN0IEtFWV9RVUVTVFMgPSAncXVlc3RzJztcclxuY29uc3QgS0VZX1ZBUklBQkxFUyA9ICd2YXJpYWJsZXMnO1xyXG5cclxubGV0IFJQR1N5c3RlbSA9IGZ1bmN0aW9uIChkYXRhLGVkaXRvcikge1xyXG4gIGxldCBfb2JqZWN0UG9vbCA9IHt9LFxyXG4gIF9lZGl0b3IgPSBlZGl0b3J8fG51bGwsXHJcbiAgX2Vycm9ySGFuZGxlciA9IG5ldyBFcnJvckhhbmRsZXIoX2VkaXRvciksXHJcbiAgX2NvbnRleHQgPSBudWxsLFxyXG4gIF9sYXN0Q2hpbGQgPSBudWxsLFxyXG4gIF9wYXJlbnRIaXN0b3J5ID0gW10sXHJcbiAgX2hhbGZMaW5rcyA9IHtcclxuICAgIG91dDogW10sXHJcbiAgICBpbnA6IFtdXHJcbiAgfTtcclxuXHJcbiAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgX29iamVjdFBvb2xba2V5XSA9IGRhdGFba2V5XS5tYXAoKGQpID0+IF9ub2RlRmFjdG9yeShkLF9zZWxmKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfbm9kZUZhY3RvcnkoZGF0YSxycGdzKSB7XHJcbiAgICBsZXQgY2xhc3NOYW1lID0gZGF0YS5jbGFzcztcclxuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XHJcbiAgICAgIGNhc2UgJ0FjdG9yTm9kZSc6ICAgICByZXR1cm4gbmV3IEFjdG9yTm9kZShkYXRhLHJwZ3MpO1xyXG4gICAgICBjYXNlICdDb25kaXRpb25Ob2RlJzogcmV0dXJuIG5ldyBDb25kaXRpb25Ob2RlKGRhdGEscnBncyk7XHJcbiAgICAgIGNhc2UgJ0Fuc3dlck5vZGUnOiAgICByZXR1cm4gbmV3IEFuc3dlck5vZGUoZGF0YSxycGdzKTtcclxuICAgICAgY2FzZSAnRGlhbG9nTm9kZSc6ICAgIHJldHVybiBuZXcgRGlhbG9nTm9kZShkYXRhLHJwZ3MpO1xyXG4gICAgICBjYXNlICdUYWxrTm9kZSc6ICAgICAgcmV0dXJuIG5ldyBUYWxrTm9kZShkYXRhLHJwZ3MpO1xyXG4gICAgICBjYXNlICdRdWVzdE5vZGUnOiAgICAgcmV0dXJuIG5ldyBRdWVzdE5vZGUoZGF0YSxycGdzKTtcclxuICAgICAgY2FzZSAnVGFza05vZGUnOiAgICAgIHJldHVybiBuZXcgVGFza05vZGUoZGF0YSxycGdzKTtcclxuICAgICAgY2FzZSAnTGlua05vZGUnOiAgICAgIHJldHVybiBuZXcgTGlua05vZGUoZGF0YSxycGdzKTtcclxuICAgICAgY2FzZSAnVmFyaWFibGVOb2RlJzogIHJldHVybiBuZXcgVmFyaWFibGVOb2RlKGRhdGEscnBncyk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgX2Vycm9ySGFuZGxlci5zaG93TXNnKEVycm9yQ29kZS5DTEFTU19OT1RfREVGSU5FRCx7Y2xhc3M6Y2xhc3NOYW1lfSk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfZmluZE5vZGVJbkFycmF5KGFycmF5LGlkKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKGFycmF5W2ldLmdldElkKCkgPT09IGlkKSByZXR1cm4gYXJyYXlbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGxldCBfZmluZE5vZGUgPSBmdW5jdGlvbihvYmpJZCkge1xyXG4gICAgZm9yICh2YXIga2V5IGluIF9vYmplY3RQb29sKSB7XHJcbiAgICAgIGlmIChfb2JqZWN0UG9vbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IF9maW5kTm9kZUluQXJyYXkoX29iamVjdFBvb2xba2V5XSxvYmpJZCk7XHJcbiAgICAgICAgaWYob2JqICE9PSBudWxsKSByZXR1cm4gb2JqO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL0lzIGVycm9yIG1lc3NhZ2UgbmVjY2Vzc2FyeSBoZXJlPyBUbyBjb25zaWRlci5cclxuICAgIC8vX2Vycm9ySGFuZGxlci5zaG93TXNnKEVycm9yQ29kZS5PQkpFQ1RfTk9UX0ZPVU5ELHtpZDpvYmpJZH0pO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSxcclxuXG4gIF9nZXROb2RlID0gZnVuY3Rpb24oa2V5LG9iaklkKSB7XG4gICAgbGV0IG9iaiA9IF9maW5kTm9kZUluQXJyYXkoX29iamVjdFBvb2xba2V5XSxvYmpJZCk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBfYWRkTm9kZSA9IGZ1bmN0aW9uKGtleSxvYmopIHtcclxuICAgIGlmKCFfb2JqZWN0UG9vbFtrZXldKSBfb2JqZWN0UG9vbFtrZXldID0gW107XHJcbiAgICBfb2JqZWN0UG9vbFtrZXldLnB1c2gob2JqKTtcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlTm9kZSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gX29iamVjdFBvb2wpIHtcclxuICAgICAgaWYgKF9vYmplY3RQb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBpZih0aGlzLl9yZW1vdmVOb2RlQnlLZXkoa2V5LGlkKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlTm9kZUJ5S2V5ID0gZnVuY3Rpb24oa2V5LGlkKSB7XHJcbiAgICBsZXQgaW5kZXggPSBVdGlscy5nZXRJbmRleEJ5SWQoX29iamVjdFBvb2xba2V5XSxpZCk7XHJcbiAgICBsZXQgaXNOb2RlRm91bmQgPSBpbmRleCA+IC0xO1xyXG4gICAgaWYoaXNOb2RlRm91bmQpIHtcclxuICAgICAgbGV0IG5vZGUgPSBfb2JqZWN0UG9vbFtrZXldLnNwbGljZShpbmRleCwxKVswXTtcclxuICAgICAgbm9kZS5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXNOb2RlRm91bmQ7XHJcbiAgfSxcclxuXHJcbiAgX3NldENvbm5lY3Rpb24gPSBmdW5jdGlvbih0eXBlLG5vZGVJZDEsbm9kZUlkMikge1xyXG4gICAgaWYobm9kZUlkMSA9PT0gbm9kZUlkMikge1xyXG4gICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLkNPTk5FQ1RJT05fVE9fSVRTRUxGLHtub2RlOm5vZGVJZDF9KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUxID0gX2ZpbmROb2RlKG5vZGVJZDEpO1xyXG4gICAgbGV0IG5vZGUyID0gX2ZpbmROb2RlKG5vZGVJZDIpO1xyXG4gICAgaWYobm9kZTEgPT09IG51bGwgfHwgbm9kZTIgPT09IG51bGwpIHJldHVybjtcclxuICAgIGlmKG5vZGUxLmNhbkNyZWF0ZU91dHB1dENvbm5lY3Rpb24odHlwZSkgJiYgbm9kZTIuY2FuQ3JlYXRlSW5wdXRDb25uZWN0aW9uKHR5cGUpKSB7XHJcbiAgICAgIGxldCBsaW5rID0gbmV3IExpbmtOb2RlKHt0eXBlOnR5cGUsb3V0cHV0Om5vZGVJZDEsaW5wdXQ6bm9kZUlkMn0pO1xyXG4gICAgICBsZXQgbGlua0lkID0gbGluay5nZXRJZCgpO1xyXG4gICAgICBfYWRkTm9kZShLRVlfTElOS1MsbGluayk7XHJcbiAgICAgIG5vZGUxLnNldE91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpO1xyXG4gICAgICBub2RlMi5zZXRJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpO1xyXG4gICAgICByZXR1cm4gbGlua0lkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgX2Vycm9ySGFuZGxlci5zaG93TXNnKEVycm9yQ29kZS5JTVBST1BFUl9DT05ORUNUSU9OLHtcclxuICAgICAgICB0eXBlOnR5cGUsXHJcbiAgICAgICAgbm9kZTE6bm9kZUlkMSxcclxuICAgICAgICBub2RlMjpub2RlSWQyXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgX2dldENvbm5lY3Rpb24gPSBmdW5jdGlvbihsaW5rSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXROb2RlKEtFWV9MSU5LUyxsaW5rSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRDb25uZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIF9vYmplY3RQb29sW0tFWV9MSU5LU107XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZUNvbm5lY3Rpb24gPSBmdW5jdGlvbihsaW5rSWQpIHtcclxuICAgIHRoaXMuX3JlbW92ZU5vZGVCeUtleShLRVlfTElOS1MsbGlua0lkKTtcclxuICB9O1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy9NRVRIT0QgQ0hBSU5JTkdcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB1c2VkIHRvIGNoZWNrIHBhc3NlZCBwYXJhbWV0ZXJzIGFuZCBsYXRlciBtZXJnZSB0aGVtIGludG9cclxuICAgKiBzaW5nbGUgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWQgICAgICBNYW5kYXRvcnkgaWQgb2Ygbm9kZS5cclxuICAgKiBAcGFyYW0gIHtvYmplY3R9IHBhcmFtcyAgT3B0aW9uYWwgcGFyYW1ldGVycy5cclxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFBhcmFtZXRlcnMgbWVyZ2VkIGludG8gb2JqZWN0LlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIF9jaGVja0FuZE1lcmdlUGFyYW1zKFxyXG4gICAgICAgICAgICAgICAgaWQgPSBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLk1BTkRBVE9SWV9QQVJBTSx7cGFyYW06J2lkJ30pLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zKSB7XHJcbiAgICAgIGlmKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLklOQ09SUkVDVF9UWVBFLHt0eXBlOidzdHJpbmcnfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYocGFyYW1zICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBhcmFtcyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLklOQ09SUkVDVF9UWVBFLHt0eXBlOidvYmplY3QnfSk7XHJcbiAgICAgIH0gZWxzZSBpZihwYXJhbXMgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcGFyYW1zID0ge307XHJcbiAgICAgIH1cclxuICAgICAgcGFyYW1zLnV1aWQgPSBpZDtcclxuICAgICAgcmV0dXJuIHBhcmFtcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgbWV0aG9kIGhlbHBzIGluIHRoZSBjcmVhdGlvbiBvZiBub2Rlcy4gSXRzIGZvY3VzIG9uIHByb3BlclxyXG4gICAqIHBsYWNlbWVudCBvZiBub2RlcyBpbiB0cmVlLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWQgICAgICBNYW5kYXRvcnkgaWQgb2YgbmV3bHkgY3JlYXRlZCBub2RlLlxyXG4gICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zICBQYXJhbWV0ZXJzIG9mIGNyZWF0ZWQgbm9kZS5cclxuICAgKiBAcGFyYW0gIHtib29sZWFufSBhc0NoaWxkIERldGVybWluZXMgaWYgbm9kZSBzaG91bGQgYmUgYWRkZWQgYXMgY2hpbGRcclxuICAgKiBvZiBhbm90aGVyIG5vZGUgb3IgYXMgYW4gaW5kZXBlbmRlbnQgbm9kZS5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNsYXNzTmFtZSAgIE5hbWUgb2YgY2xhc3MgdGhhdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIG5vZGUuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzdG9yYWdlIE5hbWUgb2Ygbm9kZSBncm91cCBpbnNpZGUgd2hpY2ggbm9kZSB3aWxsIGJlIGFkZGVkLlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxhc0NoaWxkLGNsYXNzTmFtZSxzdG9yYWdlKSB7XHJcbiAgICAvL0ZpcnN0LCB3ZSBjaGVjayB0aGF0IGlkIGFuZCBwYXJhbXMgYXJlIHZhbGlkLlxyXG4gICAgcGFyYW1zID0gX2NoZWNrQW5kTWVyZ2VQYXJhbXMoaWQscGFyYW1zKTtcclxuICAgIC8vQ2xhc3MgbmFtZSBmb3IgbGF0ZXIgdXNhZ2UuXHJcbiAgICBwYXJhbXMuY2xhc3MgPSBjbGFzc05hbWU7XHJcblxyXG4gICAgLy9UZXN0IGlmIG5vZGUgc2hvdWxkIGJlIGFkZGVkIGFzIGNoaWxkIG9yIHBhcmVudC5cclxuICAgIGlmKGFzQ2hpbGQpIHtcclxuICAgICAgLy9JZiBsYXN0IGFkZGVkIGNoaWxkIHdhcyBub3QgbnVsbCB0aGVuIHdlIG11c3QgY2hlY2sgYWRkaXRpb25hbCBjb25kaXRpb25zLlxyXG4gICAgICBpZihfbGFzdENoaWxkICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy9JZiBjb25zdHJ1Y3RvciBuYW1lIG9mIHByZXZpb3VzIGNoaWxkIG5vZGUsIGlzIGVxdWFsIHRvIG5hbWUgb2YgY2xhc3MsXHJcbiAgICAgICAgLy93aG9zZSB3ZSB0cnkgdG8gY3JlYXRlLCBpdCBtZWFucyBub2RlIHNob3VsZCBiZSBhZGRlZCB0byBjdXJyZW50IHBhcmVudC5cclxuICAgICAgICBpZihfbGFzdENoaWxkLmNvbnN0cnVjdG9yLm5hbWUgPT09IGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgY3JlYXRlQ2hpbGROb2RlKHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vSWYgbmFtZXMgb2YgY29uc3RydWN0b3JzIG5vdCBtYXRjaCwgdGhlbiB3ZSBtdXN0IGNoZWNrIGlmIG5ldyBub2RlXHJcbiAgICAgICAgLy9jYW4gYmUgYWRkZWQgYXMgY2hpbGQgdG8gb3VyIHByZXZpb3VzIGNoaWxkLlxyXG4gICAgICAgIGVsc2UgaWYoX2xhc3RDaGlsZC5jYW5BZGRDaGlsZChjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICBfcGFyZW50SGlzdG9yeS51bnNoaWZ0KF9sYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgY3JlYXRlQ2hpbGROb2RlKHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vRmluYWxseSBpZiBwcmV2aW91cyBjb25kaXRpb25zIGFyZSBmYWxzZSB3ZSB0cnkgZ28gYmFjayB0byBwcmV2aW91c1xyXG4gICAgICAgIC8vcGFyZW50IG5vZGUuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBfbGFzdENoaWxkID0gX3BhcmVudEhpc3Rvcnkuc2hpZnQoKXx8bnVsbDtcclxuICAgICAgICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxhc0NoaWxkLGNsYXNzTmFtZSxzdG9yYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy9JZiBsYXN0IGNoaWxkIGlzIG51bGwsIHRoZW4gd2UgY2hlY2sgaWYgbm9kZSBjYW4gYmUgYWRkZWQgdG8gY3VycmVudFxyXG4gICAgICAvL3BhcmVudCBub2RlLlxyXG4gICAgICBlbHNlIGlmKF9wYXJlbnRIaXN0b3J5Lmxlbmd0aCA+IDAgJiYgX3BhcmVudEhpc3RvcnlbMF0uY2FuQWRkQ2hpbGQoY2xhc3NOYW1lKSkge1xyXG4gICAgICAgIGNyZWF0ZUNoaWxkTm9kZShwYXJhbXMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vSWYgbGFzdCBjaGlsZCBhbmQgbGFzdCBwYXJlbnQgaXMgZXF1YWwgdG8gbnVsbCwgdGhlbiBuZXcgY2hpbGQgbm9kZVxyXG4gICAgICAvL2NhbnQgYmUgYWRkZWQsIHNvIHdlIHRocm93IGVycm9yLlxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLklOQ09NUEFUSUJMRV9DSElMRCx7XHJcbiAgICAgICAgICBjaGlsZDpjbGFzc05hbWUsXHJcbiAgICAgICAgICBwYXJlbnQ6IF9wYXJlbnRIaXN0b3J5Lmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgID8gX3BhcmVudEhpc3RvcnlbMF0uY29uc3RydWN0b3IubmFtZVxyXG4gICAgICAgICAgICAgICAgOiAnbnVsbCdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy9JZiBub2RlIGlzIGFkZGVkIGFzIHBhcmVudCwgdGhlbiBsYXN0IGNoaWxkIGlzIHNldCB0byBudWxsXHJcbiAgICAgIC8vYW5kIHBhcmVudCBoaXN0b3J5IGlzIGNsZWFyZWQuXHJcbiAgICAgIF9sYXN0Q2hpbGQgPSBudWxsO1xyXG4gICAgICBfcGFyZW50SGlzdG9yeS5sZW5ndGggPSAwO1xyXG4gICAgICAvL0FmdGVyIHRoYXQsIG5ldyBub2RlIGlzIGNyZWF0ZWQuXHJcbiAgICAgIGxldCBub2RlID0gX25vZGVGYWN0b3J5KHBhcmFtcyxfc2VsZik7XHJcbiAgICAgIF9wYXJlbnRIaXN0b3J5ID0gW25vZGVdO1xyXG4gICAgICBfYWRkTm9kZShzdG9yYWdlLG5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoaWxkTm9kZShub2RlUGFyYW1zKSB7XHJcbiAgICAgIC8vV2UgY3JlYXRlIGEgbmV3IG5vZGUsIGFuZCB0aGVuIHNldCBhcyB0aGUgbGFzdCBjaGlsZC5cclxuICAgICAgX2xhc3RDaGlsZCA9IF9ub2RlRmFjdG9yeShub2RlUGFyYW1zLF9zZWxmKTtcclxuICAgICAgLy9UaGVuIHdlIGFkZCBvdXIgZnJlc2hseSBjcmVhdGVkIG5vZGUgdG8gaXRzIHBhcmVudC5cclxuICAgICAgX3BhcmVudEhpc3RvcnlbMF0uYWRkQ2hpbGQoX2xhc3RDaGlsZC5nZXRJZCgpKTtcclxuICAgICAgLy9GaW5hbGx5IG5ldyBub2RlIGlzIGFkZGVkIHRvIG1haW4gc3RvcmFnZSBvYmplY3QuXHJcbiAgICAgIF9hZGROb2RlKHN0b3JhZ2UsX2xhc3RDaGlsZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byByZW1vdmUgbm9kZXMgZnJvbSBvYmplY3QgcG9vbFxyXG4gICAqIGFuZCByZXNldCBjb250ZXh0IG9mIFwibWV0aG9kIGNoYWluaW5nXCIgYWxnb3JpdGhtLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWQgIElkIG9mIG5vZGUgdG8gYmUgcmVtb3ZlZC5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGtleSBOYW1lIG9mIG5vZGUgZ3JvdXAgd2hpY2ggY29udGFpbnMgbm9kZSB0byByZW1vdmUuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX2NoYWluTm9kZVJlbW92ZXIoaWQsa2V5KSB7XHJcbiAgICBfbGFzdENoaWxkID0gbnVsbDtcclxuICAgIF9wYXJlbnRIaXN0b3J5Lmxlbmd0aCA9IDA7XHJcbiAgICB0aGlzLl9yZW1vdmVOb2RlQnlLZXkoa2V5LGlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIGZvciBjcmVhdGluZyB0ZW1wb3JhcnkgbGlua3MgKGhhbGYgbGlua3MpXHJcbiAgICogb3IgY29tcGxldGUgTGluayBub2Rlcywgd2hlbiBpbnB1dCBhbmQgb3V0cHV0IGNvdW50ZXJwYXJ0cyBhcmUgcHJlc2VudC5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGUgICAgICBEZWZpbmVzIHR5cGUgb2YgY29ubmVjdGlvbi5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkICAgICAgICBJZCBvZiB0YXJnZXRlZCBub2RlIGludG8gd2hpY2ggY29ubmVjdGlvblxyXG4gICAqIHNob3VsZCBiZSBtYWRlLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gc3RhcnRTaWRlIERlZmluZXMgY3VycmVudCBzdGFydCBzaWRlIG9mIHRoZSBsaW5rLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZW5kU2lkZSAgIERlZmluZXMgY3VycmVudCBlbmQgc2lkZSBvZiB0aGUgbGluay5cclxuICAgKi9cclxuICBmdW5jdGlvbiBfY2hhaW5MaW5rQ3JlYXRvcih0eXBlLGlkLHN0YXJ0U2lkZSxlbmRTaWRlKSB7XHJcbiAgICBsZXQgb3Bwb3NpdGUgPSBudWxsO1xyXG4gICAgbGV0IG5vZGUgPSBudWxsO1xyXG4gICAgLy9GaXJzdCB3ZSBtdXN0IGNoZWNrIHdoZXRoZXIgb3VyIG1ldGhvZCBpcyBjYWxsZWQgb24gbm9kZS5cclxuICAgIGlmKF9sYXN0Q2hpbGQgIT09IG51bGwpIHtcclxuICAgICAgbm9kZSA9IF9sYXN0Q2hpbGQ7XHJcbiAgICB9IGVsc2UgaWYoX3BhcmVudEhpc3RvcnlbMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBub2RlID0gX3BhcmVudEhpc3RvcnlbMF07XHJcbiAgICB9XHJcbiAgICAvL0lmIG91ciBsYXN0IG5vZGUgaXMgbm90IG51bGwsIHdlIGNhbiBwcm9jZWVkIGZ1cnRoZXIuXHJcbiAgICBpZihub2RlICE9PSBudWxsKSB7XHJcbiAgICAgIC8vT3VyIG5leHQgdGFzayBpcyB0byBpdGVyYXRlIHRocm91Z2ggYW4gYXJyYXkgb2YgXCJoYWxmIGxpbmtzXCIuIFRoaXMgc3RlcFxyXG4gICAgICAvL2lzIG5lY2Vzc2FyeSB0byBmaW5kIG91dCB3aGV0aGVyIHdlIHNob3VsZCBjcmVhdGUgYW5vdGhlciBcImhhbGYgbGlua1wiXHJcbiAgICAgIC8vb3IgY29tcGxldGUgTGlua05vZGUuIFdlIGFyZSBsb29raW5nIGZvciB0aGUgb3Bwb3NpdGUgc2lkZSBvZiB0aGUgbGluay5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfaGFsZkxpbmtzW2VuZFNpZGVdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGxpbmsgPSBfaGFsZkxpbmtzW2VuZFNpZGVdW2ldO1xyXG4gICAgICAgIGlmKGxpbmsudHlwZSA9PT0gdHlwZSAmJiBsaW5rLmlkID09PSBub2RlLmdldElkKCkpe1xyXG4gICAgICAgICAgb3Bwb3NpdGUgPSBfaGFsZkxpbmtzW2VuZFNpZGVdLnNwbGljZShpLDEpWzBdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vSWYgb3Bwb3NpdGUgc2lkZSBpcyBub3QgYXZhaWxhYmxlLCBpdCBtZWFucyB3ZSBzaG91bGQgY3JlYXRlIFwiaGFsZiBsaW5rXCIuXHJcbiAgICAgIGlmKG9wcG9zaXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgX2hhbGZMaW5rc1tzdGFydFNpZGVdLnB1c2goe3R5cGUsaWR9KTtcclxuICAgICAgfVxyXG4gICAgICAvL090aGVyd2lzZSB3ZSBjcmVhdGUgTGlua05vZGUuXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIC8vTWV0aG9kIFwiX3NldENvbm5lY3Rpb25cIiBhbHdheXMgY3JlYXRlIGxpbmtzIGluIGRlZmluZWQgZGlyZWN0aW9uXHJcbiAgICAgICAgLy9zdGFydGluZyBmcm9tIGlucHV0IHNpZGUgdG8gb3V0cHV0IHNpZGUsIHNvIGlzIGl0IGltcG9ydGFudCB0b1xyXG4gICAgICAgIC8vcGFzcyBwYXJhbWV0ZXJzIGluIHByb3BlciBtYW5uZXIuXHJcbiAgICAgICAgaWYoc3RhcnRTaWRlID09PSAnaW5wJykge1xyXG4gICAgICAgICAgX3NldENvbm5lY3Rpb24odHlwZSxpZCxvcHBvc2l0ZS5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF9zZXRDb25uZWN0aW9uKHR5cGUsb3Bwb3NpdGUuaWQsaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9FbHNlIGlmIGEgbm9kZSBpcyBudWxsIHRoZW4gaXQgbWVhbnMgdGhhdCBtZXRob2Qgd2FzIGNhbGxlZCBvblxyXG4gICAgLy9hbiBpbmNvcnJlY3QgdGFyZ2V0LlxyXG4gICAgZWxzZSB7XHJcbiAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT1JSRUNUX0xJTktfVEFSR0VUKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCBfYWRkQWN0b3IgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnQWN0b3JOb2RlJyxLRVlfQUNUT1JTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVBY3RvciA9IGZ1bmN0aW9uKGFjdG9ySWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGFjdG9ySWQsS0VZX0FDVE9SUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfYWRkUXVlc3QgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnUXVlc3ROb2RlJyxLRVlfUVVFU1RTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVRdWVzdCA9IGZ1bmN0aW9uKHF1ZXN0SWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKHF1ZXN0SWQsS0VZX1FVRVNUUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfYWRkRGlhbG9nID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsZmFsc2UsJ0RpYWxvZ05vZGUnLEtFWV9ESUFMT0dTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVEaWFsb2cgPSBmdW5jdGlvbihkaWFsb2dJZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoZGlhbG9nSWQsS0VZX0RJQUxPR1MpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2FkZENvbmRpdGlvbiA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGZhbHNlLCdDb25kaXRpb25Ob2RlJyxLRVlfQ09ORElUSU9OUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlQ29uZGl0aW9uID0gZnVuY3Rpb24oY29uZGl0aW9uSWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGNvbmRpdGlvbklkLEtFWV9DT05ESVRJT05TKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRWYXJpYWJsZSA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGZhbHNlLCdWYXJpYWJsZU5vZGUnLEtFWV9WQVJJQUJMRVMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZVZhcmlhYmxlID0gZnVuY3Rpb24odmFyaWFibGVJZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIodmFyaWFibGVJZCxLRVlfVkFSSUFCTEVTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRUYWxrID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsdHJ1ZSwnVGFsa05vZGUnLEtFWV9UQUxLUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlVGFsayA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICBfY2hhaW5Ob2RlUmVtb3ZlcihpZCxLRVlfVEFMS1MpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2FkZEFuc3dlciA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLHRydWUsJ0Fuc3dlck5vZGUnLEtFWV9BTlNXRVJTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVBbnN3ZXIgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoaWQsS0VZX0FOU1dFUlMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2lucCA9IGZ1bmN0aW9uKHR5cGUsaWQpIHtcclxuICAgIF9jaGFpbkxpbmtDcmVhdG9yKHR5cGUsaWQsJ2lucCcsJ291dCcpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX291dCA9IGZ1bmN0aW9uKHR5cGUsaWQpIHtcclxuICAgIF9jaGFpbkxpbmtDcmVhdG9yKHR5cGUsaWQsJ291dCcsJ2lucCcpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vR0VUVEVSU1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBfZ2V0QWN0b3IgPSBmdW5jdGlvbihhY3RvcklkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZShLRVlfQUNUT1JTLGFjdG9ySWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRBY3RvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfQUNUT1JTXTtcclxuICB9LFxyXG5cclxuICBfZ2V0Q29uZGl0aW9uID0gZnVuY3Rpb24oY29uZGl0aW9uSWQpIHtcclxuICAgIHJldHVybiBfZ2V0Tm9kZShLRVlfQ09ORElUSU9OUyxjb25kaXRpb25JZCk7XHJcbiAgfSxcclxuXHJcbiAgX2dldENvbmRpdGlvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfQ09ORElUSU9OU107XHJcbiAgfSxcclxuXHJcbiAgX2dldERpYWxvZyA9IGZ1bmN0aW9uKGRpYWxvZ0lkKSB7XHJcbiAgICByZXR1cm4gX2dldE5vZGUoS0VZX0RJQUxPR1MsZGlhbG9nSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXREaWFsb2dzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX29iamVjdFBvb2xbS0VZX0RJQUxPR1NdO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRRdWVzdCA9IGZ1bmN0aW9uKHF1ZXN0SWQpIHtcclxuICAgIHJldHVybiBfZ2V0Tm9kZShLRVlfUVVFU1RTLHF1ZXN0SWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRRdWVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfUVVFU1RTXTtcclxuICB9LFxyXG5cclxuICBfZ2V0VmFyaWFibGUgPSBmdW5jdGlvbih2YXJpYWJsZUlkKSB7XHJcbiAgICByZXR1cm4gX2dldE5vZGUoS0VZX1ZBUklBQkxFUyx2YXJpYWJsZUlkKTtcclxuICB9LFxyXG5cclxuICBfZ2V0VmFyaWFibGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX29iamVjdFBvb2xbS0VZX1ZBUklBQkxFU107XHJcbiAgfSxcclxuXHJcbiAgX3NlcmlhbGl6ZURhdGEgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBkYXRhID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gX29iamVjdFBvb2wpIHtcclxuICAgICAgaWYgKF9vYmplY3RQb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBkYXRhW2tleV0gPSBfb2JqZWN0UG9vbFtrZXldLm1hcCgob2JqKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gb2JqLmdldERhdGEgPyBvYmouZ2V0RGF0YSgpIDogb2JqO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IF9zZWxmID0ge1xyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2VuZXJhbCBub2RlIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmaW5kTm9kZTogICAgICAgICBfZmluZE5vZGUsXHJcbiAgICBnZXROb2RlOiAgICAgICAgICBfZ2V0Tm9kZSxcclxuICAgIGFkZE5vZGU6ICAgICAgICAgIF9hZGROb2RlLFxyXG4gICAgcmVtb3ZlTm9kZTogICAgICAgX3JlbW92ZU5vZGUsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vTGluayBjcmVhdGlvbiBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2V0Q29ubmVjdGlvbjogICAgX3NldENvbm5lY3Rpb24sXHJcbiAgICBnZXRDb25uZWN0aW9uOiAgICBfZ2V0Q29ubmVjdGlvbixcclxuICAgIGdldENvbm5lY3Rpb25zOiAgIF9nZXRDb25uZWN0aW9ucyxcclxuICAgIHJlbW92ZUNvbm5lY3Rpb246IF9yZW1vdmVDb25uZWN0aW9uLFxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvL0NoYWluYWJsZSBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgYWRkQWN0b3I6ICAgICAgICBfYWRkQWN0b3IsXHJcbiAgICByZW1vdmVBY3RvcjogICAgIF9yZW1vdmVBY3RvcixcclxuICAgIGFkZFF1ZXN0OiAgICAgICAgX2FkZFF1ZXN0LFxyXG4gICAgcmVtb3ZlUXVlc3Q6ICAgICBfcmVtb3ZlUXVlc3QsXHJcbiAgICBhZGREaWFsb2c6ICAgICAgIF9hZGREaWFsb2csXHJcbiAgICByZW1vdmVEaWFsb2c6ICAgIF9yZW1vdmVEaWFsb2csXHJcbiAgICBhZGRDb25kaXRpb246ICAgIF9hZGRDb25kaXRpb24sXHJcbiAgICByZW1vdmVDb25kaXRpb246IF9yZW1vdmVDb25kaXRpb24sXHJcbiAgICBhZGRWYXJpYWJsZTogICAgIF9hZGRWYXJpYWJsZSxcclxuICAgIHJlbW92ZVZhcmlhYmxlOiAgX3JlbW92ZVZhcmlhYmxlLFxyXG4gICAgYWRkVGFsazogICAgICAgICBfYWRkVGFsayxcclxuICAgIHJlbW92ZVRhbGs6ICAgICAgX3JlbW92ZVRhbGssXHJcbiAgICBhZGRBbnN3ZXI6ICAgICAgIF9hZGRBbnN3ZXIsXHJcbiAgICByZW1vdmVBbnN3ZXI6ICAgIF9yZW1vdmVBbnN3ZXIsXHJcbiAgICBpbnA6ICAgICAgICAgICAgIF9pbnAsXHJcbiAgICBvdXQ6ICAgICAgICAgICAgIF9vdXQsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2V0dGVyIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBnZXRBY3RvcjogICAgICAgIF9nZXRBY3RvcixcclxuICAgIGdldEFjdG9yczogICAgICAgX2dldEFjdG9ycyxcclxuICAgIGdldENvbmRpdGlvbjogICAgX2dldENvbmRpdGlvbixcclxuICAgIGdldENvbmRpdGlvbnM6ICAgX2dldENvbmRpdGlvbnMsXHJcbiAgICBnZXREaWFsb2c6ICAgICAgIF9nZXREaWFsb2csXHJcbiAgICBnZXREaWFsb2dzOiAgICAgIF9nZXREaWFsb2dzLFxyXG4gICAgZ2V0UXVlc3Q6ICAgICAgICBfZ2V0UXVlc3QsXHJcbiAgICBnZXRRdWVzdHM6ICAgICAgIF9nZXRRdWVzdHMsXHJcbiAgICBnZXRWYXJpYWJsZTogICAgIF9nZXRWYXJpYWJsZSxcclxuICAgIGdldFZhcmlhYmxlczogICAgX2dldFZhcmlhYmxlcyxcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy9NaXNjYWxpbmV1cyBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2VyaWFsaXplRGF0YTogICAgX3NlcmlhbGl6ZURhdGFcclxuICB9O1xyXG4gIHJldHVybiBfc2VsZjtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBSUEdTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5cclxubGV0IEFjdG9yTm9kZSA9IChmdW5jdGlvbigpIHtcclxuICAvL1dlYWsgbWFwcyBhcmUgbmV3IGZlYXR1cmUgdG8gSmF2YVNjcmlwdC4gV2UgY2FuIHN0b3JlIHByaXZhdGVcclxuICAvL29iamVjdCBwcm9wZXJ0aWVzIGluIGtleS92YWx1ZSBwYWlycyB1c2luZyBvdXIgaW5zdGFuY2UgYXMgdGhlIGtleSxcclxuICAvL2FuZCBvdXIgY2xhc3MgY2FuIGNhcHR1cmUgdGhvc2Uga2V5L3ZhbHVlIG1hcHMgaW4gYSBjbG9zdXJlLlxyXG4gIGxldCBfbmFtZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9kaWFsb2cgPSBuZXcgV2Vha01hcCgpO1xyXG4gIC8vbGV0IF9pbnZlbnRvcnkgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuXHJcbiAgcmV0dXJuIGNsYXNzIEFjdG9yTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgIF9uYW1lLnNldCh0aGlzLGRhdGEgPyBkYXRhLm5hbWUgOiAnJyk7XHJcbiAgICAgIF9kaWFsb2cuc2V0KHRoaXMsZGF0YSA/IGRhdGEuZGlhbG9nIDogJycpO1xyXG4gICAgICAvL19pbnZlbnRvcnkuc2V0KHRoaXMsZGF0YS5pbnZlbnRvcnkgPyApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLm5hbWUgPSB0aGlzLmdldE5hbWUoKTtcclxuICAgICAgZGF0YS5kaWFsb2cgPSB0aGlzLmdldERpYWxvZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROYW1lKHZhbHVlKSB7XHJcbiAgICAgIF9uYW1lLnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICByZXR1cm4gX25hbWUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpYWxvZygpIHtcclxuICAgICAgcmV0dXJuIF9kaWFsb2cuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qZ2V0SW52ZW50b3J5KCkge1xyXG4gICAgICByZXR1cm4gX2ludmVudG9yeS5nZXQodGhpcyk7XHJcbiAgICB9Ki9cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkRJQUxPRzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuRElBTE9HKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIF9uYW1lLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2RpYWxvZy5kZWxldGUodGhpcyk7XHJcbiAgICAgIC8vX2ludmVudG9yeS5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBY3Rvck5vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IEJhc2VOb2RlICAgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5pbXBvcnQgY29tcGlsZXIgICBmcm9tICdAcmlzaW5nc3RhY2svbngtY29tcGlsZSc7XHJcblxyXG5sZXQgQ29uZGl0aW9uTm9kZSA9IChmdW5jdGlvbigpe1xyXG4gIGxldCBfbGFiZWwgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfY29kZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9jb21waWxlZCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9zYW5kYm94ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIENvbmRpdGlvbk5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX2xhYmVsLnNldCh0aGlzLGRhdGEubGFiZWwgPyBkYXRhLmxhYmVsIDogJycpO1xyXG4gICAgICBfY29kZS5zZXQodGhpcyxkYXRhLmNvZGUgPyBkYXRhLmNvZGUgOiBgKGZ1bmN0aW9uKCl7cmV0dXJuIHRydWU7fSkoKTtgKTtcclxuICAgICAgY29tcGlsZXIuZXhwb3NlKCdjb25zb2xlJyk7XHJcbiAgICAgIF9jb21waWxlZC5zZXQodGhpcyxjb21waWxlci5jb21waWxlRXhwcmVzc2lvbihfY29kZS5nZXQodGhpcykpKTtcclxuICAgICAgLy9fc2FuZGJveC5zZXQodGhpcyxjb21waWxlci50b1NhbmRib3gocnBncykpO1xyXG4gICAgICAvL2NvbXBpbGVyLmV4cG9zZSgnY29uc29sZScsICdNYXRoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGFiZWwodGV4dCkge1xyXG4gICAgICBfbGFiZWwuc2V0KHRoaXMsdGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFiZWwoKSB7XHJcbiAgICAgIHJldHVybiBfbGFiZWwuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENvZGUoY29kZSkge1xyXG4gICAgICBfY29kZS5zZXQodGhpcyxjb2RlKTtcclxuICAgICAgX2NvbXBpbGVkLnNldCh0aGlzLGNvbXBpbGVyLmNvbXBpbGVFeHByZXNzaW9uKF9jb2RlLmdldCh0aGlzKSwgX3NhbmRib3guZ2V0KHRoaXMpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29kZSgpIHtcclxuICAgICAgcmV0dXJuIF9jb2RlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVjaygpIHtcclxuICAgICAgcmV0dXJuIF9jb21waWxlZC5nZXQodGhpcykoe3JwZ3M6dGhpcy5nZXRSUEdTKCl9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5sYWJlbCA9IHRoaXMuZ2V0TGFiZWwoKTtcclxuICAgICAgZGF0YS5jb2RlID0gdGhpcy5nZXRDb2RlKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZU91dHB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLlZJU0lCSUxJVFk6XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5BQ1RJVklUWTpcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcbiAgICBnZXRJbnB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgX2xhYmVsLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2NvZGUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfc2FuZGJveC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9jb21waWxlZC5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBDb25kaXRpb25Ob2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IHtVVUlEfSAgIGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgTGlua1R5cGUgZnJvbSAnLi9MaW5rVHlwZSc7XHJcblxyXG5jb25zdCBLRVlfTElOS1MgPSAnbGlua3MnO1xyXG5jb25zdCBLRVlfQ09ORElUSU9OUyA9ICdjb25kaXRpb25zJztcclxuXHJcbmxldCBCYXNlTm9kZSA9IChmdW5jdGlvbigpe1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF9ycGdzID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3V1aWQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfaW5wdXQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfb3V0cHV0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBfcnBncy5zZXQodGhpcyxycGdzKTtcclxuICAgICAgLy9JZiB1dWlkIG5vdCBwcmVzZW50LCB0aGVuIGJ5IGRlZmF1bHQgd2UgYXNzaWduIFVuaXZlcnNhbGx5IFVuaXF1ZSBJRC5cclxuICAgICAgX3V1aWQuc2V0KHRoaXMsZGF0YS51dWlkID8gZGF0YS51dWlkIDogVVVJRC5nZW5lcmF0ZSgpKTtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLGRhdGEuaW5wdXQgPyBkYXRhLmlucHV0IDoge30pO1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLGRhdGEub3V0cHV0ID8gZGF0YS5vdXRwdXQgOiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UlBHUygpIHtcclxuICAgICAgcmV0dXJuIF9ycGdzLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJZCh2YWx1ZSkge1xyXG4gICAgICBfdXVpZC5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWQoKSB7XHJcbiAgICAgIHJldHVybiBfdXVpZC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tDb25kaXRpb24oY29uZGl0aW9uSWQpIHtcclxuICAgICAgbGV0IGNvbmRpdGlvbiA9IHRoaXMuZ2V0UlBHUygpLmdldE5vZGUoS0VZX0NPTkRJVElPTlMsY29uZGl0aW9uSWQpO1xyXG4gICAgICByZXR1cm4gY29uZGl0aW9uID8gY29uZGl0aW9uLmNoZWNrKCkgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBib29sZWFuIHRoYXQgcmVmbGVjdHMgdmlzaWJsaWxpdHkgc3RhdGUgb2Ygbm9kZS5cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFZpc2liaWxpdHkgc3RhdGVcclxuICAgICAqL1xyXG4gICAgaXNWaXNpYmxlKCkge1xyXG4gICAgICBsZXQgY29uZGl0aW9ucyA9IGdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuVklTSUJJTElUWSk7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb25zID8gdGhpcy5jaGVja0NvbmRpdGlvbihjb25kaXRpb25zWzBdKSA6IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGJvb2xlYW4gdGhhdCByZWZsZWN0cyBhY3Rpdml0eSBzdGF0ZSBvZiBub2RlLlxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gQWN0aXZlIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGlzQWN0aXZlKCkge1xyXG4gICAgICBsZXQgY29uZGl0aW9ucyA9IGdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuQUNUSVZJVFkpO1xyXG4gICAgICByZXR1cm4gY29uZGl0aW9ucyA/IHRoaXMuY2hlY2tDb25kaXRpb24oY29uZGl0aW9uc1swXSkgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgY2xhc3M6dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxyXG4gICAgICAgIHV1aWQ6dGhpcy5nZXRJZCgpLFxyXG4gICAgICAgIGlucHV0OnRoaXMuZ2V0SW5wdXRDb25uZWN0aW9ucygpLFxyXG4gICAgICAgIG91dHB1dDp0aGlzLmdldE91dHB1dENvbm5lY3Rpb25zKClcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BZGRDaGlsZCh0eXBlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDaGlsZChjaGlsZElkKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUNoaWxkKGluZGV4KSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkKGluZGV4KSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkcmVuKCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUNoaWxkcmVuKGtleSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0Q29ubmVjdGlvbihvYmosdHlwZSxsaW5rSWQpIHtcclxuICAgICAgaWYoIW9iai5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgICAgIG9ialt0eXBlXSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIG9ialt0eXBlXS5wdXNoKGxpbmtJZCk7XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLHRoaXMuX3NldENvbm5lY3Rpb24oX291dHB1dC5nZXQodGhpcyksdHlwZSxsaW5rSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLHRoaXMuX3NldENvbm5lY3Rpb24oX2lucHV0LmdldCh0aGlzKSx0eXBlLGxpbmtJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRDb25uZWN0aW9ucyhvYmosdHlwZSkge1xyXG4gICAgICBpZih0eXBlKSByZXR1cm4gIW9iai5oYXNPd25Qcm9wZXJ0eSh0eXBlKSA/IFtdIDogb2JqW3R5cGVdO1xyXG4gICAgICBlbHNlIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3V0cHV0Q29ubmVjdGlvbnModHlwZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q29ubmVjdGlvbnMoX291dHB1dC5nZXQodGhpcyksdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5wdXRDb25uZWN0aW9ucyh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9nZXRDb25uZWN0aW9ucyhfaW5wdXQuZ2V0KHRoaXMpLHR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVDb25uZWN0aW9uKG9iaix0eXBlLGxpbmtJZCkge1xyXG4gICAgICBpZihvYmouaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgICAgICBvYmpbdHlwZV0gPSBVdGlscy5yZW1vdmVPYmplY3RGcm9tQXJyYXkob2JqW3R5cGVdLGxpbmtJZCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIF9vdXRwdXQuc2V0KHRoaXMsdGhpcy5fcmVtb3ZlQ29ubmVjdGlvbihfb3V0cHV0LmdldCh0aGlzKSx0eXBlLGxpbmtJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUlucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge1xyXG4gICAgICBfaW5wdXQuc2V0KHRoaXMsdGhpcy5fcmVtb3ZlQ29ubmVjdGlvbihfaW5wdXQuZ2V0KHRoaXMpLHR5cGUsbGlua0lkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2hpbGRyZW5Gcm9tKG9iaixrZXkpIHtcclxuICAgICAgb2JqLmZpbHRlcigoY2hpbGRJZCwgaW5kZXgsIGFycikgPT4ge1xyXG4gICAgICAgIHRoaXMuZ2V0UlBHUygpLnJlbW92ZU5vZGUoa2V5LGNoaWxkSWQpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlTGlua3NGcm9tKG9iaikge1xyXG4gICAgICBmb3IgKHZhciB0eXBlIGluIG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgICAgICAgIHJlbW92ZUNoaWxkcmVuRnJvbShvYmpbdHlwZV0sS0VZX0xJTktTKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVMaW5rc0Zyb20oX291dHB1dC5nZXQodGhpcykpO1xyXG4gICAgICB0aGlzLl9yZW1vdmVMaW5rc0Zyb20oX2lucHV0LmdldCh0aGlzKSk7XHJcbiAgICAgIF9ycGdzLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX3V1aWQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfaW5wdXQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfb3V0cHV0LmRlbGV0ZSh0aGlzKTtcclxuICAgIH1cclxuICB9O1xyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VOb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5pbXBvcnQgVXRpbHMgICAgZnJvbSAnLi4vY29yZS9VdGlscyc7XHJcblxyXG5sZXQgQ29tcG91bmROb2RlID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBfY2hpbGRyZW4gPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQ29tcG91bmROb2RlIGV4dGVuZHMgQmFzZU5vZGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfY2hpbGRyZW4uc2V0KHRoaXMsZGF0YS5jaGlsZHJlbiA/IGRhdGEuY2hpbGRyZW4gOiBbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEuY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENoaWxkKGNoaWxkSWQpIHtcclxuICAgICAgbGV0IGNoaWxkcmVuID0gX2NoaWxkcmVuLmdldCh0aGlzKTtcclxuICAgICAgX2NoaWxkcmVuLnNldCh0aGlzLFV0aWxzLmFkZE9iamVjdFRvQXJyYXkoY2hpbGRyZW4sY2hpbGRJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUNoaWxkKGluZGV4KSB7XHJcbiAgICAgIGxldCBjaGlsZHJlbiA9IF9jaGlsZHJlbi5nZXQodGhpcyk7XHJcbiAgICAgIF9jaGlsZHJlbi5zZXQodGhpcyxjaGlsZHJlbi5zcGxpY2UoaW5kZXgsMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkKGluZGV4KSB7XHJcbiAgICAgIGxldCBjaGlsZHJlbiA9IF9jaGlsZHJlbi5nZXQodGhpcyk7XHJcbiAgICAgIHJldHVybiBjaGlsZHJlbi5sZW5ndGggPiBpbmRleCA/IGNoaWxkcmVuW2luZGV4XSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGRyZW4oKSB7XHJcbiAgICAgIHJldHVybiBfY2hpbGRyZW4uZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVDaGlsZHJlbihrZXkpIHtcclxuICAgICAgdGhpcy5yZW1vdmVDaGlsZHJlbkZyb20oX2NoaWxkcmVuLmdldCh0aGlzKSxrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIF9jaGlsZHJlbi5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBvdW5kTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBOT0RFX05PVF9FWElTVFMgPSAwO1xyXG5jb25zdCBDTEFTU19OT1RfREVGSU5FRCA9IDE7XHJcbmNvbnN0IENPTk5FQ1RJT05fVE9fSVRTRUxGID0gMjtcclxuY29uc3QgSU1QUk9QRVJfQ09OTkVDVElPTiA9IDM7XHJcbmNvbnN0IE9CSkVDVF9OT1RfRk9VTkQgPSA0O1xyXG5jb25zdCBNQU5EQVRPUllfUEFSQU0gPSA1O1xyXG5jb25zdCBJTkNPUlJFQ1RfVFlQRSA9IDY7XHJcbmNvbnN0IElOQ09SUkVDVF9QQVJFTlRfTk9ERSA9IDc7XHJcbmNvbnN0IElOQ09SUkVDVF9MSU5LX1RBUkdFVCA9IDg7XHJcbmNvbnN0IElOQ09NUEFUSUJMRV9DSElMRCA9IDk7XHJcblxyXG5leHBvcnRzLk5PREVfTk9UX0VYSVNUUyA9IE5PREVfTk9UX0VYSVNUUztcclxuZXhwb3J0cy5DTEFTU19OT1RfREVGSU5FRCA9IENMQVNTX05PVF9ERUZJTkVEO1xyXG5leHBvcnRzLkNPTk5FQ1RJT05fVE9fSVRTRUxGID0gQ09OTkVDVElPTl9UT19JVFNFTEY7XHJcbmV4cG9ydHMuSU1QUk9QRVJfQ09OTkVDVElPTiA9IElNUFJPUEVSX0NPTk5FQ1RJT047XHJcbmV4cG9ydHMuT0JKRUNUX05PVF9GT1VORCA9IE9CSkVDVF9OT1RfRk9VTkQ7XHJcbmV4cG9ydHMuTUFOREFUT1JZX1BBUkFNID0gTUFOREFUT1JZX1BBUkFNO1xyXG5leHBvcnRzLklOQ09SUkVDVF9UWVBFID0gSU5DT1JSRUNUX1RZUEU7XHJcbmV4cG9ydHMuSU5DT1JSRUNUX1BBUkVOVF9OT0RFID0gSU5DT1JSRUNUX1BBUkVOVF9OT0RFO1xyXG5leHBvcnRzLklOQ09SUkVDVF9MSU5LX1RBUkdFVCA9IElOQ09SUkVDVF9MSU5LX1RBUkdFVDtcclxuZXhwb3J0cy5JTkNPTVBBVElCTEVfQ0hJTEQgPSBJTkNPTVBBVElCTEVfQ0hJTEQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IEVycm9yQ29kZSBmcm9tICcuL0Vycm9yQ29kZSc7XHJcblxyXG5cclxubGV0IEVycm9ySGFuZGxlciA9IGZ1bmN0aW9uKGVkaXRvcil7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNob3dNc2c6ZnVuY3Rpb24oZXJyb3JDb2RlLHBhcmFtcykge1xyXG4gICAgICBsZXQgbXNnID0gJyc7XHJcbiAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuTk9ERV9OT1RfRVhJU1RTOlxyXG4gICAgICAgICAgbXNnID0gYE5vZGUgb2YgdHlwZSAke3BhcmFtcy50eXBlfSBpcyBub3QgZGVmaW5lZC5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuQ0xBU1NfTk9UX0RFRklORUQ6XHJcbiAgICAgICAgICBtc2cgPSBgQ2xhc3MgJHtwYXJhbXMuY2xhc3N9IGlzIG5vdCBkZWZpbmVkLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5DT05ORUNUSU9OX1RPX0lUU0VMRjpcclxuICAgICAgICAgIG1zZyA9IGBDYW5ub3QgY29ubmVjdCBub2RlIFwiJHtwYXJhbXMubm9kZX1cIiB0byBpdHNlbGYuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLklNUFJPUEVSX0NPTk5FQ1RJT046XHJcbiAgICAgICAgICBtc2cgPSBgQ2Fubm90IGNyZWF0ZSBjb25uZWN0aW9uIG9mIHR5cGUgXCIke3BhcmFtcy50eXBlfVwiIGZyb20gbm9kZSBpZCBcIiR7cGFyYW1zLm5vZGUxfVwiIHRvIG5vZGUgaWQgXCIke3BhcmFtcy5ub2RlMn1cIi5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuT0JKRUNUX05PVF9GT1VORDpcclxuICAgICAgICAgIG1zZyA9IGBDYW5ub3QgZmluZCBvYmplY3Qgd2l0aCBpZCBcIiR7cGFyYW1zLmlkfVwiYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLk1BTkRBVE9SWV9QQVJBTTpcclxuICAgICAgICAgIG1zZyA9IGBQYXJhbWV0ZXIgXCIke3BhcmFtcy5wYXJhbX1cIiB3YXMgZXhwZWN0ZWQgYnV0IGluc3RlYWQgZ290IHVuZGVmaW5lZC5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuSU5DT1JSRUNUX1RZUEU6XHJcbiAgICAgICAgICBtc2cgPSBgV3JvbmcgdHlwZSBvZiBhcmd1bWVudC4gRXhwZWN0ZWQgXCIke3BhcmFtcy50eXBlfVwiYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLklOQ09SUkVDVF9QQVJFTlRfTk9ERTpcclxuICAgICAgICAgIG1zZyA9IGBOb2RlIG9mIHR5cGUgXCIke3BhcmFtcy5jaGlsZH1cIiBjYW4gYmUgYWRkZWQgb25seSB0byBcIiR7cGFyYW1zLnBhcmVudH1cIiBub2RlLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5JTkNPUlJFQ1RfTElOS19UQVJHRVQ6XHJcbiAgICAgICAgICBtc2cgPSBgQ2Fubm90IGNyZWF0ZSBsaW5rIGNvbm5lY3Rpb24gdG8gbnVsbCBub2RlLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5JTkNPTVBBVElCTEVfQ0hJTEQ6XHJcbiAgICAgICAgICBtc2cgPSBgQ2Fubm90IGFkZCBjaGlsZCBvZiB0eXBlIFwiJHtwYXJhbXMuY2hpbGR9XCIgaW50byBwYXJlbnQgb2YgdHlwZSBcIiR7cGFyYW1zLnBhcmVudH1cIi5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIG1zZyA9IGBVbmtub3duIGVycm9yIGNvZGUgcGFzc2VkOiAke2Vycm9yQ29kZX1gO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKGVkaXRvcikge1xyXG4gICAgICAgIGVkaXRvci5zaG93TXNnKG1zZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XHJcbiAgICAgICAgLy9hZGQgd2FybmluZyBtb2RlP1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBFcnJvckhhbmRsZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcblxyXG5cclxubGV0IExpbmtOb2RlID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICBsZXQgX3R5cGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfb3V0cHV0ID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2lucHV0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIExpbmtOb2RlIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKXtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3R5cGUuc2V0KHRoaXMsZGF0YS50eXBlKTtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLGRhdGEuaW5wdXQgPyBkYXRhLmlucHV0IDogJycpO1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLGRhdGEub3V0cHV0ID8gZGF0YS5vdXRwdXQgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5wKCkge1xyXG4gICAgICByZXR1cm4gX2lucHV0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRPdXQoKSB7XHJcbiAgICAgIHJldHVybiBfb3V0cHV0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUeXBlKCkge1xyXG4gICAgICByZXR1cm4gX3R5cGUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnR5cGUgPSB0aGlzLmdldFR5cGUoKTtcclxuICAgICAgZGF0YS5pbnB1dCA9IHRoaXMuZ2V0SW5wKCk7XHJcbiAgICAgIGRhdGEub3V0cHV0ID0gdGhpcy5nZXRPdXQoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIHNldElucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICBnZXRJbnB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG4gICAgcmVtb3ZlSW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIGxldCBsaW5rSW5wID0gdGhpcy5nZXRJbnAoKTtcclxuICAgICAgbGV0IGxpbmtPdXQgPSB0aGlzLmdldE91dCgpO1xyXG4gICAgICBsZXQgaW5wT2JqID0gdGhpcy5nZXRSUEdTKCkuZmluZE5vZGUobGlua0lucCk7XHJcbiAgICAgIGxldCBvdXRPYmogPSB0aGlzLmdldFJQR1MoKS5maW5kTm9kZShsaW5rT3V0KTtcclxuICAgICAgaWYoaW5wT2JqKSBpbnBPYmoucmVtb3ZlSW5wdXRDb25uZWN0aW9uKHRoaXMuZ2V0VHlwZSgpLGxpbmtJbnApO1xyXG4gICAgICBpZihvdXRPYmopIG91dE9iai5yZW1vdmVPdXRwdXRDb25uZWN0aW9uKHRoaXMuZ2V0VHlwZSgpLGxpbmtPdXQpO1xyXG4gICAgICBfdHlwZS5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9pbnB1dC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9vdXRwdXQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBMaW5rTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBSRUZFUkVOQ0UgPSAncmVmZXJlbmNlJztcclxuY29uc3QgVklTSUJJTElUWSA9ICd2aXNpYmlsaXR5JztcclxuY29uc3QgQUNUSVZJVFkgPSAnYWN0aXZpdHknO1xyXG5jb25zdCBBQ1RJT04gPSAnYWN0aW9uJztcclxuY29uc3QgR09UTyA9ICdnb3RvJztcclxuY29uc3QgRElBTE9HID0gJ2RpYWxvZyc7XHJcblxyXG5leHBvcnRzLlJFRkVSRU5DRSA9IFJFRkVSRU5DRTtcclxuZXhwb3J0cy5WSVNJQklMSVRZID0gVklTSUJJTElUWTtcclxuZXhwb3J0cy5BQ1RJVklUWSA9IEFDVElWSVRZO1xyXG5leHBvcnRzLkFDVElPTiA9IEFDVElPTjtcclxuZXhwb3J0cy5HT1RPID0gR09UTztcclxuZXhwb3J0cy5ESUFMT0cgPSBESUFMT0c7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEZhc3QgVVVJRCBnZW5lcmF0b3IsIFJGQzQxMjIgdmVyc2lvbiA0IGNvbXBsaWFudC5cclxuICogQGF1dGhvciBKZWZmIFdhcmQgKGpjd2FyZC5jb20pLlxyXG4gKiBAbGljZW5zZSBNSVQgbGljZW5zZVxyXG4gKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjE5NjMxMzYjMjE5NjMxMzZcclxuICoqL1xyXG52YXIgVVVJRCA9IChmdW5jdGlvbigpIHtcclxuICB2YXIgc2VsZiA9IHt9O1xyXG4gIHZhciBsdXQgPSBbXTsgZm9yICh2YXIgaT0wOyBpPDI1NjsgaSsrKSB7IGx1dFtpXSA9IChpPDE2PycwJzonJykrKGkpLnRvU3RyaW5nKDE2KTsgfVxyXG4gIHNlbGYuZ2VuZXJhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBkMCA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgdmFyIGQxID0gTWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7XHJcbiAgICB2YXIgZDIgPSBNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtcclxuICAgIHZhciBkMyA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgcmV0dXJuIGx1dFtkMCYweGZmXStsdXRbZDA+PjgmMHhmZl0rbHV0W2QwPj4xNiYweGZmXStsdXRbZDA+PjI0JjB4ZmZdKyctJytcclxuICAgICAgbHV0W2QxJjB4ZmZdK2x1dFtkMT4+OCYweGZmXSsnLScrbHV0W2QxPj4xNiYweDBmfDB4NDBdK2x1dFtkMT4+MjQmMHhmZl0rJy0nK1xyXG4gICAgICBsdXRbZDImMHgzZnwweDgwXStsdXRbZDI+PjgmMHhmZl0rJy0nK2x1dFtkMj4+MTYmMHhmZl0rbHV0W2QyPj4yNCYweGZmXStcclxuICAgICAgbHV0W2QzJjB4ZmZdK2x1dFtkMz4+OCYweGZmXStsdXRbZDM+PjE2JjB4ZmZdK2x1dFtkMz4+MjQmMHhmZl07XHJcbiAgfVxyXG4gIHJldHVybiBzZWxmO1xyXG59KSgpO1xyXG5cclxuZXhwb3J0cy5VVUlEID0gVVVJRDtcclxuXHJcbmxldCBpbmRleE9mT2JqZWN0ID0gZnVuY3Rpb24oYXJyYXksb2JqKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYoYXJyYXlbaV0gPT09IG9iaikgcmV0dXJuIGk7XHJcbiAgfVxyXG4gIHJldHVybiAtMTtcclxufTtcclxuXHJcbmV4cG9ydHMuaW5kZXhPZk9iamVjdCA9IGluZGV4T2ZPYmplY3Q7XHJcblxyXG5sZXQgZ2V0SW5kZXhCeUlkID0gZnVuY3Rpb24oYXJyYXksaWQpIHtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZihhcnJheVtpXS5nZXRJZCgpID09PSBpZCkgcmV0dXJuIGk7XHJcbiAgfVxyXG4gIHJldHVybiAtMTtcclxufTtcclxuZXhwb3J0cy5nZXRJbmRleEJ5SWQgPSBnZXRJbmRleEJ5SWQ7XHJcblxyXG5leHBvcnRzLmFkZE9iamVjdFRvQXJyYXkgPSBmdW5jdGlvbihhcnJheSxvYmosZXhwZWN0ZWRUeXBlKSB7XHJcbiAgaWYoZXhwZWN0ZWRUeXBlICE9PSB1bmRlZmluZWQgJiYgZXhwZWN0ZWRUeXBlICE9PSBudWxsKSB7XHJcbiAgICBpZihleHBlY3RlZFR5cGUuaXNQcm90b3R5cGVPZihvYmopKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdHlwZSBvZiBvYmplY3QgcGFzc2VkLiBFeHBlY3RlZCAnXHJcbiAgICAgICtleHBlY3RlZFR5cGUuY29uc3RydWN0b3IubmFtZSsnIG9iamVjdC4nKTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYoaW5kZXhPZk9iamVjdChhcnJheSxvYmopID09PSAtMSkge1xyXG4gICAgYXJyYXkucHVzaChvYmopO1xyXG4gIH1cclxuICByZXR1cm4gYXJyYXk7XHJcbn07XHJcblxyXG4vKmV4cG9ydHMucmVtb3ZlT2JqZWN0QnlJZCA9IGZ1bmN0aW9uKGFycmF5LGlkKSB7XHJcbiAgbGV0IGluZGV4ID0gZ2V0SW5kZXhCeUlkKGFycmF5LGlkKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGxldCBzcGxpY2VkID0gYXJyYXkuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgaWYoc3BsaWNlZC5kaXNwb3NlKSBzcGxpY2VkLmRpc3Bvc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59Ki9cclxuXHJcbmV4cG9ydHMucmVtb3ZlT2JqZWN0RnJvbUFycmF5ID0gZnVuY3Rpb24oYXJyYXksb2JqKSB7XHJcbiAgbGV0IGluZGV4ID0gaW5kZXhPZk9iamVjdChhcnJheSxvYmopO1xyXG4gIGlmKGluZGV4ICE9PSAtMSkge1xyXG4gICAgbGV0IHNwbGljZWQgPSBhcnJheS5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICBpZihzcGxpY2VkLmRpc3Bvc2UpIHNwbGljZWQuZGlzcG9zZSgpO1xyXG4gIH1cclxuICByZXR1cm4gYXJyYXk7XHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5cclxubGV0IEFuc3dlck5vZGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgLy9XZWFrIG1hcHMgYXJlIG5ldyBmZWF0dXJlIHRvIEphdmFTY3JpcHQuIFdlIGNhbiBzdG9yZSBwcml2YXRlXHJcbiAgLy9vYmplY3QgcHJvcGVydGllcyBpbiBrZXkvdmFsdWUgcGFpcnMgdXNpbmcgb3VyIGluc3RhbmNlIGFzIHRoZSBrZXksXHJcbiAgLy9hbmQgb3VyIGNsYXNzIGNhbiBjYXB0dXJlIHRob3NlIGtleS92YWx1ZSBtYXBzIGluIGEgY2xvc3VyZS5cclxuICBsZXQgX3RleHQgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQW5zd2VyTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyxkYXRhLnRleHQgPyBkYXRhLnRleHQgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xyXG5cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGV4dCh2YWx1ZSkge1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGV4dCgpIHtcclxuICAgICAgcmV0dXJuIF90ZXh0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYWxrKCkge1xyXG4gICAgICBsZXQgdGFsa3MgPSBnZXRPdXRwdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5HT1RPKTtcclxuICAgICAgcmV0dXJuIHRhbGtzID8gdGFsa3NbMF0gOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuVklTSUJJTElUWTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuVklTSUJJTElUWSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuQUNUSVZJVFk6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkFDVElWSVRZKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuR09UTzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldE91dHB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkdPVE8pLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBfdGV4dC5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBBbnN3ZXJOb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IENvbXBvdW5kTm9kZSBmcm9tICcuLi9jb3JlL0NvbXBvdW5kTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgICAgZnJvbSAnLi4vY29yZS9MaW5rVHlwZSc7XHJcbmltcG9ydCBVdGlscyAgICAgICAgZnJvbSAnLi4vY29yZS9VdGlscyc7XHJcblxyXG5cclxuY29uc3QgS0VZX1RBTEtTID0gJ3RhbGtzJztcclxuXHJcbmxldCBEaWFsb2dOb2RlID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBfc3RhcnQgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgRGlhbG9nTm9kZSBleHRlbmRzIENvbXBvdW5kTm9kZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF9zdGFydC5zZXQodGhpcyxkYXRhLnN0YXJ0VGFsayA/IGRhdGEuc3RhcnRUYWxrIDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnN0YXJ0VGFsayA9IHRoaXMuZ2V0U3RhcnRUYWxrKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkFkZENoaWxkKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHR5cGUgPT09ICdUYWxrTm9kZSc7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3RhcnRUYWxrKHRhbGtJZCkge1xyXG4gICAgICBfc3RhcnQuc2V0KHRoaXMsdGFsa0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdGFydFRhbGsoKSB7XHJcbiAgICAgIHJldHVybiBfc3RhcnQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuVklTSUJJTElUWTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuVklTSUJJTElUWSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuQUNUSVZJVFk6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkFDVElWSVRZKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuRElBTE9HOlxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlQ2hpbGRyZW4oS0VZX1RBTEtTKTtcclxuICAgICAgX3N0YXJ0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gRGlhbG9nTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBVdGlscyAgICAgIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xyXG5pbXBvcnQgQ29tcG91bmROb2RlIGZyb20gJy4uL2NvcmUvQ29tcG91bmROb2RlJztcclxuaW1wb3J0IExpbmtUeXBlICAgZnJvbSAnLi4vY29yZS9MaW5rVHlwZSc7XHJcblxyXG5jb25zdCBLRVlfQU5TV0VSUyA9ICdhbnN3ZXJzJztcclxuXHJcbmxldCBUYWxrTm9kZSA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgbGV0IF90ZXh0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIFRhbGtOb2RlIGV4dGVuZHMgQ29tcG91bmROb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyxkYXRhLnRleHQgPyBkYXRhLnRleHQgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0KHZhbHVlKSB7XHJcbiAgICAgIF90ZXh0LnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0KCkge1xyXG4gICAgICByZXR1cm4gX3RleHQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkFkZENoaWxkKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHR5cGUgPT09ICdBbnN3ZXJOb2RlJztcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkdPVE86XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG4gICAgZ2V0T3V0cHV0Q29ubmVjdGlvbnModHlwZSkge31cclxuICAgIHJlbW92ZU91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlQ2hpbGRyZW4oS0VZX0FOU1dFUlMpO1xyXG4gICAgICBfdGV4dC5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFRhbGtOb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IENvbXBvdW5kTm9kZSBmcm9tICcuLi9jb3JlL0NvbXBvdW5kTm9kZSc7XHJcbmltcG9ydCBRdWVzdFN0YXR1cyAgZnJvbSAnLi9RdWVzdFN0YXR1cyc7XHJcblxyXG5jb25zdCBLRVlfVEFTS1MgPSAndGFza3MnXHJcblxyXG5sZXQgUXVlc3ROb2RlID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBfdGl0bGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfZGVzY3JpcHRpb24gPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfc3RhdHVzID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIFF1ZXN0Tm9kZSBleHRlbmRzIENvbXBvdW5kTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3RpdGxlLnNldCh0aGlzLGRhdGEudGl0bGUgPyBkYXRhLnRpdGxlIDogJycpO1xyXG4gICAgICBfZGVzY3JpcHRpb24uc2V0KHRoaXMsZGF0YS5kZXNjcmlwdGlvbiA/IGRhdGEuZGVzY3JpcHRpb24gOiAnJyk7XHJcbiAgICAgIF9zdGF0dXMuc2V0KHRoaXMsZGF0YS5zdGF0dXMgPyBkYXRhLnN0YXR1cyA6IFF1ZXN0U3RhdHVzLklOQ09NUExFVEUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnRpdGxlID0gdGhpcy5nZXRUaXRsZSgpO1xyXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uID0gdGhpcy5nZXREZXNjcmlwdGlvbigpO1xyXG4gICAgICBkYXRhLnN0YXR1cyA9IHRoaXMuZ2V0U3RhdHVzKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkFkZENoaWxkKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHR5cGUgPT09ICdUYXNrJztcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaXRsZSh2YWx1ZSkge1xyXG4gICAgICBfdGl0bGUuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpdGxlKCkge1xyXG4gICAgICByZXR1cm4gX3RpdGxlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xyXG4gICAgICBfZGVzY3JpcHRpb24uc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlc2NyaXB0aW9uKCkge1xyXG4gICAgICByZXR1cm4gX2Rlc2NyaXB0aW9uLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdGF0dXModmFsdWUpIHtcclxuICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgIGNhc2UgUXVlc3RTdGF0dXMuQ09NUExFVEVEOlxyXG4gICAgICAgIGNhc2UgUXVlc3RTdGF0dXMuRkFJTEVEOlxyXG4gICAgICAgICAgX3N0YXR1cy5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICAgICAgY2FzZSBRdWVzdFN0YXR1cy5JTkNPTVBMRVRFOlxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBfc3RhdHVzLnNldCh0aGlzLFF1ZXN0U3RhdHVzLklOQ09NUExFVEUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhdHVzKCkge1xyXG4gICAgICByZXR1cm4gX3N0YXR1cy5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlQ2hpbGRyZW4oS0VZX1RBU0tTKTtcclxuICAgICAgX3RpdGxlLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2Rlc2NyaXB0aW9uLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX3N0YXR1cy5kZWxldGUodGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gUXVlc3ROb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuY29uc3QgSU5DT01QTEVURSA9ICdxdWVzdEluY29tcGxldGUnO1xyXG5jb25zdCBDT01QTEVURUQgPSAncXVlc3RDb21wbGV0ZWQnO1xyXG5jb25zdCBGQUlMRUQgPSAncXVlc3RGYWlsZWQnO1xyXG5cclxuZXhwb3J0cy5JTkNPTVBMRVRFID0gSU5DT01QTEVURTtcclxuZXhwb3J0cy5DT01QTEVURUQgPSBDT01QTEVURUQ7XHJcbmV4cG9ydHMuRkFJTEVEID0gRkFJTEVEO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5cclxubGV0IFRhc2tOb2RlID0gKGZ1bmN0aW9uKCl7XHJcbiAgcmV0dXJuIGNsYXNzIFRhc2tOb2RlIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvL3RvIGRvXHJcbiAgfTtcclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGFza05vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBWYXJpYWJsZVR5cGUgZnJvbSAnLi9WYXJpYWJsZVR5cGUnO1xyXG5cclxubGV0IFZhcmlhYmxlTm9kZSA9IChmdW5jdGlvbigpe1xyXG4gIGxldCBfdmFsdWUgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfdHlwZSA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIGZ1bmN0aW9uIF9wYXJzZUJvb2xlYW4odmFsKSB7XHJcbiAgICBsZXQgaXNCb29sID0gdHlwZW9mIHZhbCA9PT0gVmFyaWFibGVUeXBlLkJPT0xFQU47XHJcbiAgICBpZihpc0Jvb2wpIHtcclxuICAgICAgcmV0dXJuIHZhbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN3aXRjaChTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSl7XHJcbiAgICAgICAgY2FzZSBcInRydWVcIjogY2FzZSBcInllc1wiOiBjYXNlIFwiMVwiOiByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFwiZmFsc2VcIjogY2FzZSBcIm5vXCI6IGNhc2UgXCIwXCI6IGNhc2UgbnVsbDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBCb29sZWFuKHZhbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9wYXJzZVN0cmluZyh2YWwpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsID09PSBWYXJpYWJsZVR5cGUuU1RSSU5HID8gdmFsIDogU3RyaW5nKHZhbCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfcGFyc2VOdW1iZXIodmFsKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gVmFyaWFibGVUeXBlLk5VTUJFUiA/IHZhbCA6IHBhcnNlRmxvYXQodmFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9wYXJzZVZhbHVlKHZhbCx0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBWYXJpYWJsZVR5cGUuQk9PTEVBTjpcclxuICAgICAgICByZXR1cm4gX3BhcnNlQm9vbGVhbih2YWwpO1xyXG4gICAgICBjYXNlIFZhcmlhYmxlVHlwZS5OVU1CRVI6XHJcbiAgICAgICAgcmV0dXJuIF9wYXJzZU51bWJlcih2YWwpO1xyXG4gICAgICBjYXNlIFZhcmlhYmxlVHlwZS5TVFJJTkc6XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIF9wYXJzZVN0cmluZyh2YWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNsYXNzIFZhcmlhYmxlTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfdHlwZS5zZXQodGhpcywgZGF0YS5oYXNPd25Qcm9wZXJ0eSgndHlwZScpID8gZGF0YS50eXBlIDogVmFyaWFibGVUeXBlLlNUUklORyk7XHJcbiAgICAgIF92YWx1ZS5zZXQodGhpcywgZGF0YS5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSA/IF9wYXJzZVZhbHVlKGRhdGEudmFsdWUsX3R5cGUuZ2V0KHRoaXMpKSA6ICcnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS50eXBlID0gdGhpcy5nZXRUeXBlKCk7XHJcbiAgICAgIGRhdGEudmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlKHZhbCkge1xyXG4gICAgICBfdmFsdWUuc2V0KHRoaXMsX3BhcnNlVmFsdWUodmFsLF90eXBlLmdldCh0aGlzKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlKCkge1xyXG4gICAgICByZXR1cm4gX3ZhbHVlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUeXBlKCkge1xyXG4gICAgICByZXR1cm4gX3R5cGUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVPdXRwdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5SRUZFUkVOQ0U6XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBfdmFsdWUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfdHlwZS5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBWYXJpYWJsZU5vZGU7XHJcbiIsImNvbnN0IEJPT0xFQU4gPSAnYm9vbGVhbic7XHJcbmNvbnN0IFNUUklORyA9ICdzdHJpbmcnO1xyXG5jb25zdCBOVU1CRVIgPSAnbnVtYmVyJztcclxuXHJcbmV4cG9ydHMuQk9PTEVBTiA9IEJPT0xFQU47XHJcbmV4cG9ydHMuU1RSSU5HID0gU1RSSU5HO1xyXG5leHBvcnRzLk5VTUJFUiA9IE5VTUJFUjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBkYXRhIGZyb20gJy4uL2RhdGEvZGF0YS5qc29uJztcclxuaW1wb3J0IFJQR1N5c3RlbSBmcm9tICcuL3JwZ3MvUlBHU3lzdGVtJztcclxuXHJcbihmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcbiAgJChmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcnBnczEgPSBuZXcgUlBHU3lzdGVtKCk7XHJcbiAgICBycGdzMVxyXG4gICAgLmFkZEFjdG9yKCdhY3QxJyx7bmFtZTonQWRhbSd9KS5pbnAoJ2RpYWxvZycsJ2RsZzEnKVxyXG4gICAgLmFkZENvbmRpdGlvbignY29uZDEnLHtcclxuICAgICAgY29kZTpgY29uc29sZS5sb2cocnBncy5nZXRWYXJpYWJsZSgnczEnKS5nZXRWYWx1ZSgpKTtgXHJcbiAgICB9KS5vdXQoJ3Zpc2liaWxpdHknLCd0bGswYW5zMScpXHJcbiAgICAuYWRkRGlhbG9nKCdkbGcxJyx7c3RhcnRUYWxrOid0bGswJ30pLm91dCgnZGlhbG9nJywnYWN0MScpXHJcbiAgICAgIC5hZGRUYWxrKCd0bGswJyx7dGV4dDonVGhpcyBpcyB0YWxrIDAuJ30pXHJcbiAgICAgICAgLmFkZEFuc3dlcigndGxrMGFuczEnLHt0ZXh0OidBbnN3ZXIxJ30pLm91dCgnZ290bycsJ3RsazEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnAoJ3Zpc2liaWxpdHknLCdjb25kMScpXHJcbiAgICAgICAgLmFkZEFuc3dlcigndGxrMGFuczInLHt0ZXh0OidBbnN3ZXIyJ30pLm91dCgnZ290bycsJ3RsazInKVxyXG4gICAgICAgIC5hZGRBbnN3ZXIoJ3RsazBhbnMzJyx7dGV4dDonQW5zd2VyMyd9KS5vdXQoJ2dvdG8nLCd0bGszJylcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGsxJyx7dGV4dDonVGhpcyBpcyB0YWxrIDEuJ30pLmlucCgnZ290bycsJ3RsazBhbnMxJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGsxYW5zMScse3RleHQ6J0Fuc3dlcjEnfSlcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGsyJyx7dGV4dDonVGhpcyBpcyB0YWxrIDIuJ30pLmlucCgnZ290bycsJ3RsazBhbnMyJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGsyYW5zMScse3RleHQ6J0Fuc3dlcjEnfSlcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGszJyx7dGV4dDonVGhpcyBpcyB0YWxrIDMuJ30pLmlucCgnZ290bycsJ3RsazBhbnMzJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGszYW5zMScse3RleHQ6J0Fuc3dlcjEnfSlcclxuICAgIC5hZGRWYXJpYWJsZSgnYjEnLHt0eXBlOidib29sZWFuJyx2YWx1ZTpmYWxzZX0pXHJcbiAgICAuYWRkVmFyaWFibGUoJ3MxJyx7dHlwZTonc3RyaW5nJyx2YWx1ZTonVGhpcyBpcyBtZXNzYWdlIGZyb20gY29tcGlsZWQgY29kZSEnfSlcclxuICAgIC5hZGRWYXJpYWJsZSgnbjEnLHt0eXBlOidudW1iZXInLHZhbHVlOjU2fSlcclxuICAgIGxldCBjb25kID0gcnBnczEuZ2V0Q29uZGl0aW9uKCdjb25kMScpO1xyXG4gICAgY29uc29sZS5sb2coY29uZC5jaGVjaygpKTtcclxuICAgIGxldCBiMSA9IHJwZ3MxLmdldFZhcmlhYmxlKCdiMScpO1xyXG4gICAgbGV0IHMxID0gcnBnczEuZ2V0VmFyaWFibGUoJ3MxJyk7XHJcbiAgICBsZXQgbjEgPSBycGdzMS5nZXRWYXJpYWJsZSgnbjEnKTtcclxuICAgIC8qY29uc29sZS5sb2coJ2IxIHZhbHVlJyxiMS5nZXRWYWx1ZSgpLGIxLmdldFR5cGUoKSk7XHJcbiAgICBjb25zb2xlLmxvZygnczEgdmFsdWUnLHMxLmdldFZhbHVlKCksczEuZ2V0VHlwZSgpKTtcclxuICAgIGNvbnNvbGUubG9nKCduMSB2YWx1ZScsbjEuZ2V0VmFsdWUoKSxuMS5nZXRUeXBlKCkpOyovXHJcblxyXG4gICAgbGV0IHJwZ3MxU2VyaWFsaXplZCA9IHJwZ3MxLnNlcmlhbGl6ZURhdGEoKTtcclxuICAgIGNvbnNvbGUubG9nKFwicnBnczFcIixycGdzMVNlcmlhbGl6ZWQpO1xyXG5cclxuICAgIGxldCBycGdzMiA9IG5ldyBSUEdTeXN0ZW0oSlNPTi5wYXJzZShycGdzMVNlcmlhbGl6ZWQpKTtcclxuICAgIGNvbnNvbGUubG9nKFwiZGF0YSBjcmVhdGVkIGlzIGVxdWFsIHRvIGRhdGEgcGFyc2VkOlwiLHJwZ3MxU2VyaWFsaXplZCA9PT0gcnBnczIuc2VyaWFsaXplRGF0YSgpKTtcclxuICB9KTtcclxuXHJcbn0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiJdfQ==
