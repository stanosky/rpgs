/*!
 * rpgs
 * RPG System
 * https://github.com/stanosky/rpgs
 * @author Krzysztof Stano
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict'

module.exports = {
  compileCode,
  compileExpression
}

function compileExpression (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  const expression = `
  try { with (sandbox) { return ${src} } } catch (err) {
    if (!(err instanceof ReferenceError || err instanceof TypeError)) throw err
  }`
  return new Function('sandbox', expression).bind(sandbox, sandbox) // eslint-disable-line
}

function compileCode (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  return new Function('sandbox', `with (sandbox) { ${src} }`).bind(sandbox, sandbox) // eslint-disable-line
}

function get (target, key, receiver) {
  if (key === Symbol.unscopables) {
    return undefined
  }
  return Reflect.get(target, key, receiver)
}

function has (target, key) {
  return true
}

},{}],2:[function(require,module,exports){
module.exports={
  "objects":[
    {
      "class":"Actor",
      "uuid":"a1",
      "name":"Adam"
    },
    {
      "class":"Actor",
      "uuid":"a2",
      "name":"Eva"
    },
    {
      "class":"Dialog",
      "uuid":"d1",
      "startTalk":"t1"
    },
    {
      "class":"Dialog",
      "uuid":"d2",
      "startTalk":"t4"
    },
    {
      "class":"Talk",
      "uuid":"t1",
      "text":"Talk 1"
    },
    {
      "class":"Talk",
      "uuid":"t2",
      "text":"Talk 2"
    },
    {
      "class":"Talk",
      "uuid":"t3",
      "text":"Talk 3"
    },
    {
      "class":"Talk",
      "uuid":"t4",
      "text":"Talk 4"
    },
    {
      "class":"Talk",
      "uuid":"t5",
      "text":"Talk 5"
    },
    {
      "class":"Talk",
      "uuid":"t6",
      "text":"Talk 6"
    },
    {
      "class":"Answer",
      "uuid":"a1",
      "text":"Answer 1"
    },
    {
      "class":"Answer",
      "uuid":"a2",
      "text":"Answer 2"
    },
    {
      "class":"Answer",
      "uuid":"a3",
      "text":"Answer 3"
    },
    {
      "class":"Answer",
      "uuid":"a4",
      "text":"Answer 4"
    },
    {
      "class":"Answer",
      "uuid":"a5",
      "text":"Answer 5"
    },
    {
      "class":"Answer",
      "uuid":"a6",
      "text":"Answer 6"
    }
  ],
  "dependencies":[
    {
      "dependent":"a1",
      "dependencies": {
        "dialog": "d1"
      }
    },
    {
      "dependent":"a2",
      "dependencies": {
        "dialog": "d2"
      }
    },
    {
      "dependent":"d1",
      "dependencies": {
        "talk":["t1","t2","t3"]
      }
    },
    {
      "dependent":"d2",
      "dependencies": {
        "talk":["t4","t5","t6"]
      }
    },
    {
      "dependent":"t1",
      "dependencies": {
        "answer": ["a1"]
      }
    },
    {
      "dependent":"t2",
      "dependencies": {
        "answer": ["a2"]
      }
    },
    {
      "dependent":"t3",
      "dependencies": {
        "answer": ["a3"]
      }
    },
    {
      "dependent":"t4",
      "dependencies": {
        "answer": ["a4"]
      }
    },
    {
      "dependent":"t5",
      "dependencies": {
        "answer": ["a5"]
      }
    },
    {
      "dependent":"t6",
      "dependencies": {
        "answer": ["a6"]
      }
    },
    {
      "dependent":"a1",
      "dependencies": {
        "talk":"t2"
      }
    },
    {
      "dependent":"a2",
      "dependencies": {
        "talk":"t3"
      }
    },
    {
      "dependent":"a4",
      "dependencies": {
        "talk":"t4"
      }
    },
    {
      "dependent":"a5",
      "dependencies": {
        "talk":"t5"
      }
    }
  ]
}

},{}],3:[function(require,module,exports){
"use strict";

var _Utils = require('./core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _UniqueObject = require('./core/UniqueObject');

var _UniqueObject2 = _interopRequireDefault(_UniqueObject);

var _BaseObject = require('./core/BaseObject');

var _BaseObject2 = _interopRequireDefault(_BaseObject);

var _Actor = require('./actors/Actor');

var _Actor2 = _interopRequireDefault(_Actor);

var _Condition = require('./conditions/Condition');

var _Condition2 = _interopRequireDefault(_Condition);

var _Answer = require('./dialogs/Answer');

var _Answer2 = _interopRequireDefault(_Answer);

var _Dialog = require('./dialogs/Dialog');

var _Dialog2 = _interopRequireDefault(_Dialog);

var _Talk = require('./dialogs/Talk');

var _Talk2 = _interopRequireDefault(_Talk);

var _Quest = require('./quests/Quest');

var _Quest2 = _interopRequireDefault(_Quest);

var _Task = require('./quests/Task');

var _Task2 = _interopRequireDefault(_Task);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//import Inventory from './actors/Invenotry';
var nodeFactory = function nodeFactory(type, params) {
  switch (type) {
    case 'Actor':
      return new _Actor2.default(params);
    case 'Condition':
      return new _Condition2.default(params);
    case 'Answer':
      return new _Answer2.default(params);
    case 'Dialog':
      return new _Dialog2.default(params);
    case 'Talk':
      return new _Talk2.default(params);
    case 'Quest':
      return new _Quest2.default(params);
    case 'Task':
      return new _Task2.default(params);
    default:
      return new _UniqueObject2.default(params);
  }
};

var dataParser = function dataParser(objects, dependencies) {
  var _objectPool = objects.map(function (obj) {
    return nodeFactory(obj.class, obj);
  });

  for (var i = 0, dId, depObj, toInject; i < dependencies.length; i++) {
    dId = dependencies[i]['dependent'];
    depObj = _Utils2.default.getObjectById(_objectPool, dId);
    toInject = dependencies[i]['dependencies'];
    if (depObj && toInject) {
      setDependencies(depObj, toInject);
    }
  }

  function setDependencies(dependent, dependencies) {
    for (var type in dependencies) {
      if (dependencies.hasOwnProperty(type)) {
        if (dependencies[type] instanceof Array) {
          for (var _i = 0; _i < dependencies[type].length; _i++) {
            setDependency(dependent, type, dependencies[type][_i]);
          }
        } else {
          setDependency(dependent, type, dependencies[type]);
        }
      }
    }
  }

  function setDependency(dependent, type, uuid) {
    var dependency = _Utils2.default.getObjectById(_objectPool, uuid);
    //console.log('dependency',dependency);
    if (dependency) {
      dependent.setDependency(type, dependency);
    }
  }

  return _objectPool;
};

var RPGSystem = function RPGSystem(data) {
  var _data = data || { objects: [], dependencies: [] };
  var _objects = _data.objects ? Object.values(_data.objects) : [];
  var _dependencies = _data.dependencies ? Object.values(_data.dependencies) : [];
  var _objectPool = dataParser(_objects, _dependencies);

  var _rpgSystem = this;

  var _createNode = function (type, params, parent) {
    var _parent = parent || null;
    var obj = nodeFactory(type, params);

    if (parent !== null) {
      //parent.getObj().addChild(obj);
      //setDependency...
    } else {
      _objectPool.push(obj);
    }

    var _creator = {

      setParam: function setParam(param, value) {
        obj.setParam(param, value);
        return _creator;
      },

      addNode: function addNode(nodeType, nodeParams) {
        return _createNode(nodeType, nodeParams, _parent);
      },

      getObj: function getObj() {
        return obj;
      },

      back: function back() {
        return _parent || this.done();
      },

      done: function done() {
        return _rpgSystem;
      }
    };
    return _creator;
  }();

  var _serializeData = function _serializeData() {
    var objects = [];
    var dependencies = [];
    for (var i = 0, obj, dep; i < _objectPool.length; i++) {
      obj = _objectPool[i].getData();
      dep = _objectPool[i].getDependencies();
      objects.push(obj);
      if (Object.keys(dep).length > 0) {
        dependencies.push(dep);
      }
    }
    return JSON.stringify({ objects: objects, dependencies: dependencies });
  };

  return {
    serializeData: _serializeData
  };
};

module.exports = RPGSystem;

},{"./actors/Actor":4,"./conditions/Condition":5,"./core/BaseObject":6,"./core/UniqueObject":7,"./core/Utils":8,"./dialogs/Answer":9,"./dialogs/Dialog":10,"./dialogs/Talk":11,"./quests/Quest":12,"./quests/Task":14}],4:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _UniqueObject2 = require('../core/UniqueObject');

var _UniqueObject3 = _interopRequireDefault(_UniqueObject2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DIALOG = 'dialog';

var Actor = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _name = new WeakMap();
  var _dialog = new WeakMap();
  //let _inventory = new WeakMap();


  return function (_UniqueObject) {
    _inherits(Actor, _UniqueObject);

    function Actor(data) {
      _classCallCheck(this, Actor);

      var _this = _possibleConstructorReturn(this, (Actor.__proto__ || Object.getPrototypeOf(Actor)).call(this, data));

      _name.set(_this, data ? data.name : '');
      _dialog.set(_this, null);
      //_inventory.set(this,data.inventory ? );
      return _this;
    }

    _createClass(Actor, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Actor.prototype.__proto__ || Object.getPrototypeOf(Actor.prototype), 'getData', this).call(this);
        data.name = this.getName();
        return data;
      }
    }, {
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = _get(Actor.prototype.__proto__ || Object.getPrototypeOf(Actor.prototype), 'getDependencies', this).call(this);
        if (this.getDialog()) {
          dependencies[DIALOG] = this.getDialog().getId();
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        _get(Actor.prototype.__proto__ || Object.getPrototypeOf(Actor.prototype), 'setDependency', this).call(this, type, obj);
        switch (type) {
          case DIALOG:
            this.setDialog(obj);
            break;
          default:
            break;
        };
      }
    }, {
      key: 'setName',
      value: function setName(value) {
        _name.set(this, value);
      }
    }, {
      key: 'getName',
      value: function getName() {
        return _name.get(this);
      }
    }, {
      key: 'setDialog',
      value: function setDialog(dialog) {
        _dialog.set(this, dialog);
      }
    }, {
      key: 'getDialog',
      value: function getDialog() {
        return _dialog.get(this);
      }

      /*setInventory(inventory) {
        _inventory.set(this,inventory);
      }
        getInventory() {
        return _inventory.get(this);
      }*/

    }]);

    return Actor;
  }(_UniqueObject3.default);
}();

module.exports = Actor;

},{"../core/UniqueObject":7}],5:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _UniqueObject2 = require('../core/UniqueObject');

var _UniqueObject3 = _interopRequireDefault(_UniqueObject2);

var _nxCompile = require('@risingstack/nx-compile');

var _nxCompile2 = _interopRequireDefault(_nxCompile);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Condition = function () {
  var _label = new WeakMap();
  var _code = new WeakMap();
  var _compiled = new WeakMap();
  var _sandbox = new WeakMap();

  return function (_UniqueObject) {
    _inherits(Condition, _UniqueObject);

    function Condition(data, sandbox) {
      _classCallCheck(this, Condition);

      var _this = _possibleConstructorReturn(this, (Condition.__proto__ || Object.getPrototypeOf(Condition)).call(this, data));

      _label.set(_this, data ? data.label : '');
      _code.set(_this, data ? data.code : 'return true');
      _sandbox.set(_this, sandbox || {});
      _compiled.set(_this, _nxCompile2.default.compileExpression(_code.get(_this), _sandbox.get(_this)));
      return _this;
    }

    _createClass(Condition, [{
      key: 'setLabel',
      value: function setLabel(text) {
        _label.set(this, text);
      }
    }, {
      key: 'getLabel',
      value: function getLabel() {
        return _label.get(this);
      }
    }, {
      key: 'setCode',
      value: function setCode(code) {
        _code.set(this, code);
        _compiled.set(this, _nxCompile2.default.compileExpression(_code.get(this), _sandbox.get(this)));
      }
    }, {
      key: 'getCode',
      value: function getCode() {
        return _code.get(this);
      }
    }, {
      key: 'check',
      value: function check() {
        return _compiled.get(this)();
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(Condition.prototype.__proto__ || Object.getPrototypeOf(Condition.prototype), 'getData', this).call(this);
        data.label = this.getLabel();
        data.code = this.getCode();
        return data;
      }
    }]);

    return Condition;
  }(_UniqueObject3.default);
}();

},{"../core/UniqueObject":7,"@risingstack/nx-compile":1}],6:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _UniqueObject2 = require('./UniqueObject');

var _UniqueObject3 = _interopRequireDefault(_UniqueObject2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VISIBLE = 'visible';
var ACTIVE = 'active';

var BaseObject = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _visible = new WeakMap();
  var _active = new WeakMap();

  return function (_UniqueObject) {
    _inherits(BaseObject, _UniqueObject);

    function BaseObject(data) {
      _classCallCheck(this, BaseObject);

      var _this = _possibleConstructorReturn(this, (BaseObject.__proto__ || Object.getPrototypeOf(BaseObject)).call(this, data));

      _visible.set(_this, null);
      _active.set(_this, null);
      return _this;
    }

    _createClass(BaseObject, [{
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = {};
        if (this.getVisibleCondition()) {
          dependencies[VISIBLE] = this.getVisibleCondition().getId();
        }
        if (this.getActiveCondition()) {
          dependencies[ACTIVE] = this.getActiveCondition().getId();
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        switch (type) {
          case VISIBLE:
            this.setVisibleCondition(obj);
            break;
          case ACTIVE:
            this.setActiveCondition(obj);
            break;
          default:
            break;
        };
      }

      /**
       * Method sets condition that must be met in order to node was visible.
       * @param {Condition} condition Instance of Condition object
       */

    }, {
      key: 'setVisibleCondition',
      value: function setVisibleCondition(condition) {
        _visible.set(this, BaseObject.isConditionInstance(condition));
      }
    }, {
      key: 'getVisibleCondition',
      value: function getVisibleCondition() {
        return _visible.get(this);
      }

      /**
       * Returns boolean that reflects visiblility state of node.
       * @return {Boolean} Visibility state
       */

    }, {
      key: 'isVisible',
      value: function isVisible() {
        return BaseObject.checkCondition(_visible.get(this));
      }

      /**
       * Method sets condition that must be met in order to node was active.
       * @param {Condition} condition Instance of Condition object
       */

    }, {
      key: 'setActiveCondition',
      value: function setActiveCondition(condition) {
        _active.set(this, BaseObject.isConditionInstance(condition));
      }
    }, {
      key: 'getActiveCondition',
      value: function getActiveCondition() {
        return _active.get(this);
      }

      /**
       * Returns boolean that reflects activity state of node.
       * @return {Boolean} Active state
       */

    }, {
      key: 'isActive',
      value: function isActive() {
        return BaseObject.checkCondition(_active.get(this));
      }
    }], [{
      key: 'checkCondition',
      value: function checkCondition(condition) {
        if (condition === null) return true;
        return condition.check();
      }
    }, {
      key: 'isConditionInstance',
      value: function isConditionInstance(obj) {
        if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== Condition) {
          throw new Error('Wrong type of object passed. Expected "Condition" object.');
          return null;
        }
        return obj;
      }
    }]);

    return BaseObject;
  }(_UniqueObject3.default);
}();
module.exports = BaseObject;

},{"./UniqueObject":7}],7:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UniqueObject = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _uuid = new WeakMap();

  return function () {
    function UniqueObject(data) {
      _classCallCheck(this, UniqueObject);

      //By default we assign Universally Unique ID
      _uuid.set(this, data ? data.uuid : _Utils.UUID.generate());
    }

    _createClass(UniqueObject, [{
      key: "setId",
      value: function setId(value) {
        _uuid.set(this, value);
      }
    }, {
      key: "getId",
      value: function getId() {
        return _uuid.get(this);
      }
    }, {
      key: "getData",
      value: function getData() {
        return {
          class: this.constructor.name,
          uuid: this.getId()
        };
      }
    }, {
      key: "getDependencies",
      value: function getDependencies() {
        var dependencies = {};
        return dependencies;
      }
    }, {
      key: "setDependency",
      value: function setDependency(type, obj) {}
    }]);

    return UniqueObject;
  }();
}();
module.exports = UniqueObject;

},{"./Utils":8}],8:[function(require,module,exports){
"use strict";

/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/

var UUID = function () {
  var self = {};
  var lut = [];for (var i = 0; i < 256; i++) {
    lut[i] = (i < 16 ? '0' : '') + i.toString(16);
  }
  self.generate = function () {
    var d0 = Math.random() * 0xffffffff | 0;
    var d1 = Math.random() * 0xffffffff | 0;
    var d2 = Math.random() * 0xffffffff | 0;
    var d3 = Math.random() * 0xffffffff | 0;
    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
  };
  return self;
}();

exports.UUID = UUID;

var indexOfObject = function indexOfObject(array, obj) {
  for (var i = 0; i < array.length; i++) {
    if (array[i] === obj) return i;
  }
  return -1;
};

exports.indexOfObject = indexOfObject;

exports.getObjectById = function (array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return array[i];
  }
  return null;
};

var getIndexById = function getIndexById(array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return i;
  }
  return -1;
};
exports.getIndexById = getIndexById;

exports.addObjectToArray = function (array, obj, expectedType) {
  if (expectedType !== undefined && expectedType !== null) {
    if (expectedType.isPrototypeOf(obj)) {
      throw new Error('Wrong type of object passed. Expected ' + expectedType.constructor.name + ' object.');
    }
  }
  if (indexOfObject(array, obj) === -1) {
    array.push(obj);
  }
  return array;
};

exports.removeObjectById = function (array, id) {
  var index = getIndexById(array, id);
  if (index !== -1) {
    array.splice(index, 1);
  }
  return array;
};

exports.removeObjectFromArray = function (array, obj) {
  var index = indexOfObject(array, obj);
  if (index !== -1) {
    array.splice(index, 1);
  }
  return array;
};

},{}],9:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseObject2 = require('../core/BaseObject');

var _BaseObject3 = _interopRequireDefault(_BaseObject2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TALK = 'talk';

var Answer = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _text = new WeakMap();
  var _talk = new WeakMap();

  return function (_BaseObject) {
    _inherits(Answer, _BaseObject);

    function Answer(data) {
      _classCallCheck(this, Answer);

      var _this = _possibleConstructorReturn(this, (Answer.__proto__ || Object.getPrototypeOf(Answer)).call(this, data));

      _text.set(_this, data ? data.text : '');
      _talk.set(_this, data ? data.talk : '');
      return _this;
    }

    _createClass(Answer, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Answer.prototype.__proto__ || Object.getPrototypeOf(Answer.prototype), 'getData', this).call(this);
        data.text = this.getText();
        return data;
      }
    }, {
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = _get(Answer.prototype.__proto__ || Object.getPrototypeOf(Answer.prototype), 'getDependencies', this).call(this);
        if (this.getTalk()) {
          dependencies[TALK] = this.getTalk().getId();
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        _get(Answer.prototype.__proto__ || Object.getPrototypeOf(Answer.prototype), 'setDependency', this).call(this, type, obj);
        switch (type) {
          case TALK:
            this.setTalk(obj);
            break;
          default:
            break;
        };
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'setTalk',
      value: function setTalk(talk) {
        _talk.set(this, talk);
      }
    }, {
      key: 'getTalk',
      value: function getTalk() {
        return _talk.get(this);
      }
    }]);

    return Answer;
  }(_BaseObject3.default);
}();
module.exports = Answer;

},{"../core/BaseObject":6}],10:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _UniqueObject2 = require('../core/UniqueObject');

var _UniqueObject3 = _interopRequireDefault(_UniqueObject2);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _Talk = require('./Talk');

var _Talk2 = _interopRequireDefault(_Talk);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TALK = 'talk';

var Dialog = function () {
  var _start = new WeakMap();
  var _talks = new WeakMap();

  return function (_UniqueObject) {
    _inherits(Dialog, _UniqueObject);

    function Dialog(data) {
      _classCallCheck(this, Dialog);

      var _this = _possibleConstructorReturn(this, (Dialog.__proto__ || Object.getPrototypeOf(Dialog)).call(this, data));

      _start.set(_this, data ? data.startTalk : '');
      _talks.set(_this, []);
      return _this;
    }

    _createClass(Dialog, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Dialog.prototype.__proto__ || Object.getPrototypeOf(Dialog.prototype), 'getData', this).call(this);
        data.startTalk = this.getStartTalk();
        return data;
      }
    }, {
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = {};
        if (this.getTalks()) {
          dependencies[TALK] = this.getTalks().map(function (t) {
            return t.getId();
          });
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        switch (type) {
          case TALK:
            this.addTalk(obj);
            break;
          default:
            break;
        };
      }
    }, {
      key: 'addTalk',
      value: function addTalk(talk) {
        _talks.set(this, _Utils2.default.addObjectToArray(_talks.get(this), talk, _Talk2.default));
      }
    }, {
      key: 'removeTalk',
      value: function removeTalk(talkId) {
        _Utils2.default.removeObjectById(_talks.get(this), talkId);
      }
    }, {
      key: 'getTalk',
      value: function getTalk(talkId) {
        return _Utils2.default.getObjectById(_talks, talkId);
      }
    }, {
      key: 'getTalks',
      value: function getTalks() {
        return _talks.get(this);
      }
    }, {
      key: 'setStartTalk',
      value: function setStartTalk(talkId) {
        _start.set(this, talkId);
      }
    }, {
      key: 'getStartTalk',
      value: function getStartTalk() {
        return _start.get(this);
      }
    }]);

    return Dialog;
  }(_UniqueObject3.default);
}();
module.exports = Dialog;

},{"../core/UniqueObject":7,"../core/Utils":8,"./Talk":11}],11:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _BaseObject2 = require('../core/BaseObject');

var _BaseObject3 = _interopRequireDefault(_BaseObject2);

var _Answer = require('./Answer');

var _Answer2 = _interopRequireDefault(_Answer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ANSWER = 'answer';

var Talk = function () {

  var _text = new WeakMap();
  var _answers = new WeakMap();

  return function (_BaseObject) {
    _inherits(Talk, _BaseObject);

    function Talk(data) {
      _classCallCheck(this, Talk);

      var _this = _possibleConstructorReturn(this, (Talk.__proto__ || Object.getPrototypeOf(Talk)).call(this, data));

      _text.set(_this, data ? data.text : '');
      _answers.set(_this, []);
      return _this;
    }

    _createClass(Talk, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Talk.prototype.__proto__ || Object.getPrototypeOf(Talk.prototype), 'getData', this).call(this);
        data.text = this.getText();
        return data;
      }
    }, {
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = _get(Talk.prototype.__proto__ || Object.getPrototypeOf(Talk.prototype), 'getDependencies', this).call(this);
        if (this.getAnswers()) {
          dependencies[ANSWER] = this.getAnswers().map(function (a) {
            return a.getId();
          });
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        _get(Talk.prototype.__proto__ || Object.getPrototypeOf(Talk.prototype), 'setDependency', this).call(this, type, obj);
        switch (type) {
          case ANSWER:
            this.addAnswer(obj);
            break;
          default:
            break;
        };
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'addAnswer',
      value: function addAnswer(answer) {
        _answers.set(this, _Utils2.default.addObjectToArray(_answers.get(this), answer, _Answer2.default));
      }
    }, {
      key: 'removeAnswer',
      value: function removeAnswer(answerId) {
        _Utils2.default.removeObjectById(_answers.get(this), answerId);
      }
    }, {
      key: 'getAnswer',
      value: function getAnswer(answerId) {
        return _Utils2.default.getObjectById(_answers.get(this), answerId);
      }
    }, {
      key: 'getAnswers',
      value: function getAnswers() {
        return _answers.get(this);
      }
    }]);

    return Talk;
  }(_BaseObject3.default);
}();
module.exports = Talk;

},{"../core/BaseObject":6,"../core/Utils":8,"./Answer":9}],12:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseObject2 = require('../core/BaseObject');

var _BaseObject3 = _interopRequireDefault(_BaseObject2);

var _QuestStatus = require('./QuestStatus');

var _QuestStatus2 = _interopRequireDefault(_QuestStatus);

var _Task = require('./Task');

var _Task2 = _interopRequireDefault(_Task);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TASK = 'task';

var Quest = function () {
  var _title = new WeakMap();
  var _description = new WeakMap();
  var _status = new WeakMap();
  var _tasks = new WeakMap();

  return function (_BaseObject) {
    _inherits(Quest, _BaseObject);

    function Quest(data) {
      _classCallCheck(this, Quest);

      var _this = _possibleConstructorReturn(this, (Quest.__proto__ || Object.getPrototypeOf(Quest)).call(this, data));

      _title.set(_this, data ? data.title : '');
      _description.set(_this, data ? data.description : '');
      _status.set(_this, data ? data.status : _QuestStatus2.default.INCOMPLETE);
      _tasks.set(_this, []);
      return _this;
    }

    _createClass(Quest, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Quest.prototype.__proto__ || Object.getPrototypeOf(Quest.prototype), 'getData', this).call(this);
        data.title = this.getTitle();
        data.description = this.getDescription();
        data.status = this.getStatus();
        return data;
      }
    }, {
      key: 'getDependencies',
      value: function getDependencies() {
        var dependencies = _get(Quest.prototype.__proto__ || Object.getPrototypeOf(Quest.prototype), 'getDependencies', this).call(this);
        if (this.getTasks()) {
          dependencies[TASK] = this.getTasks().map(function (t) {
            return t.getId();
          });
        }
        return dependencies;
      }
    }, {
      key: 'setDependency',
      value: function setDependency(type, obj) {
        _get(Quest.prototype.__proto__ || Object.getPrototypeOf(Quest.prototype), 'setDependency', this).call(this, type, obj);
        switch (type) {
          case TASK:
            this.setTask(obj);
            break;
          default:
            break;
        };
      }
    }, {
      key: 'setTitle',
      value: function setTitle(value) {
        _title.set(this, value);
      }
    }, {
      key: 'getTitle',
      value: function getTitle() {
        return _title.get(this);
      }
    }, {
      key: 'setDescription',
      value: function setDescription(value) {
        _description.set(this, value);
      }
    }, {
      key: 'getDescription',
      value: function getDescription() {
        return _description.get(this);
      }
    }, {
      key: 'addTask',
      value: function addTask(task) {
        _tasks.set(this, Utils.addObjectToArray(_tasks.get(this), task, _Task2.default));
      }
    }, {
      key: 'getTask',
      value: function getTask(taskId) {
        return Utils.getObjectById(_tasks.get(this), taskId);
      }
    }, {
      key: 'getTasks',
      value: function getTasks() {
        return _tasks.get(this);
      }
    }, {
      key: 'setStatus',
      value: function setStatus(value) {
        switch (value) {
          case _QuestStatus2.default.COMPLETED:
          case _QuestStatus2.default.FAILED:
            _status.set(this, value);
          case _QuestStatus2.default.INCOMPLETE:
          default:
            _status.set(this, _QuestStatus2.default.INCOMPLETE);
            break;
        };
      }
    }, {
      key: 'getStatus',
      value: function getStatus() {
        return _status.get(this);
      }
    }]);

    return Quest;
  }(_BaseObject3.default);
}();
module.exports = Quest;

},{"../core/BaseObject":6,"./QuestStatus":13,"./Task":14}],13:[function(require,module,exports){
"use strict";

var INCOMPLETE = 'questIncomplete';
var COMPLETED = 'questCompleted';
var FAILED = 'questFailed';

exports.INCOMPLETE = INCOMPLETE;
exports.COMPLETED = COMPLETED;
exports.FAILED = FAILED;

},{}],14:[function(require,module,exports){
"use strict";

var _BaseObject2 = require("../core/BaseObject");

var _BaseObject3 = _interopRequireDefault(_BaseObject2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Task = function () {
  return function (_BaseObject) {
    _inherits(Task, _BaseObject);

    function Task(data) {
      _classCallCheck(this, Task);

      return _possibleConstructorReturn(this, (Task.__proto__ || Object.getPrototypeOf(Task)).call(this, data));
    }

    //to do


    return Task;
  }(_BaseObject3.default);
}();

module.exports = Task;

},{"../core/BaseObject":6}],15:[function(require,module,exports){
"use strict";

var _data = require('../data/data.json');

var _data2 = _interopRequireDefault(_data);

var _RPGSystem = require('./rpgs/RPGSystem');

var _RPGSystem2 = _interopRequireDefault(_RPGSystem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//import UniqueObject from './rpgs/core/UniqueObject';
//import BaseObject from './rpgs/core/BaseObject';


(function ($, window, document, undefined) {
  $(function () {
    //console.log(data);
    var rpg = new _RPGSystem2.default(_data2.default);
    console.log(rpg.serializeData());
    //let uo = new UniqueObject();
    //console.log(uo.getData());
  });
})(jQuery, window, document);

},{"../data/data.json":2,"./rpgs/RPGSystem":3}]},{},[15])


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQHJpc2luZ3N0YWNrL254LWNvbXBpbGUvY29tcGlsZXIuanMiLCJzcmMvZGF0YS9kYXRhLmpzb24iLCJzcmMvanMvcnBncy9SUEdTeXN0ZW0uanMiLCJzcmMvanMvcnBncy9hY3RvcnMvQWN0b3IuanMiLCJzcmMvanMvcnBncy9jb25kaXRpb25zL0NvbmRpdGlvbi5qcyIsInNyYy9qcy9ycGdzL2NvcmUvQmFzZU9iamVjdC5qcyIsInNyYy9qcy9ycGdzL2NvcmUvVW5pcXVlT2JqZWN0LmpzIiwic3JjL2pzL3JwZ3MvY29yZS9VdGlscy5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvQW5zd2VyLmpzIiwic3JjL2pzL3JwZ3MvZGlhbG9ncy9EaWFsb2cuanMiLCJzcmMvanMvcnBncy9kaWFsb2dzL1RhbGsuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3QuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3RTdGF0dXMuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvVGFzay5qcyIsInNyYy9qcy9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFLQTs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBTkE7QUFRQSxJQUFJLGNBQWMsU0FBZCxXQUFjLENBQVMsSUFBVCxFQUFjLE1BQWQs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USxHQUFSLENBQVksSUFBWixFQUFpQixzQkFBWSxVQUE3QjtBQUNBO0FBUEosU0FRQztBQUNGO0FBMUVIO0FBQUE7QUFBQSxrQ0E0RWM7QUFDVixlQUFPLFFBQVEsR0FBUixDQUFZLElBQVosQ0FBUDtBQUNEO0FBOUVIOztBQUFBO0FBQUE7QUFpRkQsQ0F2RlcsRUFBWjtBQXdGQSxPQUFPLE9BQVAsR0FBaUIsS0FBakI7OztBQy9GQTs7QUFDQSxJQUFNLGFBQWEsaUJBQW5CO0FBQ0EsSUFBTSxZQUFZLGdCQUFsQjtBQUNBLElBQU0sU0FBUyxhQUFmOztBQUVBLFFBQVEsVUFBUixHQUFxQixVQUFyQjtBQUNBLFFBQVEsU0FBUixHQUFvQixTQUFwQjtBQUNBLFFBQVEsTUFBUixHQUFpQixNQUFqQjs7O0FDUEE7O0FBQ0E7Ozs7Ozs7Ozs7OztBQUVBLElBQUksT0FBUSxZQUFVO0FBQ3BCO0FBQUE7O0FBQ0Usa0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUFBLHlHQUNWLElBRFU7QUFFakI7O0FBRUQ7OztBQUxGO0FBQUE7QUFPRCxDQVJVLEVBQVg7O0FBVUEsT0FBTyxPQUFQLEdBQWlCLElBQWpCOzs7QUNiQTs7QUFDQTs7OztBQUNBOzs7Ozs7QUFDQTtBQUNBOzs7QUFHQSxDQUFDLFVBQVUsQ0FBVixFQUFhLE1BQWIsRUFBcUIsUUFBckIsRUFBK0IsU0FBL0IsRUFBMEM7QUFDekMsSUFBRSxZQUFZO0FBQ1o7QUFDQSxRQUFJLE1BQU0sdUNBQVY7QUFDQSxZQUFRLEdBQVIsQ0FBWSxJQUFJLGFBQUosRUFBWjtBQUNBO0FBQ0E7QUFDRCxHQU5EO0FBUUQsQ0FURCxFQVNHLE1BVEgsRUFTVyxNQVRYLEVBU21CLFFBVG5CIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBpbGVDb2RlLFxuICBjb21waWxlRXhwcmVzc2lvblxufVxuXG5mdW5jdGlvbiBjb21waWxlRXhwcmVzc2lvbiAoc3JjLCBzYW5kYm94KSB7XG4gIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKVxuICB9XG4gIGlmICh0eXBlb2Ygc2FuZGJveCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKVxuICB9XG5cbiAgc2FuZGJveCA9IG5ldyBQcm94eShzYW5kYm94LCB7Z2V0LCBoYXN9KVxuICBjb25zdCBleHByZXNzaW9uID0gYFxuICB0cnkgeyB3aXRoIChzYW5kYm94KSB7IHJldHVybiAke3NyY30gfSB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvciB8fCBlcnIgaW5zdGFuY2VvZiBUeXBlRXJyb3IpKSB0aHJvdyBlcnJcbiAgfWBcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2FuZGJveCcsIGV4cHJlc3Npb24pLmJpbmQoc2FuZGJveCwgc2FuZGJveCkgLy8gZXNsaW50LWRpc2FibGUtbGluZVxufVxuXG5mdW5jdGlvbiBjb21waWxlQ29kZSAoc3JjLCBzYW5kYm94KSB7XG4gIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKVxuICB9XG4gIGlmICh0eXBlb2Ygc2FuZGJveCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKVxuICB9XG5cbiAgc2FuZGJveCA9IG5ldyBQcm94eShzYW5kYm94LCB7Z2V0LCBoYXN9KVxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzYW5kYm94JywgYHdpdGggKHNhbmRib3gpIHsgJHtzcmN9IH1gKS5iaW5kKHNhbmRib3gsIHNhbmRib3gpIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbn1cblxuZnVuY3Rpb24gZ2V0ICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgaWYgKGtleSA9PT0gU3ltYm9sLnVuc2NvcGFibGVzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpXG59XG5cbmZ1bmN0aW9uIGhhcyAodGFyZ2V0LCBrZXkpIHtcbiAgcmV0dXJuIHRydWVcbn1cbiIsIm1vZHVsZS5leHBvcnRzPXtcclxuICBcIm9iamVjdHNcIjpbXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIkFjdG9yXCIsXHJcbiAgICAgIFwidXVpZFwiOlwiYTFcIixcclxuICAgICAgXCJuYW1lXCI6XCJBZGFtXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIkFjdG9yXCIsXHJcbiAgICAgIFwidXVpZFwiOlwiYTJcIixcclxuICAgICAgXCJuYW1lXCI6XCJFdmFcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJjbGFzc1wiOlwiRGlhbG9nXCIsXHJcbiAgICAgIFwidXVpZFwiOlwiZDFcIixcclxuICAgICAgXCJzdGFydFRhbGtcIjpcInQxXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIkRpYWxvZ1wiLFxyXG4gICAgICBcInV1aWRcIjpcImQyXCIsXHJcbiAgICAgIFwic3RhcnRUYWxrXCI6XCJ0NFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImNsYXNzXCI6XCJUYWxrXCIsXHJcbiAgICAgIFwidXVpZFwiOlwidDFcIixcclxuICAgICAgXCJ0ZXh0XCI6XCJUYWxrIDFcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJjbGFzc1wiOlwiVGFsa1wiLFxyXG4gICAgICBcInV1aWRcIjpcInQyXCIsXHJcbiAgICAgIFwidGV4dFwiOlwiVGFsayAyXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIlRhbGtcIixcclxuICAgICAgXCJ1dWlkXCI6XCJ0M1wiLFxyXG4gICAgICBcInRleHRcIjpcIlRhbGsgM1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImNsYXNzXCI6XCJUYWxrXCIsXHJcbiAgICAgIFwidXVpZFwiOlwidDRcIixcclxuICAgICAgXCJ0ZXh0XCI6XCJUYWxrIDRcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJjbGFzc1wiOlwiVGFsa1wiLFxyXG4gICAgICBcInV1aWRcIjpcInQ1XCIsXHJcbiAgICAgIFwidGV4dFwiOlwiVGFsayA1XCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIlRhbGtcIixcclxuICAgICAgXCJ1dWlkXCI6XCJ0NlwiLFxyXG4gICAgICBcInRleHRcIjpcIlRhbGsgNlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImNsYXNzXCI6XCJBbnN3ZXJcIixcclxuICAgICAgXCJ1dWlkXCI6XCJhMVwiLFxyXG4gICAgICBcInRleHRcIjpcIkFuc3dlciAxXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIkFuc3dlclwiLFxyXG4gICAgICBcInV1aWRcIjpcImEyXCIsXHJcbiAgICAgIFwidGV4dFwiOlwiQW5zd2VyIDJcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyXCIsXHJcbiAgICAgIFwidXVpZFwiOlwiYTNcIixcclxuICAgICAgXCJ0ZXh0XCI6XCJBbnN3ZXIgM1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImNsYXNzXCI6XCJBbnN3ZXJcIixcclxuICAgICAgXCJ1dWlkXCI6XCJhNFwiLFxyXG4gICAgICBcInRleHRcIjpcIkFuc3dlciA0XCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiY2xhc3NcIjpcIkFuc3dlclwiLFxyXG4gICAgICBcInV1aWRcIjpcImE1XCIsXHJcbiAgICAgIFwidGV4dFwiOlwiQW5zd2VyIDVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyXCIsXHJcbiAgICAgIFwidXVpZFwiOlwiYTZcIixcclxuICAgICAgXCJ0ZXh0XCI6XCJBbnN3ZXIgNlwiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcImRlcGVuZGVuY2llc1wiOltcclxuICAgIHtcclxuICAgICAgXCJkZXBlbmRlbnRcIjpcImExXCIsXHJcbiAgICAgIFwiZGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcImRpYWxvZ1wiOiBcImQxXCJcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJkZXBlbmRlbnRcIjpcImEyXCIsXHJcbiAgICAgIFwiZGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcImRpYWxvZ1wiOiBcImQyXCJcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJkZXBlbmRlbnRcIjpcImQxXCIsXHJcbiAgICAgIFwiZGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcInRhbGtcIjpbXCJ0MVwiLFwidDJcIixcInQzXCJdXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZGVwZW5kZW50XCI6XCJkMlwiLFxyXG4gICAgICBcImRlcGVuZGVuY2llc1wiOiB7XHJcbiAgICAgICAgXCJ0YWxrXCI6W1widDRcIixcInQ1XCIsXCJ0NlwiXVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwidDFcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwiYW5zd2VyXCI6IFtcImExXCJdXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZGVwZW5kZW50XCI6XCJ0MlwiLFxyXG4gICAgICBcImRlcGVuZGVuY2llc1wiOiB7XHJcbiAgICAgICAgXCJhbnN3ZXJcIjogW1wiYTJcIl1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJkZXBlbmRlbnRcIjpcInQzXCIsXHJcbiAgICAgIFwiZGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcImFuc3dlclwiOiBbXCJhM1wiXVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwidDRcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwiYW5zd2VyXCI6IFtcImE0XCJdXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIFwiZGVwZW5kZW50XCI6XCJ0NVwiLFxyXG4gICAgICBcImRlcGVuZGVuY2llc1wiOiB7XHJcbiAgICAgICAgXCJhbnN3ZXJcIjogW1wiYTVcIl1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJkZXBlbmRlbnRcIjpcInQ2XCIsXHJcbiAgICAgIFwiZGVwZW5kZW5jaWVzXCI6IHtcclxuICAgICAgICBcImFuc3dlclwiOiBbXCJhNlwiXVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwiYTFcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwidGFsa1wiOlwidDJcIlxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwiYTJcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwidGFsa1wiOlwidDNcIlxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwiYTRcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwidGFsa1wiOlwidDRcIlxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcImRlcGVuZGVudFwiOlwiYTVcIixcclxuICAgICAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgICAgIFwidGFsa1wiOlwidDVcIlxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9jb3JlL1V0aWxzJztcclxuXHJcbmltcG9ydCBVbmlxdWVPYmplY3QgZnJvbSAnLi9jb3JlL1VuaXF1ZU9iamVjdCc7XHJcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vY29yZS9CYXNlT2JqZWN0JztcclxuaW1wb3J0IEFjdG9yIGZyb20gJy4vYWN0b3JzL0FjdG9yJztcclxuLy9pbXBvcnQgSW52ZW50b3J5IGZyb20gJy4vYWN0b3JzL0ludmVub3RyeSc7XHJcbmltcG9ydCBDb25kaXRpb24gZnJvbSAnLi9jb25kaXRpb25zL0NvbmRpdGlvbic7XHJcbmltcG9ydCBBbnN3ZXIgZnJvbSAnLi9kaWFsb2dzL0Fuc3dlcic7XHJcbmltcG9ydCBEaWFsb2cgZnJvbSAnLi9kaWFsb2dzL0RpYWxvZyc7XHJcbmltcG9ydCBUYWxrIGZyb20gJy4vZGlhbG9ncy9UYWxrJ1xyXG5pbXBvcnQgUXVlc3QgZnJvbSAnLi9xdWVzdHMvUXVlc3QnO1xyXG5pbXBvcnQgVGFzayBmcm9tICcuL3F1ZXN0cy9UYXNrJztcclxuXHJcbmxldCBub2RlRmFjdG9yeSA9IGZ1bmN0aW9uKHR5cGUscGFyYW1zKSB7XHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlICdBY3Rvcic6ICAgICByZXR1cm4gbmV3IEFjdG9yKHBhcmFtcyk7XHJcbiAgICBjYXNlICdDb25kaXRpb24nOiByZXR1cm4gbmV3IENvbmRpdGlvbihwYXJhbXMpO1xyXG4gICAgY2FzZSAnQW5zd2VyJzogICAgcmV0dXJuIG5ldyBBbnN3ZXIocGFyYW1zKTtcclxuICAgIGNhc2UgJ0RpYWxvZyc6ICAgIHJldHVybiBuZXcgRGlhbG9nKHBhcmFtcyk7XHJcbiAgICBjYXNlICdUYWxrJzogICAgICByZXR1cm4gbmV3IFRhbGsocGFyYW1zKTtcclxuICAgIGNhc2UgJ1F1ZXN0JzogICAgIHJldHVybiBuZXcgUXVlc3QocGFyYW1zKTtcclxuICAgIGNhc2UgJ1Rhc2snOiAgICAgIHJldHVybiBuZXcgVGFzayhwYXJhbXMpO1xyXG4gICAgZGVmYXVsdDogICAgICAgICAgcmV0dXJuIG5ldyBVbmlxdWVPYmplY3QocGFyYW1zKTtcclxuICB9XHJcbn07XHJcblxyXG5sZXQgZGF0YVBhcnNlciA9IGZ1bmN0aW9uKG9iamVjdHMsZGVwZW5kZW5jaWVzKSB7XHJcbiAgbGV0IF9vYmplY3RQb29sID0gb2JqZWN0cy5tYXAoKG9iaikgPT4gbm9kZUZhY3Rvcnkob2JqLmNsYXNzLG9iaikpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMCwgZElkLCBkZXBPYmosIHRvSW5qZWN0OyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBkSWQgPSBkZXBlbmRlbmNpZXNbaV1bJ2RlcGVuZGVudCddO1xyXG4gICAgZGVwT2JqID0gVXRpbHMuZ2V0T2JqZWN0QnlJZChfb2JqZWN0UG9vbCxkSWQpO1xyXG4gICAgdG9JbmplY3QgPSBkZXBlbmRlbmNpZXNbaV1bJ2RlcGVuZGVuY2llcyddO1xyXG4gICAgaWYoZGVwT2JqICYmIHRvSW5qZWN0KSB7XHJcbiAgICAgIHNldERlcGVuZGVuY2llcyhkZXBPYmosdG9JbmplY3QpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXREZXBlbmRlbmNpZXMoZGVwZW5kZW50LGRlcGVuZGVuY2llcykge1xyXG4gICAgZm9yIChsZXQgdHlwZSBpbiBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgaWYgKGRlcGVuZGVuY2llcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgICAgIGlmKGRlcGVuZGVuY2llc1t0eXBlXSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcGVuZGVuY2llc1t0eXBlXS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzZXREZXBlbmRlbmN5KGRlcGVuZGVudCx0eXBlLGRlcGVuZGVuY2llc1t0eXBlXVtpXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldERlcGVuZGVuY3koZGVwZW5kZW50LHR5cGUsZGVwZW5kZW5jaWVzW3R5cGVdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldERlcGVuZGVuY3koZGVwZW5kZW50LHR5cGUsdXVpZCkge1xyXG4gICAgbGV0IGRlcGVuZGVuY3kgPSBVdGlscy5nZXRPYmplY3RCeUlkKF9vYmplY3RQb29sLHV1aWQpO1xyXG4gICAgLy9jb25zb2xlLmxvZygnZGVwZW5kZW5jeScsZGVwZW5kZW5jeSk7XHJcbiAgICBpZihkZXBlbmRlbmN5KSB7XHJcbiAgICAgIGRlcGVuZGVudC5zZXREZXBlbmRlbmN5KHR5cGUsZGVwZW5kZW5jeSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gX29iamVjdFBvb2w7XHJcbn07XHJcblxyXG5sZXQgUlBHU3lzdGVtID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICBsZXQgX2RhdGEgPSBkYXRhfHx7b2JqZWN0czpbXSxkZXBlbmRlbmNpZXM6W119O1xyXG4gIGxldCBfb2JqZWN0cyA9IF9kYXRhLm9iamVjdHMgPyBPYmplY3QudmFsdWVzKF9kYXRhLm9iamVjdHMpIDogW107XHJcbiAgbGV0IF9kZXBlbmRlbmNpZXMgPSBfZGF0YS5kZXBlbmRlbmNpZXMgPyBPYmplY3QudmFsdWVzKF9kYXRhLmRlcGVuZGVuY2llcykgOiBbXTtcclxuICBsZXQgX29iamVjdFBvb2wgPSBkYXRhUGFyc2VyKF9vYmplY3RzLF9kZXBlbmRlbmNpZXMpO1xyXG5cclxuICBsZXQgX3JwZ1N5c3RlbSA9IHRoaXM7XHJcblxyXG4gIGxldCBfY3JlYXRlTm9kZSA9IChmdW5jdGlvbih0eXBlLHBhcmFtcyxwYXJlbnQpIHtcclxuICAgIGxldCBfcGFyZW50ID0gcGFyZW50fHxudWxsO1xyXG4gICAgbGV0IG9iaiA9IG5vZGVGYWN0b3J5KHR5cGUscGFyYW1zKTtcclxuXHJcbiAgICBpZihwYXJlbnQgIT09IG51bGwpe1xyXG4gICAgICAvL3BhcmVudC5nZXRPYmooKS5hZGRDaGlsZChvYmopO1xyXG4gICAgICAvL3NldERlcGVuZGVuY3kuLi5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF9vYmplY3RQb29sLnB1c2gob2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgX2NyZWF0b3IgPSB7XHJcblxyXG4gICAgICBzZXRQYXJhbTpmdW5jdGlvbihwYXJhbSx2YWx1ZSkge1xyXG4gICAgICAgIG9iai5zZXRQYXJhbShwYXJhbSx2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIF9jcmVhdG9yO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgYWRkTm9kZTogZnVuY3Rpb24obm9kZVR5cGUsbm9kZVBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiBfY3JlYXRlTm9kZShub2RlVHlwZSxub2RlUGFyYW1zLF9wYXJlbnQpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0T2JqOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgYmFjazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wYXJlbnR8fHRoaXMuZG9uZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZG9uZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9ycGdTeXN0ZW1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9jcmVhdG9yO1xyXG4gIH0pKCk7XHJcblxyXG4gIGxldCBfc2VyaWFsaXplRGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG9iamVjdHMgPSBbXTtcclxuICAgIGxldCBkZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBvYmosZGVwOyBpIDwgX29iamVjdFBvb2wubGVuZ3RoOyBpKyspIHtcclxuICAgICAgb2JqID0gX29iamVjdFBvb2xbaV0uZ2V0RGF0YSgpO1xyXG4gICAgICBkZXAgPSBfb2JqZWN0UG9vbFtpXS5nZXREZXBlbmRlbmNpZXMoKTtcclxuICAgICAgb2JqZWN0cy5wdXNoKG9iaik7XHJcbiAgICAgIGlmKE9iamVjdC5rZXlzKGRlcCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKGRlcCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7b2JqZWN0cyxkZXBlbmRlbmNpZXN9KTtcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2VyaWFsaXplRGF0YTogX3NlcmlhbGl6ZURhdGFcclxuICB9O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSUEdTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgVW5pcXVlT2JqZWN0IGZyb20gJy4uL2NvcmUvVW5pcXVlT2JqZWN0JztcclxuXHJcbmNvbnN0IERJQUxPRyA9ICdkaWFsb2cnO1xyXG5cclxubGV0IEFjdG9yID0gKGZ1bmN0aW9uKCkge1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF9uYW1lID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2RpYWxvZyA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgLy9sZXQgX2ludmVudG9yeSA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG5cclxuICByZXR1cm4gY2xhc3MgQWN0b3IgZXh0ZW5kcyBVbmlxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgICAgX25hbWUuc2V0KHRoaXMsZGF0YSA/IGRhdGEubmFtZSA6ICcnKTtcclxuICAgICAgX2RpYWxvZy5zZXQodGhpcyxudWxsKTtcclxuICAgICAgLy9faW52ZW50b3J5LnNldCh0aGlzLGRhdGEuaW52ZW50b3J5ID8gKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5uYW1lID0gdGhpcy5nZXROYW1lKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlcGVuZGVuY2llcygpIHtcclxuICAgICAgbGV0IGRlcGVuZGVuY2llcyA9IHN1cGVyLmdldERlcGVuZGVuY2llcygpO1xyXG4gICAgICBpZih0aGlzLmdldERpYWxvZygpKSB7XHJcbiAgICAgICAgZGVwZW5kZW5jaWVzW0RJQUxPR10gPSB0aGlzLmdldERpYWxvZygpLmdldElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXBlbmRlbmN5KHR5cGUsb2JqKSB7XHJcbiAgICAgIHN1cGVyLnNldERlcGVuZGVuY3kodHlwZSxvYmopO1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIERJQUxPRzpcclxuICAgICAgICAgIHRoaXMuc2V0RGlhbG9nKG9iaik7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TmFtZSh2YWx1ZSkge1xyXG4gICAgICBfbmFtZS5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgcmV0dXJuIF9uYW1lLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXREaWFsb2coZGlhbG9nKSB7XHJcbiAgICAgIF9kaWFsb2cuc2V0KHRoaXMsZGlhbG9nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREaWFsb2coKSB7XHJcbiAgICAgIHJldHVybiBfZGlhbG9nLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKnNldEludmVudG9yeShpbnZlbnRvcnkpIHtcclxuICAgICAgX2ludmVudG9yeS5zZXQodGhpcyxpbnZlbnRvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEludmVudG9yeSgpIHtcclxuICAgICAgcmV0dXJuIF9pbnZlbnRvcnkuZ2V0KHRoaXMpO1xyXG4gICAgfSovXHJcblxyXG4gIH1cclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWN0b3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IFVuaXF1ZU9iamVjdCBmcm9tICcuLi9jb3JlL1VuaXF1ZU9iamVjdCc7XHJcbmltcG9ydCBjb21waWxlciBmcm9tICdAcmlzaW5nc3RhY2svbngtY29tcGlsZSc7XHJcblxyXG5sZXQgQ29uZGl0aW9uID0gKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IF9sYWJlbCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9jb2RlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2NvbXBpbGVkID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3NhbmRib3ggPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQ29uZGl0aW9uIGV4dGVuZHMgVW5pcXVlT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsc2FuZGJveCkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgICAgX2xhYmVsLnNldCh0aGlzLGRhdGEgPyBkYXRhLmxhYmVsIDogJycpO1xyXG4gICAgICBfY29kZS5zZXQodGhpcyxkYXRhID8gZGF0YS5jb2RlIDogJ3JldHVybiB0cnVlJyk7XHJcbiAgICAgIF9zYW5kYm94LnNldCh0aGlzLHNhbmRib3h8fHt9KTtcclxuICAgICAgX2NvbXBpbGVkLnNldCh0aGlzLGNvbXBpbGVyLmNvbXBpbGVFeHByZXNzaW9uKF9jb2RlLmdldCh0aGlzKSwgX3NhbmRib3guZ2V0KHRoaXMpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGFiZWwodGV4dCkge1xyXG4gICAgICBfbGFiZWwuc2V0KHRoaXMsdGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFiZWwoKSB7XHJcbiAgICAgIHJldHVybiBfbGFiZWwuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENvZGUoY29kZSkge1xyXG4gICAgICBfY29kZS5zZXQodGhpcyxjb2RlKTtcclxuICAgICAgX2NvbXBpbGVkLnNldCh0aGlzLGNvbXBpbGVyLmNvbXBpbGVFeHByZXNzaW9uKF9jb2RlLmdldCh0aGlzKSwgX3NhbmRib3guZ2V0KHRoaXMpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29kZSgpIHtcclxuICAgICAgcmV0dXJuIF9jb2RlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVjaygpIHtcclxuICAgICAgcmV0dXJuIF9jb21waWxlZC5nZXQodGhpcykoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5sYWJlbCA9IHRoaXMuZ2V0TGFiZWwoKTtcclxuICAgICAgZGF0YS5jb2RlID0gdGhpcy5nZXRDb2RlKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG59KSgpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBVbmlxdWVPYmplY3QgZnJvbSAnLi9VbmlxdWVPYmplY3QnO1xyXG5cclxuY29uc3QgVklTSUJMRSA9ICd2aXNpYmxlJztcclxuY29uc3QgQUNUSVZFID0gJ2FjdGl2ZSc7XHJcblxyXG5sZXQgQmFzZU9iamVjdCA9IChmdW5jdGlvbigpIHtcclxuICAvL1dlYWsgbWFwcyBhcmUgbmV3IGZlYXR1cmUgdG8gSmF2YVNjcmlwdC4gV2UgY2FuIHN0b3JlIHByaXZhdGVcclxuICAvL29iamVjdCBwcm9wZXJ0aWVzIGluIGtleS92YWx1ZSBwYWlycyB1c2luZyBvdXIgaW5zdGFuY2UgYXMgdGhlIGtleSxcclxuICAvL2FuZCBvdXIgY2xhc3MgY2FuIGNhcHR1cmUgdGhvc2Uga2V5L3ZhbHVlIG1hcHMgaW4gYSBjbG9zdXJlLlxyXG4gIGxldCBfdmlzaWJsZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9hY3RpdmUgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQmFzZU9iamVjdCBleHRlbmRzIFVuaXF1ZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICBfdmlzaWJsZS5zZXQodGhpcywgbnVsbCk7XHJcbiAgICAgIF9hY3RpdmUuc2V0KHRoaXMsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlcGVuZGVuY2llcygpIHtcclxuICAgICAgbGV0IGRlcGVuZGVuY2llcyA9IHt9O1xyXG4gICAgICBpZih0aGlzLmdldFZpc2libGVDb25kaXRpb24oKSkge1xyXG4gICAgICAgIGRlcGVuZGVuY2llc1tWSVNJQkxFXSA9IHRoaXMuZ2V0VmlzaWJsZUNvbmRpdGlvbigpLmdldElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5nZXRBY3RpdmVDb25kaXRpb24oKSkge1xyXG4gICAgICAgIGRlcGVuZGVuY2llc1tBQ1RJVkVdID0gdGhpcy5nZXRBY3RpdmVDb25kaXRpb24oKS5nZXRJZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGVwZW5kZW5jeSh0eXBlLG9iaikge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIFZJU0lCTEU6XHJcbiAgICAgICAgICB0aGlzLnNldFZpc2libGVDb25kaXRpb24ob2JqKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQUNUSVZFOlxyXG4gICAgICAgICAgdGhpcy5zZXRBY3RpdmVDb25kaXRpb24ob2JqKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBzZXRzIGNvbmRpdGlvbiB0aGF0IG11c3QgYmUgbWV0IGluIG9yZGVyIHRvIG5vZGUgd2FzIHZpc2libGUuXHJcbiAgICAgKiBAcGFyYW0ge0NvbmRpdGlvbn0gY29uZGl0aW9uIEluc3RhbmNlIG9mIENvbmRpdGlvbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgc2V0VmlzaWJsZUNvbmRpdGlvbihjb25kaXRpb24pIHtcclxuICAgICAgX3Zpc2libGUuc2V0KHRoaXMsQmFzZU9iamVjdC5pc0NvbmRpdGlvbkluc3RhbmNlKGNvbmRpdGlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpc2libGVDb25kaXRpb24oKSB7XHJcbiAgICAgIHJldHVybiBfdmlzaWJsZS5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGJvb2xlYW4gdGhhdCByZWZsZWN0cyB2aXNpYmxpbGl0eSBzdGF0ZSBvZiBub2RlLlxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVmlzaWJpbGl0eSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBpc1Zpc2libGUoKSB7XHJcbiAgICAgIHJldHVybiBCYXNlT2JqZWN0LmNoZWNrQ29uZGl0aW9uKF92aXNpYmxlLmdldCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2Qgc2V0cyBjb25kaXRpb24gdGhhdCBtdXN0IGJlIG1ldCBpbiBvcmRlciB0byBub2RlIHdhcyBhY3RpdmUuXHJcbiAgICAgKiBAcGFyYW0ge0NvbmRpdGlvbn0gY29uZGl0aW9uIEluc3RhbmNlIG9mIENvbmRpdGlvbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgc2V0QWN0aXZlQ29uZGl0aW9uKGNvbmRpdGlvbikge1xyXG4gICAgICBfYWN0aXZlLnNldCh0aGlzLEJhc2VPYmplY3QuaXNDb25kaXRpb25JbnN0YW5jZShjb25kaXRpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3RpdmVDb25kaXRpb24oKSB7XHJcbiAgICAgIHJldHVybiBfYWN0aXZlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYm9vbGVhbiB0aGF0IHJlZmxlY3RzIGFjdGl2aXR5IHN0YXRlIG9mIG5vZGUuXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBBY3RpdmUgc3RhdGVcclxuICAgICAqL1xyXG4gICAgaXNBY3RpdmUoKSB7XHJcbiAgICAgIHJldHVybiBCYXNlT2JqZWN0LmNoZWNrQ29uZGl0aW9uKF9hY3RpdmUuZ2V0KHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2hlY2tDb25kaXRpb24oY29uZGl0aW9uKSB7XHJcbiAgICAgIGlmKGNvbmRpdGlvbiA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb24uY2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaXNDb25kaXRpb25JbnN0YW5jZShvYmopIHtcclxuICAgICAgaWYodHlwZW9mIG9iaiAhPT0gQ29uZGl0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyB0eXBlIG9mIG9iamVjdCBwYXNzZWQuIEV4cGVjdGVkIFwiQ29uZGl0aW9uXCIgb2JqZWN0LicpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBCYXNlT2JqZWN0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IHtVVUlEfSBmcm9tICcuL1V0aWxzJztcclxuXHJcbmxldCBVbmlxdWVPYmplY3QgPSAoZnVuY3Rpb24oKXtcclxuICAvL1dlYWsgbWFwcyBhcmUgbmV3IGZlYXR1cmUgdG8gSmF2YVNjcmlwdC4gV2UgY2FuIHN0b3JlIHByaXZhdGVcclxuICAvL29iamVjdCBwcm9wZXJ0aWVzIGluIGtleS92YWx1ZSBwYWlycyB1c2luZyBvdXIgaW5zdGFuY2UgYXMgdGhlIGtleSxcclxuICAvL2FuZCBvdXIgY2xhc3MgY2FuIGNhcHR1cmUgdGhvc2Uga2V5L3ZhbHVlIG1hcHMgaW4gYSBjbG9zdXJlLlxyXG4gIGxldCBfdXVpZCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBVbmlxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAvL0J5IGRlZmF1bHQgd2UgYXNzaWduIFVuaXZlcnNhbGx5IFVuaXF1ZSBJRFxyXG4gICAgICBfdXVpZC5zZXQodGhpcyxkYXRhID8gZGF0YS51dWlkIDogVVVJRC5nZW5lcmF0ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJZCh2YWx1ZSkge1xyXG4gICAgICBfdXVpZC5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWQoKSB7XHJcbiAgICAgIHJldHVybiBfdXVpZC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFzczp0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXHJcbiAgICAgICAgdXVpZDp0aGlzLmdldElkKClcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREZXBlbmRlbmNpZXMoKSB7XHJcbiAgICAgIGxldCBkZXBlbmRlbmNpZXMgPSB7fTtcclxuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXBlbmRlbmN5KHR5cGUsb2JqKSB7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBVbmlxdWVPYmplY3Q7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEZhc3QgVVVJRCBnZW5lcmF0b3IsIFJGQzQxMjIgdmVyc2lvbiA0IGNvbXBsaWFudC5cclxuICogQGF1dGhvciBKZWZmIFdhcmQgKGpjd2FyZC5jb20pLlxyXG4gKiBAbGljZW5zZSBNSVQgbGljZW5zZVxyXG4gKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjE5NjMxMzYjMjE5NjMxMzZcclxuICoqL1xyXG52YXIgVVVJRCA9IChmdW5jdGlvbigpIHtcclxuICB2YXIgc2VsZiA9IHt9O1xyXG4gIHZhciBsdXQgPSBbXTsgZm9yICh2YXIgaT0wOyBpPDI1NjsgaSsrKSB7IGx1dFtpXSA9IChpPDE2PycwJzonJykrKGkpLnRvU3RyaW5nKDE2KTsgfVxyXG4gIHNlbGYuZ2VuZXJhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBkMCA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgdmFyIGQxID0gTWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7XHJcbiAgICB2YXIgZDIgPSBNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtcclxuICAgIHZhciBkMyA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgcmV0dXJuIGx1dFtkMCYweGZmXStsdXRbZDA+PjgmMHhmZl0rbHV0W2QwPj4xNiYweGZmXStsdXRbZDA+PjI0JjB4ZmZdKyctJytcclxuICAgICAgbHV0W2QxJjB4ZmZdK2x1dFtkMT4+OCYweGZmXSsnLScrbHV0W2QxPj4xNiYweDBmfDB4NDBdK2x1dFtkMT4+MjQmMHhmZl0rJy0nK1xyXG4gICAgICBsdXRbZDImMHgzZnwweDgwXStsdXRbZDI+PjgmMHhmZl0rJy0nK2x1dFtkMj4+MTYmMHhmZl0rbHV0W2QyPj4yNCYweGZmXStcclxuICAgICAgbHV0W2QzJjB4ZmZdK2x1dFtkMz4+OCYweGZmXStsdXRbZDM+PjE2JjB4ZmZdK2x1dFtkMz4+MjQmMHhmZl07XHJcbiAgfVxyXG4gIHJldHVybiBzZWxmO1xyXG59KSgpO1xyXG5cclxuZXhwb3J0cy5VVUlEID0gVVVJRDtcclxuXHJcbmxldCBpbmRleE9mT2JqZWN0ID0gZnVuY3Rpb24oYXJyYXksb2JqKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYoYXJyYXlbaV0gPT09IG9iaikgcmV0dXJuIGk7XHJcbiAgfVxyXG4gIHJldHVybiAtMTtcclxufTtcclxuXHJcbmV4cG9ydHMuaW5kZXhPZk9iamVjdCA9IGluZGV4T2ZPYmplY3Q7XHJcblxyXG5cclxuZXhwb3J0cy5nZXRPYmplY3RCeUlkID0gZnVuY3Rpb24oYXJyYXksaWQpIHtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZihhcnJheVtpXS5nZXRJZCgpID09PSBpZCkgcmV0dXJuIGFycmF5W2ldO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmxldCBnZXRJbmRleEJ5SWQgPSBmdW5jdGlvbihhcnJheSxpZCkge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmKGFycmF5W2ldLmdldElkKCkgPT09IGlkKSByZXR1cm4gaTtcclxuICB9XHJcbiAgcmV0dXJuIC0xO1xyXG59O1xyXG5leHBvcnRzLmdldEluZGV4QnlJZCA9IGdldEluZGV4QnlJZDtcclxuXHJcbmV4cG9ydHMuYWRkT2JqZWN0VG9BcnJheSA9IGZ1bmN0aW9uKGFycmF5LG9iaixleHBlY3RlZFR5cGUpIHtcclxuICBpZihleHBlY3RlZFR5cGUgIT09IHVuZGVmaW5lZCAmJiBleHBlY3RlZFR5cGUgIT09IG51bGwpIHtcclxuICAgIGlmKGV4cGVjdGVkVHlwZS5pc1Byb3RvdHlwZU9mKG9iaikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyB0eXBlIG9mIG9iamVjdCBwYXNzZWQuIEV4cGVjdGVkICdcclxuICAgICAgK2V4cGVjdGVkVHlwZS5jb25zdHJ1Y3Rvci5uYW1lKycgb2JqZWN0LicpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZihpbmRleE9mT2JqZWN0KGFycmF5LG9iaikgPT09IC0xKSB7XHJcbiAgICBhcnJheS5wdXNoKG9iaik7XHJcbiAgfVxyXG4gIHJldHVybiBhcnJheTtcclxufTtcclxuXHJcbmV4cG9ydHMucmVtb3ZlT2JqZWN0QnlJZCA9IGZ1bmN0aW9uKGFycmF5LGlkKSB7XHJcbiAgbGV0IGluZGV4ID0gZ2V0SW5kZXhCeUlkKGFycmF5LGlkKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGFycmF5LnNwbGljZShpbmRleCwxKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59XHJcblxyXG5leHBvcnRzLnJlbW92ZU9iamVjdEZyb21BcnJheSA9IGZ1bmN0aW9uKGFycmF5LG9iaikge1xyXG4gIGxldCBpbmRleCA9IGluZGV4T2ZPYmplY3QoYXJyYXksb2JqKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGFycmF5LnNwbGljZShpbmRleCwxKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vY29yZS9CYXNlT2JqZWN0JztcclxuXHJcbmNvbnN0IFRBTEsgPSAndGFsayc7XHJcblxyXG5sZXQgQW5zd2VyID0gKGZ1bmN0aW9uKCkge1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF90ZXh0ID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3RhbGsgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQW5zd2VyIGV4dGVuZHMgQmFzZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyxkYXRhID8gZGF0YS50ZXh0IDogJycpO1xyXG4gICAgICBfdGFsay5zZXQodGhpcyxkYXRhID8gZGF0YS50YWxrIDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnRleHQgPSB0aGlzLmdldFRleHQoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGVwZW5kZW5jaWVzKCkge1xyXG4gICAgICBsZXQgZGVwZW5kZW5jaWVzID0gc3VwZXIuZ2V0RGVwZW5kZW5jaWVzKCk7XHJcbiAgICAgIGlmKHRoaXMuZ2V0VGFsaygpKSB7XHJcbiAgICAgICAgZGVwZW5kZW5jaWVzW1RBTEtdID0gdGhpcy5nZXRUYWxrKCkuZ2V0SWQoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlcGVuZGVuY3kodHlwZSxvYmopIHtcclxuICAgICAgc3VwZXIuc2V0RGVwZW5kZW5jeSh0eXBlLG9iaik7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgVEFMSzpcclxuICAgICAgICAgIHRoaXMuc2V0VGFsayhvYmopO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHQodmFsdWUpIHtcclxuICAgICAgX3RleHQuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHQoKSB7XHJcbiAgICAgIHJldHVybiBfdGV4dC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGFsayh0YWxrKSB7XHJcbiAgICAgIF90YWxrLnNldCh0aGlzLHRhbGspO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhbGsoKSB7XHJcbiAgICAgIHJldHVybiBfdGFsay5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQW5zd2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IFVuaXF1ZU9iamVjdCBmcm9tICcuLi9jb3JlL1VuaXF1ZU9iamVjdCc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi9jb3JlL1V0aWxzJztcclxuaW1wb3J0IFRhbGsgZnJvbSAnLi9UYWxrJztcclxuXHJcbmNvbnN0IFRBTEsgPSAndGFsayc7XHJcblxyXG5sZXQgRGlhbG9nID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBfc3RhcnQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfdGFsa3MgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgRGlhbG9nIGV4dGVuZHMgVW5pcXVlT2JqZWN0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICBfc3RhcnQuc2V0KHRoaXMsZGF0YSA/IGRhdGEuc3RhcnRUYWxrIDogJycpO1xyXG4gICAgICBfdGFsa3Muc2V0KHRoaXMsW10pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnN0YXJ0VGFsayA9IHRoaXMuZ2V0U3RhcnRUYWxrKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlcGVuZGVuY2llcygpIHtcclxuICAgICAgbGV0IGRlcGVuZGVuY2llcyA9IHt9O1xyXG4gICAgICBpZih0aGlzLmdldFRhbGtzKCkpIHtcclxuICAgICAgICBkZXBlbmRlbmNpZXNbVEFMS10gPSB0aGlzLmdldFRhbGtzKCkubWFwKCh0KSA9PiB0LmdldElkKCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGVwZW5kZW5jeSh0eXBlLG9iaikge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIFRBTEs6XHJcbiAgICAgICAgICB0aGlzLmFkZFRhbGsob2JqKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUYWxrKHRhbGspIHtcclxuICAgICAgX3RhbGtzLnNldCh0aGlzLFV0aWxzLmFkZE9iamVjdFRvQXJyYXkoX3RhbGtzLmdldCh0aGlzKSx0YWxrLCBUYWxrKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlVGFsayh0YWxrSWQpIHtcclxuICAgICAgVXRpbHMucmVtb3ZlT2JqZWN0QnlJZChfdGFsa3MuZ2V0KHRoaXMpLHRhbGtJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFsayh0YWxrSWQpIHtcclxuICAgICAgcmV0dXJuIFV0aWxzLmdldE9iamVjdEJ5SWQoX3RhbGtzLHRhbGtJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFsa3MoKSB7XHJcbiAgICAgIHJldHVybiBfdGFsa3MuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXJ0VGFsayh0YWxrSWQpIHtcclxuICAgICAgX3N0YXJ0LnNldCh0aGlzLHRhbGtJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhcnRUYWxrKCkge1xyXG4gICAgICByZXR1cm4gX3N0YXJ0LmdldCh0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IERpYWxvZztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi9jb3JlL1V0aWxzJztcclxuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vY29yZS9CYXNlT2JqZWN0JztcclxuaW1wb3J0IEFuc3dlciBmcm9tICcuL0Fuc3dlcic7XHJcblxyXG5jb25zdCBBTlNXRVIgPSAnYW5zd2VyJztcclxuXHJcbmxldCBUYWxrID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICBsZXQgX3RleHQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfYW5zd2VycyA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBUYWxrIGV4dGVuZHMgQmFzZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyxkYXRhID8gZGF0YS50ZXh0IDogJycpO1xyXG4gICAgICBfYW5zd2Vycy5zZXQodGhpcyxbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREZXBlbmRlbmNpZXMoKSB7XHJcbiAgICAgIGxldCBkZXBlbmRlbmNpZXMgPSBzdXBlci5nZXREZXBlbmRlbmNpZXMoKTtcclxuICAgICAgaWYodGhpcy5nZXRBbnN3ZXJzKCkpIHtcclxuICAgICAgICBkZXBlbmRlbmNpZXNbQU5TV0VSXSA9IHRoaXMuZ2V0QW5zd2VycygpLm1hcCgoYSkgPT4gYS5nZXRJZCgpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlcGVuZGVuY3kodHlwZSxvYmopIHtcclxuICAgICAgc3VwZXIuc2V0RGVwZW5kZW5jeSh0eXBlLG9iaik7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgQU5TV0VSOlxyXG4gICAgICAgICAgdGhpcy5hZGRBbnN3ZXIob2JqKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0KHZhbHVlKSB7XHJcbiAgICAgIF90ZXh0LnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0KCkge1xyXG4gICAgICByZXR1cm4gX3RleHQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEFuc3dlcihhbnN3ZXIpIHtcclxuICAgICAgX2Fuc3dlcnMuc2V0KHRoaXMsVXRpbHMuYWRkT2JqZWN0VG9BcnJheShfYW5zd2Vycy5nZXQodGhpcyksYW5zd2VyLCBBbnN3ZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBbnN3ZXIoYW5zd2VySWQpIHtcclxuICAgICAgVXRpbHMucmVtb3ZlT2JqZWN0QnlJZChfYW5zd2Vycy5nZXQodGhpcyksYW5zd2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFuc3dlcihhbnN3ZXJJZCkge1xyXG4gICAgICByZXR1cm4gVXRpbHMuZ2V0T2JqZWN0QnlJZChfYW5zd2Vycy5nZXQodGhpcyksYW5zd2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFuc3dlcnMoKSB7XHJcbiAgICAgIHJldHVybiBfYW5zd2Vycy5nZXQodGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBUYWxrO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vY29yZS9CYXNlT2JqZWN0JztcclxuaW1wb3J0IFF1ZXN0U3RhdHVzIGZyb20gJy4vUXVlc3RTdGF0dXMnO1xyXG5pbXBvcnQgVGFzayBmcm9tICcuL1Rhc2snO1xyXG5cclxuY29uc3QgVEFTSyA9ICd0YXNrJztcclxuXHJcbmxldCBRdWVzdCA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgX3RpdGxlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2Rlc2NyaXB0aW9uID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3N0YXR1cyA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF90YXNrcyA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBRdWVzdCBleHRlbmRzIEJhc2VPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgICAgX3RpdGxlLnNldCh0aGlzLGRhdGEgPyBkYXRhLnRpdGxlIDogJycpO1xyXG4gICAgICBfZGVzY3JpcHRpb24uc2V0KHRoaXMsZGF0YSA/IGRhdGEuZGVzY3JpcHRpb24gOiAnJyk7XHJcbiAgICAgIF9zdGF0dXMuc2V0KHRoaXMsZGF0YSA/IGRhdGEuc3RhdHVzIDogUXVlc3RTdGF0dXMuSU5DT01QTEVURSk7XHJcbiAgICAgIF90YXNrcy5zZXQodGhpcyxbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB0aGlzLmdldERlc2NyaXB0aW9uKCk7XHJcbiAgICAgIGRhdGEuc3RhdHVzID0gdGhpcy5nZXRTdGF0dXMoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGVwZW5kZW5jaWVzKCkge1xyXG4gICAgICBsZXQgZGVwZW5kZW5jaWVzID0gc3VwZXIuZ2V0RGVwZW5kZW5jaWVzKCk7XHJcbiAgICAgIGlmKHRoaXMuZ2V0VGFza3MoKSkge1xyXG4gICAgICAgIGRlcGVuZGVuY2llc1tUQVNLXSA9IHRoaXMuZ2V0VGFza3MoKS5tYXAoKHQpID0+IHQuZ2V0SWQoKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXBlbmRlbmN5KHR5cGUsb2JqKSB7XHJcbiAgICAgIHN1cGVyLnNldERlcGVuZGVuY3kodHlwZSxvYmopO1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIFRBU0s6XHJcbiAgICAgICAgICB0aGlzLnNldFRhc2sob2JqKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaXRsZSh2YWx1ZSkge1xyXG4gICAgICBfdGl0bGUuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpdGxlKCkge1xyXG4gICAgICByZXR1cm4gX3RpdGxlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xyXG4gICAgICBfZGVzY3JpcHRpb24uc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlc2NyaXB0aW9uKCkge1xyXG4gICAgICByZXR1cm4gX2Rlc2NyaXB0aW9uLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUYXNrKHRhc2spIHtcclxuICAgICAgX3Rhc2tzLnNldCh0aGlzLFV0aWxzLmFkZE9iamVjdFRvQXJyYXkoX3Rhc2tzLmdldCh0aGlzKSx0YXNrLCBUYXNrKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFzayh0YXNrSWQpIHtcclxuICAgICAgcmV0dXJuIFV0aWxzLmdldE9iamVjdEJ5SWQoX3Rhc2tzLmdldCh0aGlzKSx0YXNrSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhc2tzKCkge1xyXG4gICAgICByZXR1cm4gX3Rhc2tzLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdGF0dXModmFsdWUpIHtcclxuICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgIGNhc2UgUXVlc3RTdGF0dXMuQ09NUExFVEVEOlxyXG4gICAgICAgIGNhc2UgUXVlc3RTdGF0dXMuRkFJTEVEOlxyXG4gICAgICAgICAgX3N0YXR1cy5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICAgICAgY2FzZSBRdWVzdFN0YXR1cy5JTkNPTVBMRVRFOlxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBfc3RhdHVzLnNldCh0aGlzLFF1ZXN0U3RhdHVzLklOQ09NUExFVEUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhdHVzKCkge1xyXG4gICAgICByZXR1cm4gX3N0YXR1cy5nZXQodGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gUXVlc3Q7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5jb25zdCBJTkNPTVBMRVRFID0gJ3F1ZXN0SW5jb21wbGV0ZSc7XHJcbmNvbnN0IENPTVBMRVRFRCA9ICdxdWVzdENvbXBsZXRlZCc7XHJcbmNvbnN0IEZBSUxFRCA9ICdxdWVzdEZhaWxlZCc7XHJcblxyXG5leHBvcnRzLklOQ09NUExFVEUgPSBJTkNPTVBMRVRFO1xyXG5leHBvcnRzLkNPTVBMRVRFRCA9IENPTVBMRVRFRDtcclxuZXhwb3J0cy5GQUlMRUQgPSBGQUlMRUQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9jb3JlL0Jhc2VPYmplY3QnO1xyXG5cclxubGV0IFRhc2sgPSAoZnVuY3Rpb24oKXtcclxuICByZXR1cm4gY2xhc3MgVGFzayBleHRlbmRzIEJhc2VPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvL3RvIGRvXHJcbiAgfTtcclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGFzaztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBkYXRhIGZyb20gJy4uL2RhdGEvZGF0YS5qc29uJztcclxuaW1wb3J0IFJQR1N5c3RlbSBmcm9tICcuL3JwZ3MvUlBHU3lzdGVtJztcclxuLy9pbXBvcnQgVW5pcXVlT2JqZWN0IGZyb20gJy4vcnBncy9jb3JlL1VuaXF1ZU9iamVjdCc7XHJcbi8vaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9ycGdzL2NvcmUvQmFzZU9iamVjdCc7XHJcblxyXG5cclxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuICAkKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICBsZXQgcnBnID0gbmV3IFJQR1N5c3RlbShkYXRhKTtcclxuICAgIGNvbnNvbGUubG9nKHJwZy5zZXJpYWxpemVEYXRhKCkpO1xyXG4gICAgLy9sZXQgdW8gPSBuZXcgVW5pcXVlT2JqZWN0KCk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHVvLmdldERhdGEoKSk7XHJcbiAgfSk7XHJcblxyXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXX0=
