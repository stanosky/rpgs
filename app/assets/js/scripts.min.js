/*!
 * rpgs
 * RPG System
 * https://github.com/stanosky/rpgs
 * @author Krzysztof Stano
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict'

module.exports = {
  compileCode,
  compileExpression
}

function compileExpression (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  const expression = `
  try { with (sandbox) { return ${src} } } catch (err) {
    if (!(err instanceof ReferenceError || err instanceof TypeError)) throw err
  }`
  return new Function('sandbox', expression).bind(sandbox, sandbox) // eslint-disable-line
}

function compileCode (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  return new Function('sandbox', `with (sandbox) { ${src} }`).bind(sandbox, sandbox) // eslint-disable-line
}

function get (target, key, receiver) {
  if (key === Symbol.unscopables) {
    return undefined
  }
  return Reflect.get(target, key, receiver)
}

function has (target, key) {
  return true
}

},{}],2:[function(require,module,exports){
module.exports={
    "actors":[ {
        "class":"ActorNode",
        "uuid":"act1",
        "input": {
            "dialog": ["4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e"]
        }
        ,
        "name":"Adam"
    }
    ],
    "conditions":[ {
        "class":"ConditionNode",
        "uuid":"cond1",
        "output": {
            "visibility": ["a086a9cb-3aaa-4cdb-abcc-9955c54673db"]
        }
        ,
        "label":"",
        "code":"\n        (function(){\n          alert(\"Condition test!\");\n          //return true;\n        })();\n      "
    }
    ],
    "dialogs":[ {
        "class":"DialogNode",
        "uuid":"dlg1",
        "input": {}
        ,
        "output": {
            "dialog": ["4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e"]
        }
        ,
        "children":["tlk0",
        "tlk1",
        "tlk2",
        "tlk3"],
        "startTalk":"tlk0"
    }
    ],
    "links":[ {
        "class": "LinkNode", "uuid": "4fd7ea56-94c3-4949-ba71-f9f6ecb7ef9e", "input": "act1", "output": "dlg1", "type": "dialog"
    }
    ,
    {
        "class": "LinkNode", "uuid": "a086a9cb-3aaa-4cdb-abcc-9955c54673db", "input": "tlk0ans1", "output": "cond1", "type": "visibility"
    }
    ,
    {
        "class": "LinkNode", "uuid": "e52ed77b-515b-4c15-9d50-d43fca635b48", "input": "tlk1", "output": "tlk0ans1", "type": "goto"
    }
    ,
    {
        "class": "LinkNode", "uuid": "c09982b8-5f1f-47c5-b05d-e2ec56187216", "input": "tlk2", "output": "tlk0ans2", "type": "goto"
    }
    ,
    {
        "class": "LinkNode", "uuid": "3d66f4f8-dcd8-486c-bf8d-433531f108b1", "input": "tlk3", "output": "tlk0ans3", "type": "goto"
    }
    ],
    "talks":[ {
        "class":"TalkNode",
        "uuid":"tlk0",
        "input": {}
        ,
        "children": ["tlk0ans1", "tlk0ans2", "tlk0ans3"], "text": "This is talk 0."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk1",
        "input": {
            "goto": ["e52ed77b-515b-4c15-9d50-d43fca635b48"]
        }
        ,
        "children":["tlk1ans1"],
        "text":"This is talk 1."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk2",
        "input": {
            "goto": ["c09982b8-5f1f-47c5-b05d-e2ec56187216"]
        }
        ,
        "children":["tlk2ans1"],
        "text":"This is talk 2."
    }
    ,
    {
        "class":"TalkNode",
        "uuid":"tlk3",
        "input": {
            "goto": ["3d66f4f8-dcd8-486c-bf8d-433531f108b1"]
        }
        ,
        "children":["tlk3ans1"],
        "text":"This is talk 3."
    }
    ],
    "answers":[ {
        "class":"AnswerNode",
        "uuid":"tlk0ans1",
        "input": {
            "visibility": ["a086a9cb-3aaa-4cdb-abcc-9955c54673db"]
        }
        ,
        "output": {
            "goto": ["e52ed77b-515b-4c15-9d50-d43fca635b48"]
        }
        ,
        "text":"Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk0ans2",
        "input": {}
        ,
        "output": {
            "goto": ["c09982b8-5f1f-47c5-b05d-e2ec56187216"]
        }
        ,
        "text":"Answer2"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk0ans3",
        "input": {}
        ,
        "output": {
            "goto": ["3d66f4f8-dcd8-486c-bf8d-433531f108b1"]
        }
        ,
        "text":"Answer3"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk1ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk2ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ,
    {
        "class":"AnswerNode",
        "uuid":"tlk3ans1",
        "input": {}
        ,
        "output": {}
        ,
        "text": "Answer1"
    }
    ]
}

},{}],3:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };
//import InventoryNode  from './actors/InvenotryNode';


var _Utils = require('./core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _ErrorHandler = require('./core/ErrorHandler');

var _ErrorHandler2 = _interopRequireDefault(_ErrorHandler);

var _ErrorCode = require('./core/ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

var _BaseNode = require('./core/BaseNode');

var _BaseNode2 = _interopRequireDefault(_BaseNode);

var _LinkNode = require('./core/LinkNode');

var _LinkNode2 = _interopRequireDefault(_LinkNode);

var _ActorNode = require('./actors/ActorNode');

var _ActorNode2 = _interopRequireDefault(_ActorNode);

var _ConditionNode = require('./conditions/ConditionNode');

var _ConditionNode2 = _interopRequireDefault(_ConditionNode);

var _AnswerNode = require('./dialogs/AnswerNode');

var _AnswerNode2 = _interopRequireDefault(_AnswerNode);

var _DialogNode = require('./dialogs/DialogNode');

var _DialogNode2 = _interopRequireDefault(_DialogNode);

var _TalkNode = require('./dialogs/TalkNode');

var _TalkNode2 = _interopRequireDefault(_TalkNode);

var _QuestNode = require('./quests/QuestNode');

var _QuestNode2 = _interopRequireDefault(_QuestNode);

var _TaskNode = require('./quests/TaskNode');

var _TaskNode2 = _interopRequireDefault(_TaskNode);

var _VariableNode = require('./variables/VariableNode');

var _VariableNode2 = _interopRequireDefault(_VariableNode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var KEY_ACTORS = 'actors';
var KEY_ANSWERS = 'answers';
var KEY_CONDITIONS = 'conditions';
var KEY_DIALOGS = 'dialogs';
var KEY_LINKS = 'links';
var KEY_SCRIPTS = 'scripts';
var KEY_TALKS = 'talks';
var KEY_TASKS = 'tasks';
var KEY_QUESTS = 'quests';
var KEY_VARIABLES = 'variables';

var RPGSystem = function RPGSystem(data, editor) {
  var _this = this;

  var _objectPool = {},
      _editor = editor || null,
      _errorHandler = new _ErrorHandler2.default(_editor),
      _context = null,
      _lastChild = null,
      _parentHistory = [],
      _halfLinks = {
    out: [],
    inp: []
  };

  for (var key in data) {
    if (data.hasOwnProperty(key)) {
      _objectPool[key] = data[key].map(function (d) {
        return _nodeFactory(d, _this);
      });
    }
  }

  function _nodeFactory(data) {
    var className = data.class;
    switch (className) {
      case 'ActorNode':
        return new _ActorNode2.default(data, this);
      case 'ConditionNode':
        return new _ConditionNode2.default(data, this);
      case 'AnswerNode':
        return new _AnswerNode2.default(data, this);
      case 'DialogNode':
        return new _DialogNode2.default(data, this);
      case 'TalkNode':
        return new _TalkNode2.default(data, this);
      case 'QuestNode':
        return new _QuestNode2.default(data, this);
      case 'TaskNode':
        return new _TaskNode2.default(data, this);
      case 'LinkNode':
        return new _LinkNode2.default(data, this);
      case 'VariableNode':
        return new _VariableNode2.default(data, this);
      default:
        _errorHandler.showMsg(_ErrorCode2.default.CLASS_NOT_DEFINED, { class: className });
        return null;
    }
  }

  function _findNodeInArray(array, id) {
    for (var i = 0; i < array.length; i++) {
      if (array[i].getId() === id) return array[i];
    }
    return null;
  }

  var _findNode = function _findNode(objId) {
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        var obj = _findNodeInArray(_objectPool[key], objId);
        if (obj !== null) return obj;
      }
    }
    //Is error message neccessary here? To consider.
    //_errorHandler.showMsg(ErrorCode.OBJECT_NOT_FOUND,{id:objId});
    return null;
  },
      _getNode = function _getNode(key, objId) {
    var obj = _findNodeInArray(_objectPool[key], objId);
    return obj;
  },
      _addNode = function _addNode(key, obj) {
    if (!_objectPool[key]) _objectPool[key] = [];
    _objectPool[key].push(obj);
  },
      _removeNode = function _removeNode(id) {
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        if (this._removeNodeByKey(key, id)) return true;
      }
    }
    return false;
  },
      _removeNodeByKey = function _removeNodeByKey(key, id) {
    var index = _Utils2.default.getIndexById(_objectPool[key], id);
    var isNodeFound = index > -1;
    if (isNodeFound) {
      var node = _objectPool[key].splice(index, 1)[0];
      node.dispose();
    }
    return isNodeFound;
  },
      _setConnection = function _setConnection(type, nodeId1, nodeId2) {
    if (nodeId1 === nodeId2) {
      _errorHandler.showMsg(_ErrorCode2.default.CONNECTION_TO_ITSELF, { node: nodeId1 });
      return false;
    }
    var node1 = _findNode(nodeId1);
    var node2 = _findNode(nodeId2);
    if (node1 === null || node2 === null) return;
    if (node1.canCreateOutputConnection(type) && node2.canCreateInputConnection(type)) {
      var link = new _LinkNode2.default({ type: type, output: nodeId1, input: nodeId2 });
      var linkId = link.getId();
      _addNode(KEY_LINKS, link);
      node1.setOutputConnection(type, linkId);
      node2.setInputConnection(type, linkId);
      return linkId;
    } else {
      _errorHandler.showMsg(_ErrorCode2.default.IMPROPER_CONNECTION, {
        type: type,
        node1: nodeId1,
        node2: nodeId2
      });
      return false;
    }
  },
      _getConnection = function _getConnection(linkId) {
    return this._getNode(KEY_LINKS, linkId);
  },
      _getConnections = function _getConnections() {
    return _objectPool[KEY_LINKS];
  },
      _removeConnection = function _removeConnection(linkId) {
    this._removeNodeByKey(KEY_LINKS, linkId);
  };

  ////////////////////////////////////////////////////////////////
  //METHOD CHAINING
  ////////////////////////////////////////////////////////////////

  /**
   * Method used to check passed parameters and later merge them into
   * single object.
   * @param  {string} id      Mandatory id of node.
   * @param  {object} params  Optional parameters.
   * @return {object} Parameters merged into object.
   */
  function _checkAndMergeParams() {
    var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _errorHandler.showMsg(_ErrorCode2.default.MANDATORY_PARAM, { param: 'id' });
    var params = arguments[1];

    if (typeof id !== 'string') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'string' });
    }
    if (params !== undefined && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) !== 'object') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'object' });
    } else if (params === undefined) {
      params = {};
    }
    params.uuid = id;
    return params;
  }

  /**
   * This method helps in the creation of nodes. Its focus on proper
   * placement of nodes in tree.
   * @param  {string} id      Mandatory id of newly created node.
   * @param  {object} params  Parameters of created node.
   * @param  {boolean} asChild Determines if node should be added as child
   * of another node or as an independent node.
   * @param  {string} className   Name of class that will be used to create node.
   * @param  {string} storage Name of node group inside which node will be added.
   */
  function _chainNodeCreator(id, params, asChild, className, storage) {
    //First, we check that id and params are valid.
    params = _checkAndMergeParams(id, params);
    //Class name for later usage.
    params.class = className;

    //Test if node should be added as child or parent.
    if (asChild) {
      //If last added child was not null then we must check additional conditions.
      if (_lastChild !== null) {
        //If constructor name of previous child node, is equal to name of class,
        //whose we try to create, it means node should be added to current parent.
        if (_lastChild.constructor.name === className) {
          createChildNode(params);
        }
        //If names of constructors not match, then we must check if new node
        //can be added as child to our previous child.
        else if (_lastChild.canAddChild(className)) {
            _parentHistory.unshift(_lastChild);
            createChildNode(params);
          }
          //Finally if previous conditions are false we try go back to previous
          //parent node.
          else {
              _lastChild = _parentHistory.shift() || null;
              _chainNodeCreator(id, params, asChild, className, storage);
            }
      }
      //If last child is null, then we check if node can be added to current
      //parent node.
      else if (_parentHistory.length > 0 && _parentHistory[0].canAddChild(className)) {
          createChildNode(params);
        }
        //If last child and last parent is equal to null, then new child node
        //cant be added, so we throw error.
        else {
            _errorHandler.showMsg(_ErrorCode2.default.INCOMPATIBLE_CHILD, {
              child: className,
              parent: _parentHistory.length > 0 ? _parentHistory[0].constructor.name : 'null'
            });
          }
    } else {
      //If node is added as parent, then last child is set to null
      //and parent history is cleared.
      _lastChild = null;
      _parentHistory.length = 0;
      //After that, new node is created.
      var node = _nodeFactory(params);
      _parentHistory = [node];
      _addNode(storage, node);
    }

    function createChildNode(nodeParams) {
      //We create a new node, and then set as the last child.
      _lastChild = _nodeFactory(nodeParams);
      //Then we add our freshly created node to its parent.
      _parentHistory[0].addChild(_lastChild.getId());
      //Finally new node is added to main storage object.
      _addNode(storage, _lastChild);
    }
  }

  /**
   * Helper method that is used to remove nodes from object pool
   * and reset context of "method chaining" algorithm.
   * @param  {string} id  Id of node to be removed.
   * @param  {string} key Name of node group which contains node to remove.
   */
  function _chainNodeRemover(id, key) {
    _lastChild = null;
    _parentHistory.length = 0;
    this._removeNodeByKey(key, id);
  }

  /**
   * Helper method that is used for creating temporary links (half links)
   * or complete Link nodes, when input and output counterparts are present.
   * @param  {string} type      Defines type of connection.
   * @param  {string} id        Id of targeted node into which connection
   * should be made.
   * @param  {string} startSide Defines current start side of the link.
   * @param  {string} endSide   Defines current end side of the link.
   */
  function _chainLinkCreator(type, id, startSide, endSide) {
    var opposite = null;
    var node = null;
    //First we must check whether our method is called on node.
    if (_lastChild !== null) {
      node = _lastChild;
    } else if (_parentHistory[0] !== undefined) {
      node = _parentHistory[0];
    }
    //If our last node is not null, we can proceed further.
    if (node !== null) {
      //Our next task is to iterate through an array of "half links". This step
      //is necessary to find out whether we should create another "half link"
      //or complete LinkNode. We are looking for the opposite side of the link.
      for (var i = 0; i < _halfLinks[endSide].length; i++) {
        var link = _halfLinks[endSide][i];
        if (link.type === type && link.id === node.getId()) {
          opposite = _halfLinks[endSide].splice(i, 1)[0];
          break;
        }
      }
      //If opposite side is not available, it means we should create "half link".
      if (opposite === null) {
        _halfLinks[startSide].push({ type: type, id: id });
      }
      //Otherwise we create LinkNode.
      else {
          //Method "_setConnection" always create links in defined direction
          //starting from input side to output side, so is it important to
          //pass parameters in proper manner.
          if (startSide === 'inp') {
            _setConnection(type, id, opposite.id);
          } else {
            _setConnection(type, opposite.id, id);
          }
        }
    }
    //Else if a node is null then it means that method was called on
    //an incorrect target.
    else {
        _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_LINK_TARGET);
      }
  }

  var _addActor = function _addActor(id, params) {
    _chainNodeCreator(id, params, false, 'ActorNode', KEY_ACTORS);
    return this;
  },
      _removeActor = function _removeActor(actorId) {
    _chainNodeRemover(actorId, KEY_ACTORS);
    return this;
  },
      _addQuest = function _addQuest(id, params) {
    _chainNodeCreator(id, params, false, 'QuestNode', KEY_QUESTS);
    return this;
  },
      _removeQuest = function _removeQuest(questId) {
    _chainNodeRemover(questId, KEY_QUESTS);
    return this;
  },
      _addDialog = function _addDialog(id, params) {
    _chainNodeCreator(id, params, false, 'DialogNode', KEY_DIALOGS);
    return this;
  },
      _removeDialog = function _removeDialog(dialogId) {
    _chainNodeRemover(dialogId, KEY_DIALOGS);
    return this;
  },
      _addCondition = function _addCondition(id, params) {
    _chainNodeCreator(id, params, false, 'ConditionNode', KEY_CONDITIONS);
    return this;
  },
      _removeCondition = function _removeCondition(conditionId) {
    _chainNodeRemover(conditionId, KEY_CONDITIONS);
    return this;
  },
      _addVariable = function _addVariable(id, params) {
    _chainNodeCreator(id, params, false, 'VariableNode', KEY_VARIABLES);
    return this;
  },
      _removeVariable = function _removeVariable(variableId) {
    _chainNodeRemover(variableId, KEY_VARIABLES);
    return this;
  },
      _addTalk = function _addTalk(id, params) {
    _chainNodeCreator(id, params, true, 'TalkNode', KEY_TALKS);
    return this;
  },
      _removeTalk = function _removeTalk(id) {
    _chainNodeRemover(id, KEY_TALKS);
    return this;
  },
      _addAnswer = function _addAnswer(id, params) {
    _chainNodeCreator(id, params, true, 'AnswerNode', KEY_ANSWERS);
    return this;
  },
      _removeAnswer = function _removeAnswer(id) {
    _chainNodeRemover(id, KEY_ANSWERS);
    return this;
  },
      _inp = function _inp(type, id) {
    _chainLinkCreator(type, id, 'inp', 'out');
    return this;
  },
      _out = function _out(type, id) {
    _chainLinkCreator(type, id, 'out', 'inp');
    return this;
  },


  ////////////////////////////////////////////////////////////////
  //GETTERS
  ////////////////////////////////////////////////////////////////
  _getActor = function _getActor(actorId) {
    return this._getNode(KEY_ACTORS, actorId);
  },
      _getActors = function _getActors() {
    return _objectPool[KEY_ACTORS];
  },
      _getCondition = function _getCondition(conditionId) {
    return this._getNode(KEY_CONDITIONS, conditionId);
  },
      _getConditions = function _getConditions() {
    return _objectPool[KEY_CONDITIONS];
  },
      _getDialog = function _getDialog(dialogId) {
    return this._getNode(KEY_DIALOGS, dialogId);
  },
      _getDialogs = function _getDialogs() {
    return _objectPool[KEY_DIALOGS];
  },
      _getQuest = function _getQuest(questId) {
    return this._getNode(KEY_QUESTS, questId);
  },
      _getQuests = function _getQuests() {
    return _objectPool[KEY_QUESTS];
  },
      _getVariable = function _getVariable(variableId) {
    return _getNode(KEY_VARIABLES, variableId);
  },
      _getVariables = function _getVariables() {
    return _objectPool[KEY_VARIABLES];
  },
      _serializeData = function _serializeData() {
    var data = {};
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        data[key] = _objectPool[key].map(function (obj) {
          return obj.getData ? obj.getData() : obj;
        });
      }
    }
    return JSON.stringify(data);
  };

  return {
    ////////////////////////////////////////////
    //General node methods
    ////////////////////////////////////////////
    findNode: _findNode,
    getNode: _getNode,
    addNode: _addNode,
    removeNode: _removeNode,

    ////////////////////////////////////////////
    //Link creation methods
    ////////////////////////////////////////////
    setConnection: _setConnection,
    getConnection: _getConnection,
    getConnections: _getConnections,
    removeConnection: _removeConnection,

    ////////////////////////////////////////////
    //Chainable methods
    ////////////////////////////////////////////
    addActor: _addActor,
    removeActor: _removeActor,
    addQuest: _addQuest,
    removeQuest: _removeQuest,
    addDialog: _addDialog,
    removeDialog: _removeDialog,
    addCondition: _addCondition,
    removeCondition: _removeCondition,
    addVariable: _addVariable,
    removeVariable: _removeVariable,
    addTalk: _addTalk,
    removeTalk: _removeTalk,
    addAnswer: _addAnswer,
    removeAnswer: _removeAnswer,
    inp: _inp,
    out: _out,

    ////////////////////////////////////////////
    //Getter methods
    ////////////////////////////////////////////
    getActor: _getActor,
    getActors: _getActors,
    getCondition: _getCondition,
    getConditions: _getConditions,
    getDialog: _getDialog,
    getDialogs: _getDialogs,
    getQuest: _getQuest,
    getQuests: _getQuests,
    getVariable: _getVariable,
    getVariables: _getVariables,

    ////////////////////////////////////////////
    //Miscalineus methods
    ////////////////////////////////////////////
    serializeData: _serializeData
  };
};
module.exports = RPGSystem;

},{"./actors/ActorNode":4,"./conditions/ConditionNode":5,"./core/BaseNode":6,"./core/ErrorCode":8,"./core/ErrorHandler":9,"./core/LinkNode":10,"./core/Utils":12,"./dialogs/AnswerNode":13,"./dialogs/DialogNode":14,"./dialogs/TalkNode":15,"./quests/QuestNode":16,"./quests/TaskNode":18,"./variables/VariableNode":19}],4:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActorNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _name = new WeakMap();
  var _dialog = new WeakMap();
  //let _inventory = new WeakMap();


  return function (_BaseNode) {
    _inherits(ActorNode, _BaseNode);

    function ActorNode(data) {
      _classCallCheck(this, ActorNode);

      var _this = _possibleConstructorReturn(this, (ActorNode.__proto__ || Object.getPrototypeOf(ActorNode)).call(this, data));

      _name.set(_this, data ? data.name : '');
      _dialog.set(_this, data ? data.dialog : '');
      //_inventory.set(this,data.inventory ? );
      return _this;
    }

    _createClass(ActorNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(ActorNode.prototype.__proto__ || Object.getPrototypeOf(ActorNode.prototype), 'getData', this).call(this);
        data.name = this.getName();
        data.dialog = this.getDialog();
        return data;
      }
    }, {
      key: 'setName',
      value: function setName(value) {
        _name.set(this, value);
      }
    }, {
      key: 'getName',
      value: function getName() {
        return _name.get(this);
      }
    }, {
      key: 'getDialog',
      value: function getDialog() {
        return _dialog.get(this);
      }

      /*getInventory() {
        return _inventory.get(this);
      }*/

    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return this.getInputConnections(_LinkType2.default.DIALOG).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _name.delete(this);
        _dialog.delete(this);
        //_inventory.delete(this);
        _get(ActorNode.prototype.__proto__ || Object.getPrototypeOf(ActorNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return ActorNode;
  }(_BaseNode3.default);
}();

module.exports = ActorNode;

},{"../core/BaseNode":6,"../core/LinkType":11}],5:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _nxCompile = require('@risingstack/nx-compile');

var _nxCompile2 = _interopRequireDefault(_nxCompile);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ConditionNode = function () {
  var _label = new WeakMap();
  var _code = new WeakMap();
  var _compiled = new WeakMap();
  var _sandbox = new WeakMap();

  return function (_BaseNode) {
    _inherits(ConditionNode, _BaseNode);

    function ConditionNode(data, rpgs) {
      _classCallCheck(this, ConditionNode);

      var _this = _possibleConstructorReturn(this, (ConditionNode.__proto__ || Object.getPrototypeOf(ConditionNode)).call(this, data, rpgs));

      _label.set(_this, data.label ? data.label : '');
      _code.set(_this, data.code ? data.code : '(function(){return true;})();');
      _sandbox.set(_this, { rpgs: rpgs });
      _compiled.set(_this, _nxCompile2.default.compileExpression(_code.get(_this), _sandbox.get(_this)));
      return _this;
    }

    _createClass(ConditionNode, [{
      key: 'setLabel',
      value: function setLabel(text) {
        _label.set(this, text);
      }
    }, {
      key: 'getLabel',
      value: function getLabel() {
        return _label.get(this);
      }
    }, {
      key: 'setCode',
      value: function setCode(code) {
        _code.set(this, code);
        _compiled.set(this, _nxCompile2.default.compileExpression(_code.get(this), _sandbox.get(this)));
      }
    }, {
      key: 'getCode',
      value: function getCode() {
        return _code.get(this);
      }
    }, {
      key: 'check',
      value: function check() {
        return _compiled.get(this)();
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(ConditionNode.prototype.__proto__ || Object.getPrototypeOf(ConditionNode.prototype), 'getData', this).call(this);
        data.label = this.getLabel();
        data.code = this.getCode();
        return data;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
          case _LinkType2.default.ACTIVITY:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _label.delete(this);
        _code.delete(this);
        _sandbox.delete(this);
        _compiled.delete(this);
        _get(ConditionNode.prototype.__proto__ || Object.getPrototypeOf(ConditionNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return ConditionNode;
  }(_BaseNode3.default);
}();
module.exports = ConditionNode;

},{"../core/BaseNode":6,"../core/LinkType":11,"@risingstack/nx-compile":1}],6:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require('./Utils');

var _LinkType = require('./LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var KEY_LINKS = 'links';
var KEY_CONDITIONS = 'conditions';

var BaseNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _rpgs = new WeakMap();
  var _uuid = new WeakMap();
  var _input = new WeakMap();
  var _output = new WeakMap();

  return function () {
    function BaseNode(data, rpgs) {
      _classCallCheck(this, BaseNode);

      _rpgs.set(this, rpgs);
      //If uuid not present, then by default we assign Universally Unique ID.
      _uuid.set(this, data.uuid ? data.uuid : _Utils.UUID.generate());
      _input.set(this, data.input ? data.input : {});
      _output.set(this, data.output ? data.output : {});
    }

    _createClass(BaseNode, [{
      key: 'getRPGS',
      value: function getRPGS() {
        return this.getRPGS();
      }
    }, {
      key: 'setId',
      value: function setId(value) {
        _uuid.set(this, value);
      }
    }, {
      key: 'getId',
      value: function getId() {
        return _uuid.get(this);
      }
    }, {
      key: 'checkCondition',
      value: function checkCondition(conditionId) {
        var condition = this.getRPGS().getNode(KEY_CONDITIONS, conditionId);
        return condition ? condition.check() : true;
      }

      /**
       * Returns boolean that reflects visiblility state of node.
       * @return {Boolean} Visibility state
       */

    }, {
      key: 'isVisible',
      value: function isVisible() {
        var conditions = getInputConnections(_LinkType2.default.VISIBILITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }

      /**
       * Returns boolean that reflects activity state of node.
       * @return {Boolean} Active state
       */

    }, {
      key: 'isActive',
      value: function isActive() {
        var conditions = getInputConnections(_LinkType2.default.ACTIVITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }
    }, {
      key: 'getData',
      value: function getData() {
        return {
          class: this.constructor.name,
          uuid: this.getId(),
          input: this.getInputConnections(),
          output: this.getOutputConnections()
        };
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return false;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {}
    }, {
      key: 'removeChild',
      value: function removeChild(index) {}
    }, {
      key: 'getChild',
      value: function getChild(index) {
        return null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return [];
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {}
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        return false;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        return false;
      }
    }, {
      key: '_setConnection',
      value: function _setConnection(obj, type, linkId) {
        if (!obj.hasOwnProperty(type)) {
          obj[type] = [];
        }
        obj[type].push(linkId);
        return obj;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {
        _output.set(this, this._setConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {
        _input.set(this, this._setConnection(_input.get(this), type, linkId));
      }
    }, {
      key: '_getConnections',
      value: function _getConnections(obj, type) {
        if (type) return !obj.hasOwnProperty(type) ? [] : obj[type];else return obj;
      }
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {
        return this._getConnections(_output.get(this), type);
      }
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {
        return this._getConnections(_input.get(this), type);
      }
    }, {
      key: '_removeConnection',
      value: function _removeConnection(obj, type, linkId) {
        if (obj.hasOwnProperty(type)) {
          obj[type] = Utils.removeObjectFromArray(obj[type], linkId);
        }
        return obj;
      }
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {
        _output.set(this, this._removeConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {
        _input.set(this, this._removeConnection(_input.get(this), type, linkId));
      }
    }, {
      key: 'removeChildrenFrom',
      value: function removeChildrenFrom(obj, key) {
        var _this = this;

        obj.filter(function (childId, index, arr) {
          _this.getRPGS().removeNode(key, childId);
          return true;
        });
      }
    }, {
      key: '_removeLinksFrom',
      value: function _removeLinksFrom(obj) {
        for (var type in obj) {
          if (obj.hasOwnProperty(type)) {
            removeChildrenFrom(obj[type], KEY_LINKS);
          }
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeLinksFrom(_output.get(this));
        this._removeLinksFrom(_input.get(this));
        _rpgs.delete(this);
        _uuid.delete(this);
        _input.delete(this);
        _output.delete(this);
      }
    }]);

    return BaseNode;
  }();
}();
module.exports = BaseNode;

},{"./LinkType":11,"./Utils":12}],7:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CompoundNode = function () {
  var _children = new WeakMap();

  return function (_BaseNode) {
    _inherits(CompoundNode, _BaseNode);

    function CompoundNode(data, rpgs) {
      _classCallCheck(this, CompoundNode);

      var _this = _possibleConstructorReturn(this, (CompoundNode.__proto__ || Object.getPrototypeOf(CompoundNode)).call(this, data, rpgs));

      _children.set(_this, data.children ? data.children : []);
      return _this;
    }

    _createClass(CompoundNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'getData', this).call(this);
        data.children = this.getChildren();
        return data;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {
        var children = _children.get(this);
        _children.set(this, _Utils2.default.addObjectToArray(children, childId));
      }
    }, {
      key: 'removeChild',
      value: function removeChild(index) {
        var children = _children.get(this);
        _children.set(this, children.splice(index, 1));
      }
    }, {
      key: 'getChild',
      value: function getChild(index) {
        var children = _children.get(this);
        return children.length > index ? children[index] : null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return _children.get(this);
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {
        this.removeChildrenFrom(_children.get(this), key);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _children.delete(this);
        _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return CompoundNode;
  }(_BaseNode3.default);
}();
module.exports = CompoundNode;

},{"../core/BaseNode":6,"../core/Utils":12}],8:[function(require,module,exports){
"use strict";

var NODE_NOT_EXISTS = 0;
var CLASS_NOT_DEFINED = 1;
var CONNECTION_TO_ITSELF = 2;
var IMPROPER_CONNECTION = 3;
var OBJECT_NOT_FOUND = 4;
var MANDATORY_PARAM = 5;
var INCORRECT_TYPE = 6;
var INCORRECT_PARENT_NODE = 7;
var INCORRECT_LINK_TARGET = 8;
var INCOMPATIBLE_CHILD = 9;

exports.NODE_NOT_EXISTS = NODE_NOT_EXISTS;
exports.CLASS_NOT_DEFINED = CLASS_NOT_DEFINED;
exports.CONNECTION_TO_ITSELF = CONNECTION_TO_ITSELF;
exports.IMPROPER_CONNECTION = IMPROPER_CONNECTION;
exports.OBJECT_NOT_FOUND = OBJECT_NOT_FOUND;
exports.MANDATORY_PARAM = MANDATORY_PARAM;
exports.INCORRECT_TYPE = INCORRECT_TYPE;
exports.INCORRECT_PARENT_NODE = INCORRECT_PARENT_NODE;
exports.INCORRECT_LINK_TARGET = INCORRECT_LINK_TARGET;
exports.INCOMPATIBLE_CHILD = INCOMPATIBLE_CHILD;

},{}],9:[function(require,module,exports){
"use strict";

var _ErrorCode = require('./ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ErrorHandler = function ErrorHandler(editor) {
  return {
    showMsg: function showMsg(errorCode, params) {
      var msg = '';
      switch (errorCode) {
        case _ErrorCode2.default.NODE_NOT_EXISTS:
          msg = 'Node of type ' + params.type + ' is not defined.';
          break;
        case _ErrorCode2.default.CLASS_NOT_DEFINED:
          msg = 'Class ' + params.class + ' is not defined.';
          break;
        case _ErrorCode2.default.CONNECTION_TO_ITSELF:
          msg = 'Cannot connect node "' + params.node + '" to itself.';
          break;
        case _ErrorCode2.default.IMPROPER_CONNECTION:
          msg = 'Cannot create connection of type "' + params.type + '" from node id "' + params.node1 + '" to node id "' + params.node2 + '".';
          break;
        case _ErrorCode2.default.OBJECT_NOT_FOUND:
          msg = 'Cannot find object with id "' + params.id + '"';
          break;
        case _ErrorCode2.default.MANDATORY_PARAM:
          msg = 'Parameter "' + params.param + '" was expected but instead got undefined.';
          break;
        case _ErrorCode2.default.INCORRECT_TYPE:
          msg = 'Wrong type of argument. Expected "' + params.type + '"';
          break;
        case _ErrorCode2.default.INCORRECT_PARENT_NODE:
          msg = 'Node of type "' + params.child + '" can be added only to "' + params.parent + '" node.';
          break;
        case _ErrorCode2.default.INCORRECT_LINK_TARGET:
          msg = 'Cannot create link connection to null node.';
          break;
        case _ErrorCode2.default.INCOMPATIBLE_CHILD:
          msg = 'Cannot add child of type "' + params.child + '" into parent of type "' + params.parent + '".';
          break;
        default:
          msg = 'Unknown error code passed: ' + errorCode;
      }
      if (editor) {
        editor.showMsg(msg);
      } else {
        throw new Error(msg);
        //add warning mode?
      }
    }
  };
};
module.exports = ErrorHandler;

},{"./ErrorCode":8}],10:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LinkNode = function () {

  var _type = new WeakMap();
  var _output = new WeakMap();
  var _input = new WeakMap();

  return function (_BaseNode) {
    _inherits(LinkNode, _BaseNode);

    function LinkNode(data, rpgs) {
      _classCallCheck(this, LinkNode);

      var _this = _possibleConstructorReturn(this, (LinkNode.__proto__ || Object.getPrototypeOf(LinkNode)).call(this, data, rpgs));

      _type.set(_this, data.type);
      _input.set(_this, data.input ? data.input : '');
      _output.set(_this, data.output ? data.output : '');
      return _this;
    }

    _createClass(LinkNode, [{
      key: 'getInp',
      value: function getInp() {
        return _input.get(this);
      }
    }, {
      key: 'getOut',
      value: function getOut() {
        return _output.get(this);
      }
    }, {
      key: 'getType',
      value: function getType() {
        return _type.get(this);
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(LinkNode.prototype.__proto__ || Object.getPrototypeOf(LinkNode.prototype), 'getData', this).call(this);
        data.type = this.getType();
        data.input = this.getInp();
        data.output = this.getOut();
        return data;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        var linkInp = this.getInp();
        var linkOut = this.getOut();
        var inpObj = this.getRPGS().findNode(linkInp);
        var outObj = this.getRPGS().findNode(linkOut);
        if (inpObj) inpObj.removeInputConnection(this.getType(), linkInp);
        if (outObj) outObj.removeOutputConnection(this.getType(), linkOut);
        _type.delete(this);
        _input.delete(this);
        _output.delete(this);
        _get(LinkNode.prototype.__proto__ || Object.getPrototypeOf(LinkNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return LinkNode;
  }(_BaseNode3.default);
}();
module.exports = LinkNode;

},{"../core/BaseNode":6}],11:[function(require,module,exports){
"use strict";

var REFERENCE = 'reference';
var VISIBILITY = 'visibility';
var ACTIVITY = 'activity';
var ACTION = 'action';
var GOTO = 'goto';
var DIALOG = 'dialog';

exports.REFERENCE = REFERENCE;
exports.VISIBILITY = VISIBILITY;
exports.ACTIVITY = ACTIVITY;
exports.ACTION = ACTION;
exports.GOTO = GOTO;
exports.DIALOG = DIALOG;

},{}],12:[function(require,module,exports){
"use strict";

/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/

var UUID = function () {
  var self = {};
  var lut = [];for (var i = 0; i < 256; i++) {
    lut[i] = (i < 16 ? '0' : '') + i.toString(16);
  }
  self.generate = function () {
    var d0 = Math.random() * 0xffffffff | 0;
    var d1 = Math.random() * 0xffffffff | 0;
    var d2 = Math.random() * 0xffffffff | 0;
    var d3 = Math.random() * 0xffffffff | 0;
    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
  };
  return self;
}();

exports.UUID = UUID;

var indexOfObject = function indexOfObject(array, obj) {
  for (var i = 0; i < array.length; i++) {
    if (array[i] === obj) return i;
  }
  return -1;
};

exports.indexOfObject = indexOfObject;

var getIndexById = function getIndexById(array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return i;
  }
  return -1;
};
exports.getIndexById = getIndexById;

exports.addObjectToArray = function (array, obj, expectedType) {
  if (expectedType !== undefined && expectedType !== null) {
    if (expectedType.isPrototypeOf(obj)) {
      throw new Error('Wrong type of object passed. Expected ' + expectedType.constructor.name + ' object.');
    }
  }
  if (indexOfObject(array, obj) === -1) {
    array.push(obj);
  }
  return array;
};

/*exports.removeObjectById = function(array,id) {
  let index = getIndexById(array,id);
  if(index !== -1) {
    let spliced = array.splice(index,1);
    if(spliced.dispose) spliced.dispose();
  }
  return array;
}*/

exports.removeObjectFromArray = function (array, obj) {
  var index = indexOfObject(array, obj);
  if (index !== -1) {
    var spliced = array.splice(index, 1);
    if (spliced.dispose) spliced.dispose();
  }
  return array;
};

},{}],13:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var AnswerNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _text = new WeakMap();

  return function (_BaseNode) {
    _inherits(AnswerNode, _BaseNode);

    function AnswerNode(data, rpgs) {
      _classCallCheck(this, AnswerNode);

      var _this = _possibleConstructorReturn(this, (AnswerNode.__proto__ || Object.getPrototypeOf(AnswerNode)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(AnswerNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(AnswerNode.prototype.__proto__ || Object.getPrototypeOf(AnswerNode.prototype), 'getData', this).call(this);
        data.text = this.getText();

        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'getTalk',
      value: function getTalk() {
        var talks = getOutputConnections(_LinkType2.default.GOTO);
        return talks ? talks[0] : null;
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return this.getOutputConnections(_LinkType2.default.GOTO).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _text.delete(this);
        _get(AnswerNode.prototype.__proto__ || Object.getPrototypeOf(AnswerNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return AnswerNode;
  }(_BaseNode3.default);
}();
module.exports = AnswerNode;

},{"../core/BaseNode":6,"../core/LinkType":11}],14:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TALKS = 'talks';

var DialogNode = function () {
  var _start = new WeakMap();

  return function (_CompoundNode) {
    _inherits(DialogNode, _CompoundNode);

    function DialogNode(data, rpgs) {
      _classCallCheck(this, DialogNode);

      var _this = _possibleConstructorReturn(this, (DialogNode.__proto__ || Object.getPrototypeOf(DialogNode)).call(this, data, rpgs));

      _start.set(_this, data.startTalk ? data.startTalk : '');
      return _this;
    }

    _createClass(DialogNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(DialogNode.prototype.__proto__ || Object.getPrototypeOf(DialogNode.prototype), 'getData', this).call(this);
        data.startTalk = this.getStartTalk();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'TalkNode';
      }
    }, {
      key: 'setStartTalk',
      value: function setStartTalk(talkId) {
        _start.set(this, talkId);
      }
    }, {
      key: 'getStartTalk',
      value: function getStartTalk() {
        return _start.get(this);
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TALKS);
        _start.delete(this);
        _get(DialogNode.prototype.__proto__ || Object.getPrototypeOf(DialogNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return DialogNode;
  }(_CompoundNode3.default);
}();
module.exports = DialogNode;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],15:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_ANSWERS = 'answers';

var TalkNode = function () {

  var _text = new WeakMap();

  return function (_CompoundNode) {
    _inherits(TalkNode, _CompoundNode);

    function TalkNode(data, rpgs) {
      _classCallCheck(this, TalkNode);

      var _this = _possibleConstructorReturn(this, (TalkNode.__proto__ || Object.getPrototypeOf(TalkNode)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(TalkNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(TalkNode.prototype.__proto__ || Object.getPrototypeOf(TalkNode.prototype), 'getData', this).call(this);
        data.text = this.getText();
        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'AnswerNode';
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_ANSWERS);
        _text.delete(this);
        _get(TalkNode.prototype.__proto__ || Object.getPrototypeOf(TalkNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return TalkNode;
  }(_CompoundNode3.default);
}();
module.exports = TalkNode;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],16:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _QuestStatus = require('./QuestStatus');

var _QuestStatus2 = _interopRequireDefault(_QuestStatus);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TASKS = 'tasks';

var QuestNode = function () {
  var _title = new WeakMap();
  var _description = new WeakMap();
  var _status = new WeakMap();

  return function (_CompoundNode) {
    _inherits(QuestNode, _CompoundNode);

    function QuestNode(data, rpgs) {
      _classCallCheck(this, QuestNode);

      var _this = _possibleConstructorReturn(this, (QuestNode.__proto__ || Object.getPrototypeOf(QuestNode)).call(this, data, rpgs));

      _title.set(_this, data.title ? data.title : '');
      _description.set(_this, data.description ? data.description : '');
      _status.set(_this, data.status ? data.status : _QuestStatus2.default.INCOMPLETE);
      return _this;
    }

    _createClass(QuestNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(QuestNode.prototype.__proto__ || Object.getPrototypeOf(QuestNode.prototype), 'getData', this).call(this);
        data.title = this.getTitle();
        data.description = this.getDescription();
        data.status = this.getStatus();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'Task';
      }
    }, {
      key: 'setTitle',
      value: function setTitle(value) {
        _title.set(this, value);
      }
    }, {
      key: 'getTitle',
      value: function getTitle() {
        return _title.get(this);
      }
    }, {
      key: 'setDescription',
      value: function setDescription(value) {
        _description.set(this, value);
      }
    }, {
      key: 'getDescription',
      value: function getDescription() {
        return _description.get(this);
      }
    }, {
      key: 'setStatus',
      value: function setStatus(value) {
        switch (value) {
          case _QuestStatus2.default.COMPLETED:
          case _QuestStatus2.default.FAILED:
            _status.set(this, value);
          case _QuestStatus2.default.INCOMPLETE:
          default:
            _status.set(this, _QuestStatus2.default.INCOMPLETE);
            break;
        };
      }
    }, {
      key: 'getStatus',
      value: function getStatus() {
        return _status.get(this);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TASKS);
        _title.delete(this);
        _description.delete(this);
        _status.delete(this);
      }
    }]);

    return QuestNode;
  }(_CompoundNode3.default);
}();
module.exports = QuestNode;

},{"../core/CompoundNode":7,"./QuestStatus":17}],17:[function(require,module,exports){
"use strict";

var INCOMPLETE = 'questIncomplete';
var COMPLETED = 'questCompleted';
var FAILED = 'questFailed';

exports.INCOMPLETE = INCOMPLETE;
exports.COMPLETED = COMPLETED;
exports.FAILED = FAILED;

},{}],18:[function(require,module,exports){
"use strict";

var _BaseNode2 = require("../core/BaseNode");

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TaskNode = function () {
  return function (_BaseNode) {
    _inherits(TaskNode, _BaseNode);

    function TaskNode(data) {
      _classCallCheck(this, TaskNode);

      return _possibleConstructorReturn(this, (TaskNode.__proto__ || Object.getPrototypeOf(TaskNode)).call(this, data));
    }

    //to do


    return TaskNode;
  }(_BaseNode3.default);
}();

module.exports = TaskNode;

},{"../core/BaseNode":6}],19:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _VariableType = require('./VariableType');

var _VariableType2 = _interopRequireDefault(_VariableType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VariableNode = function () {
  var _value = new WeakMap();
  var _type = new WeakMap();

  function _parseBoolean(val) {
    var isBool = (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.BOOLEAN;
    if (isBool) {
      return val;
    } else {
      switch (String(val).toLowerCase().trim()) {
        case "true":case "yes":case "1":
          return true;
        case "false":case "no":case "0":case null:
          return false;
        default:
          return Boolean(val);
      }
    }
  }

  function _parseString(val) {
    return (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.STRING ? val : String(val);
  }

  function _parseNumber(val) {
    return (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === _VariableType2.default.NUMBER ? val : parseFloat(val);
  }

  function _parseValue(val, type) {
    switch (type) {
      case _VariableType2.default.BOOLEAN:
        return _parseBoolean(val);
      case _VariableType2.default.NUMBER:
        return _parseNumber(val);
      case _VariableType2.default.STRING:
      default:
        return _parseString(val);
    }
  }

  return function (_BaseNode) {
    _inherits(VariableNode, _BaseNode);

    function VariableNode(data, rpgs) {
      _classCallCheck(this, VariableNode);

      var _this = _possibleConstructorReturn(this, (VariableNode.__proto__ || Object.getPrototypeOf(VariableNode)).call(this, data, rpgs));

      _type.set(_this, data.hasOwnProperty('type') ? data.type : _VariableType2.default.STRING);
      _value.set(_this, data.hasOwnProperty('value') ? _parseValue(data.value, _type.get(_this)) : '');
      return _this;
    }

    _createClass(VariableNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(VariableNode.prototype.__proto__ || Object.getPrototypeOf(VariableNode.prototype), 'getData', this).call(this);
        data.type = this.getType();
        data.value = this.getValue();
        return data;
      }
    }, {
      key: 'setValue',
      value: function setValue(val) {
        _value.set(this, _parseValue(val, _type.get(this)));
      }
    }, {
      key: 'getValue',
      value: function getValue() {
        return _value.get(this);
      }
    }, {
      key: 'getType',
      value: function getType() {
        return _type.get(this);
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        return false;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case LinkType.REFERENCE:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _value.delete(this);
        _type.delete(this);
        _get(VariableNode.prototype.__proto__ || Object.getPrototypeOf(VariableNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return VariableNode;
  }(_BaseNode3.default);
}();

module.exports = VariableNode;

},{"../core/BaseNode":6,"./VariableType":20}],20:[function(require,module,exports){
'use strict';

var BOOLEAN = 'boolean';
var STRING = 'string';
var NUMBER = 'number';

exports.BOOLEAN = BOOLEAN;
exports.STRING = STRING;
exports.NUMBER = NUMBER;

},{}],21:[function(require,module,exports){
"use strict";

var _data = require('../data/data.json');

var _data2 = _interopRequireDefault(_data);

var _RPGSystem = require('./rpgs/RPGSystem');

var _RPGSystem2 = _interopRequireDefault(_RPGSystem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(function ($, window, document, undefined) {
  $(function () {
    var rpgs1 = new _RPGSystem2.default();
    rpgs1.addActor('act1', { name: 'Adam' }).inp('dialog', 'dlg1').addCondition('cond1', { code: '\n        (function(){\n          alert("Condition test!");\n          //return true;\n        })();\n      ' }).out('visibility', 'tlk0ans1').addDialog('dlg1', { startTalk: 'tlk0' }).out('dialog', 'act1').addTalk('tlk0', { text: 'This is talk 0.' }).addAnswer('tlk0ans1', { text: 'Answer1' }).out('goto', 'tlk1').inp('visibility', 'cond1').addAnswer('tlk0ans2', { text: 'Answer2' }).out('goto', 'tlk2').addAnswer('tlk0ans3', { text: 'Answer3' }).out('goto', 'tlk3').addTalk('tlk1', { text: 'This is talk 1.' }).inp('goto', 'tlk0ans1').addAnswer('tlk1ans1', { text: 'Answer1' }).addTalk('tlk2', { text: 'This is talk 2.' }).inp('goto', 'tlk0ans2').addAnswer('tlk2ans1', { text: 'Answer1' }).addTalk('tlk3', { text: 'This is talk 3.' }).inp('goto', 'tlk0ans3').addAnswer('tlk3ans1', { text: 'Answer1' }).addVariable('b1', { type: 'boolean', value: false }).addVariable('s1', { type: 'string', value: 'sssssss' }).addVariable('n1', { type: 'number', value: 56 });
    var b1 = rpgs1.getVariable('b1');
    var s1 = rpgs1.getVariable('s1');
    var n1 = rpgs1.getVariable('n1');
    console.log('b1 value', b1.getValue(), b1.getType());
    console.log('s1 value', s1.getValue(), s1.getType());
    console.log('n1 value', n1.getValue(), n1.getType());

    var rpgs1Serialized = rpgs1.serializeData();
    console.log("rpgs1", rpgs1Serialized);

    var rpgs2 = new _RPGSystem2.default(JSON.parse(rpgs1Serialized));
    console.log("data created is equal to data parsed:", rpgs1Serialized === rpgs2.serializeData());
  });
})(jQuery, window, document);

},{"../data/data.json":2,"./rpgs/RPGSystem":3}]},{},[21])


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQHJpc2luZ3N0YWNrL254LWNvbXBpbGUvY29tcGlsZXIuanMiLCJzcmMvZGF0YS9kYXRhLmpzb24iLCJzcmMvanMvcnBncy9SUEdTeXN0ZW0uanMiLCJzcmMvanMvcnBncy9hY3RvcnMvQWN0b3JOb2RlLmpzIiwic3JjL2pzL3JwZ3MvY29uZGl0aW9ucy9Db25kaXRpb25Ob2RlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9CYXNlTm9kZS5qcyIsInNyYy9qcy9ycGdzL2NvcmUvQ29tcG91bmROb2RlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9FcnJvckNvZGUuanMiLCJzcmMvanMvcnBncy9jb3JlL0Vycm9ySGFuZGxlci5qcyIsInNyYy9qcy9ycGdzL2NvcmUvTGlua05vZGUuanMiLCJzcmMvanMvcnBncy9jb3JlL0xpbmtUeXBlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9VdGlscy5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvQW5zd2VyTm9kZS5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvRGlhbG9nTm9kZS5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvVGFsa05vZGUuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3ROb2RlLmpzIiwic3JjL2pzL3JwZ3MvcXVlc3RzL1F1ZXN0U3RhdHVzLmpzIiwic3JjL2pzL3JwZ3MvcXVlc3RzL1Rhc2tOb2RlLmpzIiwic3JjL2pzL3JwZ3MvdmFyaWFibGVzL1ZhcmlhYmxlTm9kZS5qcyIsInNyYy9qcy9ycGdzL3ZhcmlhYmxlcy9WYXJpYWJsZVR5cGUuanMiLCJzcmMvanMvc2NyaXB0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LFFBQUksUUFBUSx3QkFBYyxLQUFLLEtBQUwsQ0FBVyxlQUFYLENBQWQsQ0FBWjtBQUNBLFlBQVEsR0FBUixDQUFZLHVDQUFaLEVBQW9ELG9CQUFvQixNQUFNLGFBQU4sRUFBeEU7QUFDRCxHQXhDRDtBQTBDRCxDQTNDRCxFQTJDRyxNQTNDSCxFQTJDVyxNQTNDWCxFQTJDbUIsUUEzQ25CIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBpbGVDb2RlLFxuICBjb21waWxlRXhwcmVzc2lvblxufVxuXG5mdW5jdGlvbiBjb21waWxlRXhwcmVzc2lvbiAoc3JjLCBzYW5kYm94KSB7XG4gIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKVxuICB9XG4gIGlmICh0eXBlb2Ygc2FuZGJveCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKVxuICB9XG5cbiAgc2FuZGJveCA9IG5ldyBQcm94eShzYW5kYm94LCB7Z2V0LCBoYXN9KVxuICBjb25zdCBleHByZXNzaW9uID0gYFxuICB0cnkgeyB3aXRoIChzYW5kYm94KSB7IHJldHVybiAke3NyY30gfSB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvciB8fCBlcnIgaW5zdGFuY2VvZiBUeXBlRXJyb3IpKSB0aHJvdyBlcnJcbiAgfWBcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2FuZGJveCcsIGV4cHJlc3Npb24pLmJpbmQoc2FuZGJveCwgc2FuZGJveCkgLy8gZXNsaW50LWRpc2FibGUtbGluZVxufVxuXG5mdW5jdGlvbiBjb21waWxlQ29kZSAoc3JjLCBzYW5kYm94KSB7XG4gIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKVxuICB9XG4gIGlmICh0eXBlb2Ygc2FuZGJveCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKVxuICB9XG5cbiAgc2FuZGJveCA9IG5ldyBQcm94eShzYW5kYm94LCB7Z2V0LCBoYXN9KVxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzYW5kYm94JywgYHdpdGggKHNhbmRib3gpIHsgJHtzcmN9IH1gKS5iaW5kKHNhbmRib3gsIHNhbmRib3gpIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbn1cblxuZnVuY3Rpb24gZ2V0ICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgaWYgKGtleSA9PT0gU3ltYm9sLnVuc2NvcGFibGVzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpXG59XG5cbmZ1bmN0aW9uIGhhcyAodGFyZ2V0LCBrZXkpIHtcbiAgcmV0dXJuIHRydWVcbn1cbiIsIm1vZHVsZS5leHBvcnRzPXtcclxuICAgIFwiYWN0b3JzXCI6WyB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQWN0b3JOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJhY3QxXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZGlhbG9nXCI6IFtcIjRmZDdlYTU2LTk0YzMtNDk0OS1iYTcxLWY5ZjZlY2I3ZWY5ZVwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJuYW1lXCI6XCJBZGFtXCJcclxuICAgIH1cclxuICAgIF0sXHJcbiAgICBcImNvbmRpdGlvbnNcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJDb25kaXRpb25Ob2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJjb25kMVwiLFxyXG4gICAgICAgIFwib3V0cHV0XCI6IHtcclxuICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFtcImEwODZhOWNiLTNhYWEtNGNkYi1hYmNjLTk5NTVjNTQ2NzNkYlwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJsYWJlbFwiOlwiXCIsXHJcbiAgICAgICAgXCJjb2RlXCI6XCJcXG4gICAgICAgIChmdW5jdGlvbigpe1xcbiAgICAgICAgICBhbGVydChcXFwiQ29uZGl0aW9uIHRlc3QhXFxcIik7XFxuICAgICAgICAgIC8vcmV0dXJuIHRydWU7XFxuICAgICAgICB9KSgpO1xcbiAgICAgIFwiXHJcbiAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJkaWFsb2dzXCI6WyB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiRGlhbG9nTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwiZGxnMVwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge1xyXG4gICAgICAgICAgICBcImRpYWxvZ1wiOiBbXCI0ZmQ3ZWE1Ni05NGMzLTQ5NDktYmE3MS1mOWY2ZWNiN2VmOWVcIl1cclxuICAgICAgICB9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwiY2hpbGRyZW5cIjpbXCJ0bGswXCIsXHJcbiAgICAgICAgXCJ0bGsxXCIsXHJcbiAgICAgICAgXCJ0bGsyXCIsXHJcbiAgICAgICAgXCJ0bGszXCJdLFxyXG4gICAgICAgIFwic3RhcnRUYWxrXCI6XCJ0bGswXCJcclxuICAgIH1cclxuICAgIF0sXHJcbiAgICBcImxpbmtzXCI6WyB7XHJcbiAgICAgICAgXCJjbGFzc1wiOiBcIkxpbmtOb2RlXCIsIFwidXVpZFwiOiBcIjRmZDdlYTU2LTk0YzMtNDk0OS1iYTcxLWY5ZjZlY2I3ZWY5ZVwiLCBcImlucHV0XCI6IFwiYWN0MVwiLCBcIm91dHB1dFwiOiBcImRsZzFcIiwgXCJ0eXBlXCI6IFwiZGlhbG9nXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6IFwiTGlua05vZGVcIiwgXCJ1dWlkXCI6IFwiYTA4NmE5Y2ItM2FhYS00Y2RiLWFiY2MtOTk1NWM1NDY3M2RiXCIsIFwiaW5wdXRcIjogXCJ0bGswYW5zMVwiLCBcIm91dHB1dFwiOiBcImNvbmQxXCIsIFwidHlwZVwiOiBcInZpc2liaWxpdHlcIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjogXCJMaW5rTm9kZVwiLCBcInV1aWRcIjogXCJlNTJlZDc3Yi01MTViLTRjMTUtOWQ1MC1kNDNmY2E2MzViNDhcIiwgXCJpbnB1dFwiOiBcInRsazFcIiwgXCJvdXRwdXRcIjogXCJ0bGswYW5zMVwiLCBcInR5cGVcIjogXCJnb3RvXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6IFwiTGlua05vZGVcIiwgXCJ1dWlkXCI6IFwiYzA5OTgyYjgtNWYxZi00N2M1LWIwNWQtZTJlYzU2MTg3MjE2XCIsIFwiaW5wdXRcIjogXCJ0bGsyXCIsIFwib3V0cHV0XCI6IFwidGxrMGFuczJcIiwgXCJ0eXBlXCI6IFwiZ290b1wiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOiBcIkxpbmtOb2RlXCIsIFwidXVpZFwiOiBcIjNkNjZmNGY4LWRjZDgtNDg2Yy1iZjhkLTQzMzUzMWYxMDhiMVwiLCBcImlucHV0XCI6IFwidGxrM1wiLCBcIm91dHB1dFwiOiBcInRsazBhbnMzXCIsIFwidHlwZVwiOiBcImdvdG9cIlxyXG4gICAgfVxyXG4gICAgXSxcclxuICAgIFwidGFsa3NcIjpbIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJUYWxrTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMFwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJjaGlsZHJlblwiOiBbXCJ0bGswYW5zMVwiLCBcInRsazBhbnMyXCIsIFwidGxrMGFuczNcIl0sIFwidGV4dFwiOiBcIlRoaXMgaXMgdGFsayAwLlwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiVGFsa05vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcInRsazFcIixcclxuICAgICAgICBcImlucHV0XCI6IHtcclxuICAgICAgICAgICAgXCJnb3RvXCI6IFtcImU1MmVkNzdiLTUxNWItNGMxNS05ZDUwLWQ0M2ZjYTYzNWI0OFwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJjaGlsZHJlblwiOltcInRsazFhbnMxXCJdLFxyXG4gICAgICAgIFwidGV4dFwiOlwiVGhpcyBpcyB0YWxrIDEuXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJUYWxrTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMlwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge1xyXG4gICAgICAgICAgICBcImdvdG9cIjogW1wiYzA5OTgyYjgtNWYxZi00N2M1LWIwNWQtZTJlYzU2MTg3MjE2XCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcImNoaWxkcmVuXCI6W1widGxrMmFuczFcIl0sXHJcbiAgICAgICAgXCJ0ZXh0XCI6XCJUaGlzIGlzIHRhbGsgMi5cIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIlRhbGtOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGszXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZ290b1wiOiBbXCIzZDY2ZjRmOC1kY2Q4LTQ4NmMtYmY4ZC00MzM1MzFmMTA4YjFcIl1cclxuICAgICAgICB9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwiY2hpbGRyZW5cIjpbXCJ0bGszYW5zMVwiXSxcclxuICAgICAgICBcInRleHRcIjpcIlRoaXMgaXMgdGFsayAzLlwiXHJcbiAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJhbnN3ZXJzXCI6WyB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMGFuczFcIixcclxuICAgICAgICBcImlucHV0XCI6IHtcclxuICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFtcImEwODZhOWNiLTNhYWEtNGNkYi1hYmNjLTk5NTVjNTQ2NzNkYlwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge1xyXG4gICAgICAgICAgICBcImdvdG9cIjogW1wiZTUyZWQ3N2ItNTE1Yi00YzE1LTlkNTAtZDQzZmNhNjM1YjQ4XCJdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICxcclxuICAgICAgICBcInRleHRcIjpcIkFuc3dlcjFcIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIkFuc3dlck5vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcInRsazBhbnMyXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm91dHB1dFwiOiB7XHJcbiAgICAgICAgICAgIFwiZ290b1wiOiBbXCJjMDk5ODJiOC01ZjFmLTQ3YzUtYjA1ZC1lMmVjNTYxODcyMTZcIl1cclxuICAgICAgICB9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwidGV4dFwiOlwiQW5zd2VyMlwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMGFuczNcIixcclxuICAgICAgICBcImlucHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwib3V0cHV0XCI6IHtcclxuICAgICAgICAgICAgXCJnb3RvXCI6IFtcIjNkNjZmNGY4LWRjZDgtNDg2Yy1iZjhkLTQzMzUzMWYxMDhiMVwiXVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJ0ZXh0XCI6XCJBbnN3ZXIzXCJcclxuICAgIH1cclxuICAgICxcclxuICAgIHtcclxuICAgICAgICBcImNsYXNzXCI6XCJBbnN3ZXJOb2RlXCIsXHJcbiAgICAgICAgXCJ1dWlkXCI6XCJ0bGsxYW5zMVwiLFxyXG4gICAgICAgIFwiaW5wdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJvdXRwdXRcIjoge31cclxuICAgICAgICAsXHJcbiAgICAgICAgXCJ0ZXh0XCI6IFwiQW5zd2VyMVwiXHJcbiAgICB9XHJcbiAgICAsXHJcbiAgICB7XHJcbiAgICAgICAgXCJjbGFzc1wiOlwiQW5zd2VyTm9kZVwiLFxyXG4gICAgICAgIFwidXVpZFwiOlwidGxrMmFuczFcIixcclxuICAgICAgICBcImlucHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwib3V0cHV0XCI6IHt9XHJcbiAgICAgICAgLFxyXG4gICAgICAgIFwidGV4dFwiOiBcIkFuc3dlcjFcIlxyXG4gICAgfVxyXG4gICAgLFxyXG4gICAge1xyXG4gICAgICAgIFwiY2xhc3NcIjpcIkFuc3dlck5vZGVcIixcclxuICAgICAgICBcInV1aWRcIjpcInRsazNhbnMxXCIsXHJcbiAgICAgICAgXCJpbnB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcIm91dHB1dFwiOiB7fVxyXG4gICAgICAgICxcclxuICAgICAgICBcInRleHRcIjogXCJBbnN3ZXIxXCJcclxuICAgIH1cclxuICAgIF1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IFV0aWxzICAgICAgICAgICAgZnJvbSAnLi9jb3JlL1V0aWxzJztcclxuaW1wb3J0IEVycm9ySGFuZGxlciAgICAgZnJvbSAnLi9jb3JlL0Vycm9ySGFuZGxlcidcclxuaW1wb3J0IEVycm9yQ29kZSAgICAgICAgZnJvbSAnLi9jb3JlL0Vycm9yQ29kZSc7XHJcbmltcG9ydCBCYXNlTm9kZSAgICAgICAgIGZyb20gJy4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBMaW5rTm9kZSAgICAgICAgIGZyb20gJy4vY29yZS9MaW5rTm9kZSc7XHJcbmltcG9ydCBBY3Rvck5vZGUgICAgICAgIGZyb20gJy4vYWN0b3JzL0FjdG9yTm9kZSc7XHJcbi8vaW1wb3J0IEludmVudG9yeU5vZGUgIGZyb20gJy4vYWN0b3JzL0ludmVub3RyeU5vZGUnO1xyXG5pbXBvcnQgQ29uZGl0aW9uTm9kZSAgICBmcm9tICcuL2NvbmRpdGlvbnMvQ29uZGl0aW9uTm9kZSc7XHJcbmltcG9ydCBBbnN3ZXJOb2RlICAgICAgIGZyb20gJy4vZGlhbG9ncy9BbnN3ZXJOb2RlJztcclxuaW1wb3J0IERpYWxvZ05vZGUgICAgICAgZnJvbSAnLi9kaWFsb2dzL0RpYWxvZ05vZGUnO1xyXG5pbXBvcnQgVGFsa05vZGUgICAgICAgICBmcm9tICcuL2RpYWxvZ3MvVGFsa05vZGUnO1xyXG5pbXBvcnQgUXVlc3ROb2RlICAgICAgICBmcm9tICcuL3F1ZXN0cy9RdWVzdE5vZGUnO1xyXG5pbXBvcnQgVGFza05vZGUgICAgICAgICBmcm9tICcuL3F1ZXN0cy9UYXNrTm9kZSc7XHJcbmltcG9ydCBWYXJpYWJsZU5vZGUgICAgIGZyb20gJy4vdmFyaWFibGVzL1ZhcmlhYmxlTm9kZSc7XHJcblxyXG5jb25zdCBLRVlfQUNUT1JTID0gJ2FjdG9ycyc7XHJcbmNvbnN0IEtFWV9BTlNXRVJTID0gJ2Fuc3dlcnMnO1xyXG5jb25zdCBLRVlfQ09ORElUSU9OUyA9ICdjb25kaXRpb25zJztcclxuY29uc3QgS0VZX0RJQUxPR1MgPSAnZGlhbG9ncyc7XHJcbmNvbnN0IEtFWV9MSU5LUyA9ICdsaW5rcyc7XHJcbmNvbnN0IEtFWV9TQ1JJUFRTID0gJ3NjcmlwdHMnO1xyXG5jb25zdCBLRVlfVEFMS1MgPSAndGFsa3MnO1xyXG5jb25zdCBLRVlfVEFTS1MgPSAndGFza3MnO1xyXG5jb25zdCBLRVlfUVVFU1RTID0gJ3F1ZXN0cyc7XHJcbmNvbnN0IEtFWV9WQVJJQUJMRVMgPSAndmFyaWFibGVzJztcclxuXHJcbmxldCBSUEdTeXN0ZW0gPSBmdW5jdGlvbiAoZGF0YSxlZGl0b3IpIHtcclxuXHJcbiAgbGV0IF9vYmplY3RQb29sID0ge30sXHJcbiAgX2VkaXRvciA9IGVkaXRvcnx8bnVsbCxcclxuICBfZXJyb3JIYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcihfZWRpdG9yKSxcclxuICBfY29udGV4dCA9IG51bGwsXHJcbiAgX2xhc3RDaGlsZCA9IG51bGwsXHJcbiAgX3BhcmVudEhpc3RvcnkgPSBbXSxcclxuICBfaGFsZkxpbmtzID0ge1xyXG4gICAgb3V0OiBbXSxcclxuICAgIGlucDogW11cclxuICB9O1xyXG5cclxuICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xyXG4gICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICBfb2JqZWN0UG9vbFtrZXldID0gZGF0YVtrZXldLm1hcCgoZCkgPT4gX25vZGVGYWN0b3J5KGQsdGhpcykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX25vZGVGYWN0b3J5KGRhdGEpIHtcclxuICAgIGxldCBjbGFzc05hbWUgPSBkYXRhLmNsYXNzO1xyXG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcclxuICAgICAgY2FzZSAnQWN0b3JOb2RlJzogICAgIHJldHVybiBuZXcgQWN0b3JOb2RlKGRhdGEsdGhpcyk7XHJcbiAgICAgIGNhc2UgJ0NvbmRpdGlvbk5vZGUnOiByZXR1cm4gbmV3IENvbmRpdGlvbk5vZGUoZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnQW5zd2VyTm9kZSc6ICAgIHJldHVybiBuZXcgQW5zd2VyTm9kZShkYXRhLHRoaXMpO1xyXG4gICAgICBjYXNlICdEaWFsb2dOb2RlJzogICAgcmV0dXJuIG5ldyBEaWFsb2dOb2RlKGRhdGEsdGhpcyk7XHJcbiAgICAgIGNhc2UgJ1RhbGtOb2RlJzogICAgICByZXR1cm4gbmV3IFRhbGtOb2RlKGRhdGEsdGhpcyk7XHJcbiAgICAgIGNhc2UgJ1F1ZXN0Tm9kZSc6ICAgICByZXR1cm4gbmV3IFF1ZXN0Tm9kZShkYXRhLHRoaXMpO1xyXG4gICAgICBjYXNlICdUYXNrTm9kZSc6ICAgICAgcmV0dXJuIG5ldyBUYXNrTm9kZShkYXRhLHRoaXMpO1xyXG4gICAgICBjYXNlICdMaW5rTm9kZSc6ICAgICAgcmV0dXJuIG5ldyBMaW5rTm9kZShkYXRhLHRoaXMpO1xyXG4gICAgICBjYXNlICdWYXJpYWJsZU5vZGUnOiAgcmV0dXJuIG5ldyBWYXJpYWJsZU5vZGUoZGF0YSx0aGlzKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLkNMQVNTX05PVF9ERUZJTkVELHtjbGFzczpjbGFzc05hbWV9KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9maW5kTm9kZUluQXJyYXkoYXJyYXksaWQpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYoYXJyYXlbaV0uZ2V0SWQoKSA9PT0gaWQpIHJldHVybiBhcnJheVtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgbGV0IF9maW5kTm9kZSA9IGZ1bmN0aW9uKG9iaklkKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gX29iamVjdFBvb2wpIHtcclxuICAgICAgaWYgKF9vYmplY3RQb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBsZXQgb2JqID0gX2ZpbmROb2RlSW5BcnJheShfb2JqZWN0UG9vbFtrZXldLG9iaklkKTtcclxuICAgICAgICBpZihvYmogIT09IG51bGwpIHJldHVybiBvYmo7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vSXMgZXJyb3IgbWVzc2FnZSBuZWNjZXNzYXJ5IGhlcmU/IFRvIGNvbnNpZGVyLlxyXG4gICAgLy9fZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLk9CSkVDVF9OT1RfRk9VTkQse2lkOm9iaklkfSk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LFxyXG5cbiAgX2dldE5vZGUgPSBmdW5jdGlvbihrZXksb2JqSWQpIHtcbiAgICBsZXQgb2JqID0gX2ZpbmROb2RlSW5BcnJheShfb2JqZWN0UG9vbFtrZXldLG9iaklkKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIF9hZGROb2RlID0gZnVuY3Rpb24oa2V5LG9iaikge1xyXG4gICAgaWYoIV9vYmplY3RQb29sW2tleV0pIF9vYmplY3RQb29sW2tleV0gPSBbXTtcclxuICAgIF9vYmplY3RQb29sW2tleV0ucHVzaChvYmopO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVOb2RlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBfb2JqZWN0UG9vbCkge1xyXG4gICAgICBpZiAoX29iamVjdFBvb2wuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgIGlmKHRoaXMuX3JlbW92ZU5vZGVCeUtleShrZXksaWQpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVOb2RlQnlLZXkgPSBmdW5jdGlvbihrZXksaWQpIHtcclxuICAgIGxldCBpbmRleCA9IFV0aWxzLmdldEluZGV4QnlJZChfb2JqZWN0UG9vbFtrZXldLGlkKTtcclxuICAgIGxldCBpc05vZGVGb3VuZCA9IGluZGV4ID4gLTE7XHJcbiAgICBpZihpc05vZGVGb3VuZCkge1xyXG4gICAgICBsZXQgbm9kZSA9IF9vYmplY3RQb29sW2tleV0uc3BsaWNlKGluZGV4LDEpWzBdO1xyXG4gICAgICBub2RlLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc05vZGVGb3VuZDtcclxuICB9LFxyXG5cclxuICBfc2V0Q29ubmVjdGlvbiA9IGZ1bmN0aW9uKHR5cGUsbm9kZUlkMSxub2RlSWQyKSB7XHJcbiAgICBpZihub2RlSWQxID09PSBub2RlSWQyKSB7XHJcbiAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuQ09OTkVDVElPTl9UT19JVFNFTEYse25vZGU6bm9kZUlkMX0pO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZTEgPSBfZmluZE5vZGUobm9kZUlkMSk7XHJcbiAgICBsZXQgbm9kZTIgPSBfZmluZE5vZGUobm9kZUlkMik7XHJcbiAgICBpZihub2RlMSA9PT0gbnVsbCB8fCBub2RlMiA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgaWYobm9kZTEuY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSAmJiBub2RlMi5jYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkpIHtcclxuICAgICAgbGV0IGxpbmsgPSBuZXcgTGlua05vZGUoe3R5cGU6dHlwZSxvdXRwdXQ6bm9kZUlkMSxpbnB1dDpub2RlSWQyfSk7XHJcbiAgICAgIGxldCBsaW5rSWQgPSBsaW5rLmdldElkKCk7XHJcbiAgICAgIF9hZGROb2RlKEtFWV9MSU5LUyxsaW5rKTtcclxuICAgICAgbm9kZTEuc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCk7XHJcbiAgICAgIG5vZGUyLnNldElucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCk7XHJcbiAgICAgIHJldHVybiBsaW5rSWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLklNUFJPUEVSX0NPTk5FQ1RJT04se1xyXG4gICAgICAgIHR5cGU6dHlwZSxcclxuICAgICAgICBub2RlMTpub2RlSWQxLFxyXG4gICAgICAgIG5vZGUyOm5vZGVJZDJcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBfZ2V0Q29ubmVjdGlvbiA9IGZ1bmN0aW9uKGxpbmtJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dldE5vZGUoS0VZX0xJTktTLGxpbmtJZCk7XHJcbiAgfSxcclxuXHJcbiAgX2dldENvbm5lY3Rpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX29iamVjdFBvb2xbS0VZX0xJTktTXTtcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKGxpbmtJZCkge1xyXG4gICAgdGhpcy5fcmVtb3ZlTm9kZUJ5S2V5KEtFWV9MSU5LUyxsaW5rSWQpO1xyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvL01FVEhPRCBDSEFJTklOR1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHVzZWQgdG8gY2hlY2sgcGFzc2VkIHBhcmFtZXRlcnMgYW5kIGxhdGVyIG1lcmdlIHRoZW0gaW50b1xyXG4gICAqIHNpbmdsZSBvYmplY3QuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgICAgIE1hbmRhdG9yeSBpZCBvZiBub2RlLlxyXG4gICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zICBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gUGFyYW1ldGVycyBtZXJnZWQgaW50byBvYmplY3QuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX2NoZWNrQW5kTWVyZ2VQYXJhbXMoXHJcbiAgICAgICAgICAgICAgICBpZCA9IF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuTUFOREFUT1JZX1BBUkFNLHtwYXJhbTonaWQnfSksXHJcbiAgICAgICAgICAgICAgICBwYXJhbXMpIHtcclxuICAgICAgaWYodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT1JSRUNUX1RZUEUse3R5cGU6J3N0cmluZyd9KTtcclxuICAgICAgfVxyXG4gICAgICBpZihwYXJhbXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcGFyYW1zICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT1JSRUNUX1RZUEUse3R5cGU6J29iamVjdCd9KTtcclxuICAgICAgfSBlbHNlIGlmKHBhcmFtcyA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBwYXJhbXMgPSB7fTtcclxuICAgICAgfVxyXG4gICAgICBwYXJhbXMudXVpZCA9IGlkO1xyXG4gICAgICByZXR1cm4gcGFyYW1zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2QgaGVscHMgaW4gdGhlIGNyZWF0aW9uIG9mIG5vZGVzLiBJdHMgZm9jdXMgb24gcHJvcGVyXHJcbiAgICogcGxhY2VtZW50IG9mIG5vZGVzIGluIHRyZWUuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgICAgIE1hbmRhdG9yeSBpZCBvZiBuZXdseSBjcmVhdGVkIG5vZGUuXHJcbiAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJhbXMgIFBhcmFtZXRlcnMgb2YgY3JlYXRlZCBub2RlLlxyXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGFzQ2hpbGQgRGV0ZXJtaW5lcyBpZiBub2RlIHNob3VsZCBiZSBhZGRlZCBhcyBjaGlsZFxyXG4gICAqIG9mIGFub3RoZXIgbm9kZSBvciBhcyBhbiBpbmRlcGVuZGVudCBub2RlLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gY2xhc3NOYW1lICAgTmFtZSBvZiBjbGFzcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgbm9kZS5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0b3JhZ2UgTmFtZSBvZiBub2RlIGdyb3VwIGluc2lkZSB3aGljaCBub2RlIHdpbGwgYmUgYWRkZWQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGFzQ2hpbGQsY2xhc3NOYW1lLHN0b3JhZ2UpIHtcclxuICAgIC8vRmlyc3QsIHdlIGNoZWNrIHRoYXQgaWQgYW5kIHBhcmFtcyBhcmUgdmFsaWQuXHJcbiAgICBwYXJhbXMgPSBfY2hlY2tBbmRNZXJnZVBhcmFtcyhpZCxwYXJhbXMpO1xyXG4gICAgLy9DbGFzcyBuYW1lIGZvciBsYXRlciB1c2FnZS5cclxuICAgIHBhcmFtcy5jbGFzcyA9IGNsYXNzTmFtZTtcclxuXHJcbiAgICAvL1Rlc3QgaWYgbm9kZSBzaG91bGQgYmUgYWRkZWQgYXMgY2hpbGQgb3IgcGFyZW50LlxyXG4gICAgaWYoYXNDaGlsZCkge1xyXG4gICAgICAvL0lmIGxhc3QgYWRkZWQgY2hpbGQgd2FzIG5vdCBudWxsIHRoZW4gd2UgbXVzdCBjaGVjayBhZGRpdGlvbmFsIGNvbmRpdGlvbnMuXHJcbiAgICAgIGlmKF9sYXN0Q2hpbGQgIT09IG51bGwpIHtcclxuICAgICAgICAvL0lmIGNvbnN0cnVjdG9yIG5hbWUgb2YgcHJldmlvdXMgY2hpbGQgbm9kZSwgaXMgZXF1YWwgdG8gbmFtZSBvZiBjbGFzcyxcclxuICAgICAgICAvL3dob3NlIHdlIHRyeSB0byBjcmVhdGUsIGl0IG1lYW5zIG5vZGUgc2hvdWxkIGJlIGFkZGVkIHRvIGN1cnJlbnQgcGFyZW50LlxyXG4gICAgICAgIGlmKF9sYXN0Q2hpbGQuY29uc3RydWN0b3IubmFtZSA9PT0gY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICBjcmVhdGVDaGlsZE5vZGUocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9JZiBuYW1lcyBvZiBjb25zdHJ1Y3RvcnMgbm90IG1hdGNoLCB0aGVuIHdlIG11c3QgY2hlY2sgaWYgbmV3IG5vZGVcclxuICAgICAgICAvL2NhbiBiZSBhZGRlZCBhcyBjaGlsZCB0byBvdXIgcHJldmlvdXMgY2hpbGQuXHJcbiAgICAgICAgZWxzZSBpZihfbGFzdENoaWxkLmNhbkFkZENoaWxkKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgIF9wYXJlbnRIaXN0b3J5LnVuc2hpZnQoX2xhc3RDaGlsZCk7XHJcbiAgICAgICAgICBjcmVhdGVDaGlsZE5vZGUocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9GaW5hbGx5IGlmIHByZXZpb3VzIGNvbmRpdGlvbnMgYXJlIGZhbHNlIHdlIHRyeSBnbyBiYWNrIHRvIHByZXZpb3VzXHJcbiAgICAgICAgLy9wYXJlbnQgbm9kZS5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIF9sYXN0Q2hpbGQgPSBfcGFyZW50SGlzdG9yeS5zaGlmdCgpfHxudWxsO1xyXG4gICAgICAgICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGFzQ2hpbGQsY2xhc3NOYW1lLHN0b3JhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL0lmIGxhc3QgY2hpbGQgaXMgbnVsbCwgdGhlbiB3ZSBjaGVjayBpZiBub2RlIGNhbiBiZSBhZGRlZCB0byBjdXJyZW50XHJcbiAgICAgIC8vcGFyZW50IG5vZGUuXHJcbiAgICAgIGVsc2UgaWYoX3BhcmVudEhpc3RvcnkubGVuZ3RoID4gMCAmJiBfcGFyZW50SGlzdG9yeVswXS5jYW5BZGRDaGlsZChjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgY3JlYXRlQ2hpbGROb2RlKHBhcmFtcyk7XHJcbiAgICAgIH1cclxuICAgICAgLy9JZiBsYXN0IGNoaWxkIGFuZCBsYXN0IHBhcmVudCBpcyBlcXVhbCB0byBudWxsLCB0aGVuIG5ldyBjaGlsZCBub2RlXHJcbiAgICAgIC8vY2FudCBiZSBhZGRlZCwgc28gd2UgdGhyb3cgZXJyb3IuXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT01QQVRJQkxFX0NISUxELHtcclxuICAgICAgICAgIGNoaWxkOmNsYXNzTmFtZSxcclxuICAgICAgICAgIHBhcmVudDogX3BhcmVudEhpc3RvcnkubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgPyBfcGFyZW50SGlzdG9yeVswXS5jb25zdHJ1Y3Rvci5uYW1lXHJcbiAgICAgICAgICAgICAgICA6ICdudWxsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvL0lmIG5vZGUgaXMgYWRkZWQgYXMgcGFyZW50LCB0aGVuIGxhc3QgY2hpbGQgaXMgc2V0IHRvIG51bGxcclxuICAgICAgLy9hbmQgcGFyZW50IGhpc3RvcnkgaXMgY2xlYXJlZC5cclxuICAgICAgX2xhc3RDaGlsZCA9IG51bGw7XHJcbiAgICAgIF9wYXJlbnRIaXN0b3J5Lmxlbmd0aCA9IDA7XHJcbiAgICAgIC8vQWZ0ZXIgdGhhdCwgbmV3IG5vZGUgaXMgY3JlYXRlZC5cclxuICAgICAgbGV0IG5vZGUgPSBfbm9kZUZhY3RvcnkocGFyYW1zKTtcclxuICAgICAgX3BhcmVudEhpc3RvcnkgPSBbbm9kZV07XHJcbiAgICAgIF9hZGROb2RlKHN0b3JhZ2Usbm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hpbGROb2RlKG5vZGVQYXJhbXMpIHtcclxuICAgICAgLy9XZSBjcmVhdGUgYSBuZXcgbm9kZSwgYW5kIHRoZW4gc2V0IGFzIHRoZSBsYXN0IGNoaWxkLlxyXG4gICAgICBfbGFzdENoaWxkID0gX25vZGVGYWN0b3J5KG5vZGVQYXJhbXMpO1xyXG4gICAgICAvL1RoZW4gd2UgYWRkIG91ciBmcmVzaGx5IGNyZWF0ZWQgbm9kZSB0byBpdHMgcGFyZW50LlxyXG4gICAgICBfcGFyZW50SGlzdG9yeVswXS5hZGRDaGlsZChfbGFzdENoaWxkLmdldElkKCkpO1xyXG4gICAgICAvL0ZpbmFsbHkgbmV3IG5vZGUgaXMgYWRkZWQgdG8gbWFpbiBzdG9yYWdlIG9iamVjdC5cclxuICAgICAgX2FkZE5vZGUoc3RvcmFnZSxfbGFzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIHJlbW92ZSBub2RlcyBmcm9tIG9iamVjdCBwb29sXHJcbiAgICogYW5kIHJlc2V0IGNvbnRleHQgb2YgXCJtZXRob2QgY2hhaW5pbmdcIiBhbGdvcml0aG0uXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgSWQgb2Ygbm9kZSB0byBiZSByZW1vdmVkLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30ga2V5IE5hbWUgb2Ygbm9kZSBncm91cCB3aGljaCBjb250YWlucyBub2RlIHRvIHJlbW92ZS5cclxuICAgKi9cclxuICBmdW5jdGlvbiBfY2hhaW5Ob2RlUmVtb3ZlcihpZCxrZXkpIHtcclxuICAgIF9sYXN0Q2hpbGQgPSBudWxsO1xyXG4gICAgX3BhcmVudEhpc3RvcnkubGVuZ3RoID0gMDtcclxuICAgIHRoaXMuX3JlbW92ZU5vZGVCeUtleShrZXksaWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgZm9yIGNyZWF0aW5nIHRlbXBvcmFyeSBsaW5rcyAoaGFsZiBsaW5rcylcclxuICAgKiBvciBjb21wbGV0ZSBMaW5rIG5vZGVzLCB3aGVuIGlucHV0IGFuZCBvdXRwdXQgY291bnRlcnBhcnRzIGFyZSBwcmVzZW50LlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSAgICAgIERlZmluZXMgdHlwZSBvZiBjb25uZWN0aW9uLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gaWQgICAgICAgIElkIG9mIHRhcmdldGVkIG5vZGUgaW50byB3aGljaCBjb25uZWN0aW9uXHJcbiAgICogc2hvdWxkIGJlIG1hZGUuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzdGFydFNpZGUgRGVmaW5lcyBjdXJyZW50IHN0YXJ0IHNpZGUgb2YgdGhlIGxpbmsuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBlbmRTaWRlICAgRGVmaW5lcyBjdXJyZW50IGVuZCBzaWRlIG9mIHRoZSBsaW5rLlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIF9jaGFpbkxpbmtDcmVhdG9yKHR5cGUsaWQsc3RhcnRTaWRlLGVuZFNpZGUpIHtcclxuICAgIGxldCBvcHBvc2l0ZSA9IG51bGw7XHJcbiAgICBsZXQgbm9kZSA9IG51bGw7XHJcbiAgICAvL0ZpcnN0IHdlIG11c3QgY2hlY2sgd2hldGhlciBvdXIgbWV0aG9kIGlzIGNhbGxlZCBvbiBub2RlLlxyXG4gICAgaWYoX2xhc3RDaGlsZCAhPT0gbnVsbCkge1xyXG4gICAgICBub2RlID0gX2xhc3RDaGlsZDtcclxuICAgIH0gZWxzZSBpZihfcGFyZW50SGlzdG9yeVswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIG5vZGUgPSBfcGFyZW50SGlzdG9yeVswXTtcclxuICAgIH1cclxuICAgIC8vSWYgb3VyIGxhc3Qgbm9kZSBpcyBub3QgbnVsbCwgd2UgY2FuIHByb2NlZWQgZnVydGhlci5cclxuICAgIGlmKG5vZGUgIT09IG51bGwpIHtcclxuICAgICAgLy9PdXIgbmV4dCB0YXNrIGlzIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbiBhcnJheSBvZiBcImhhbGYgbGlua3NcIi4gVGhpcyBzdGVwXHJcbiAgICAgIC8vaXMgbmVjZXNzYXJ5IHRvIGZpbmQgb3V0IHdoZXRoZXIgd2Ugc2hvdWxkIGNyZWF0ZSBhbm90aGVyIFwiaGFsZiBsaW5rXCJcclxuICAgICAgLy9vciBjb21wbGV0ZSBMaW5rTm9kZS4gV2UgYXJlIGxvb2tpbmcgZm9yIHRoZSBvcHBvc2l0ZSBzaWRlIG9mIHRoZSBsaW5rLlxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9oYWxmTGlua3NbZW5kU2lkZV0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgbGluayA9IF9oYWxmTGlua3NbZW5kU2lkZV1baV07XHJcbiAgICAgICAgaWYobGluay50eXBlID09PSB0eXBlICYmIGxpbmsuaWQgPT09IG5vZGUuZ2V0SWQoKSl7XHJcbiAgICAgICAgICBvcHBvc2l0ZSA9IF9oYWxmTGlua3NbZW5kU2lkZV0uc3BsaWNlKGksMSlbMF07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy9JZiBvcHBvc2l0ZSBzaWRlIGlzIG5vdCBhdmFpbGFibGUsIGl0IG1lYW5zIHdlIHNob3VsZCBjcmVhdGUgXCJoYWxmIGxpbmtcIi5cclxuICAgICAgaWYob3Bwb3NpdGUgPT09IG51bGwpIHtcclxuICAgICAgICBfaGFsZkxpbmtzW3N0YXJ0U2lkZV0ucHVzaCh7dHlwZSxpZH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vT3RoZXJ3aXNlIHdlIGNyZWF0ZSBMaW5rTm9kZS5cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgLy9NZXRob2QgXCJfc2V0Q29ubmVjdGlvblwiIGFsd2F5cyBjcmVhdGUgbGlua3MgaW4gZGVmaW5lZCBkaXJlY3Rpb25cclxuICAgICAgICAvL3N0YXJ0aW5nIGZyb20gaW5wdXQgc2lkZSB0byBvdXRwdXQgc2lkZSwgc28gaXMgaXQgaW1wb3J0YW50IHRvXHJcbiAgICAgICAgLy9wYXNzIHBhcmFtZXRlcnMgaW4gcHJvcGVyIG1hbm5lci5cclxuICAgICAgICBpZihzdGFydFNpZGUgPT09ICdpbnAnKSB7XHJcbiAgICAgICAgICBfc2V0Q29ubmVjdGlvbih0eXBlLGlkLG9wcG9zaXRlLmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX3NldENvbm5lY3Rpb24odHlwZSxvcHBvc2l0ZS5pZCxpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL0Vsc2UgaWYgYSBub2RlIGlzIG51bGwgdGhlbiBpdCBtZWFucyB0aGF0IG1ldGhvZCB3YXMgY2FsbGVkIG9uXHJcbiAgICAvL2FuIGluY29ycmVjdCB0YXJnZXQuXHJcbiAgICBlbHNlIHtcclxuICAgICAgX2Vycm9ySGFuZGxlci5zaG93TXNnKEVycm9yQ29kZS5JTkNPUlJFQ1RfTElOS19UQVJHRVQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IF9hZGRBY3RvciA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGZhbHNlLCdBY3Rvck5vZGUnLEtFWV9BQ1RPUlMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZUFjdG9yID0gZnVuY3Rpb24oYWN0b3JJZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoYWN0b3JJZCxLRVlfQUNUT1JTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRRdWVzdCA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGZhbHNlLCdRdWVzdE5vZGUnLEtFWV9RVUVTVFMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZVF1ZXN0ID0gZnVuY3Rpb24ocXVlc3RJZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIocXVlc3RJZCxLRVlfUVVFU1RTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGREaWFsb2cgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnRGlhbG9nTm9kZScsS0VZX0RJQUxPR1MpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZURpYWxvZyA9IGZ1bmN0aW9uKGRpYWxvZ0lkKSB7XHJcbiAgICBfY2hhaW5Ob2RlUmVtb3ZlcihkaWFsb2dJZCxLRVlfRElBTE9HUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfYWRkQ29uZGl0aW9uID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsZmFsc2UsJ0NvbmRpdGlvbk5vZGUnLEtFWV9DT05ESVRJT05TKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVDb25kaXRpb24gPSBmdW5jdGlvbihjb25kaXRpb25JZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoY29uZGl0aW9uSWQsS0VZX0NPTkRJVElPTlMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2FkZFZhcmlhYmxlID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsZmFsc2UsJ1ZhcmlhYmxlTm9kZScsS0VZX1ZBUklBQkxFUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlVmFyaWFibGUgPSBmdW5jdGlvbih2YXJpYWJsZUlkKSB7XHJcbiAgICBfY2hhaW5Ob2RlUmVtb3Zlcih2YXJpYWJsZUlkLEtFWV9WQVJJQUJMRVMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2FkZFRhbGsgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyx0cnVlLCdUYWxrTm9kZScsS0VZX1RBTEtTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVUYWxrID0gZnVuY3Rpb24oaWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGlkLEtFWV9UQUxLUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfYWRkQW5zd2VyID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsdHJ1ZSwnQW5zd2VyTm9kZScsS0VZX0FOU1dFUlMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZUFuc3dlciA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICBfY2hhaW5Ob2RlUmVtb3ZlcihpZCxLRVlfQU5TV0VSUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfaW5wID0gZnVuY3Rpb24odHlwZSxpZCkge1xyXG4gICAgX2NoYWluTGlua0NyZWF0b3IodHlwZSxpZCwnaW5wJywnb3V0Jyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfb3V0ID0gZnVuY3Rpb24odHlwZSxpZCkge1xyXG4gICAgX2NoYWluTGlua0NyZWF0b3IodHlwZSxpZCwnb3V0JywnaW5wJyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy9HRVRURVJTXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIF9nZXRBY3RvciA9IGZ1bmN0aW9uKGFjdG9ySWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXROb2RlKEtFWV9BQ1RPUlMsYWN0b3JJZCk7XHJcbiAgfSxcclxuXHJcbiAgX2dldEFjdG9ycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIF9vYmplY3RQb29sW0tFWV9BQ1RPUlNdO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRDb25kaXRpb24gPSBmdW5jdGlvbihjb25kaXRpb25JZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dldE5vZGUoS0VZX0NPTkRJVElPTlMsY29uZGl0aW9uSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRDb25kaXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX29iamVjdFBvb2xbS0VZX0NPTkRJVElPTlNdO1xyXG4gIH0sXHJcblxyXG4gIF9nZXREaWFsb2cgPSBmdW5jdGlvbihkaWFsb2dJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dldE5vZGUoS0VZX0RJQUxPR1MsZGlhbG9nSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXREaWFsb2dzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gX29iamVjdFBvb2xbS0VZX0RJQUxPR1NdO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRRdWVzdCA9IGZ1bmN0aW9uKHF1ZXN0SWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXROb2RlKEtFWV9RVUVTVFMscXVlc3RJZCk7XHJcbiAgfSxcclxuXHJcbiAgX2dldFF1ZXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIF9vYmplY3RQb29sW0tFWV9RVUVTVFNdO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRWYXJpYWJsZSA9IGZ1bmN0aW9uKHZhcmlhYmxlSWQpIHtcclxuICAgIHJldHVybiBfZ2V0Tm9kZShLRVlfVkFSSUFCTEVTLHZhcmlhYmxlSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRWYXJpYWJsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfVkFSSUFCTEVTXTtcclxuICB9LFxyXG5cclxuICBfc2VyaWFsaXplRGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGRhdGEgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiBfb2JqZWN0UG9vbCkge1xyXG4gICAgICBpZiAoX29iamVjdFBvb2wuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgIGRhdGFba2V5XSA9IF9vYmplY3RQb29sW2tleV0ubWFwKChvYmopID0+IHtcclxuICAgICAgICAgIHJldHVybiBvYmouZ2V0RGF0YSA/IG9iai5nZXREYXRhKCkgOiBvYmo7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2VuZXJhbCBub2RlIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmaW5kTm9kZTogICAgICAgICBfZmluZE5vZGUsXHJcbiAgICBnZXROb2RlOiAgICAgICAgICBfZ2V0Tm9kZSxcclxuICAgIGFkZE5vZGU6ICAgICAgICAgIF9hZGROb2RlLFxyXG4gICAgcmVtb3ZlTm9kZTogICAgICAgX3JlbW92ZU5vZGUsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vTGluayBjcmVhdGlvbiBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2V0Q29ubmVjdGlvbjogICAgX3NldENvbm5lY3Rpb24sXHJcbiAgICBnZXRDb25uZWN0aW9uOiAgICBfZ2V0Q29ubmVjdGlvbixcclxuICAgIGdldENvbm5lY3Rpb25zOiAgIF9nZXRDb25uZWN0aW9ucyxcclxuICAgIHJlbW92ZUNvbm5lY3Rpb246IF9yZW1vdmVDb25uZWN0aW9uLFxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvL0NoYWluYWJsZSBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgYWRkQWN0b3I6ICAgICAgICBfYWRkQWN0b3IsXHJcbiAgICByZW1vdmVBY3RvcjogICAgIF9yZW1vdmVBY3RvcixcclxuICAgIGFkZFF1ZXN0OiAgICAgICAgX2FkZFF1ZXN0LFxyXG4gICAgcmVtb3ZlUXVlc3Q6ICAgICBfcmVtb3ZlUXVlc3QsXHJcbiAgICBhZGREaWFsb2c6ICAgICAgIF9hZGREaWFsb2csXHJcbiAgICByZW1vdmVEaWFsb2c6ICAgIF9yZW1vdmVEaWFsb2csXHJcbiAgICBhZGRDb25kaXRpb246ICAgIF9hZGRDb25kaXRpb24sXHJcbiAgICByZW1vdmVDb25kaXRpb246IF9yZW1vdmVDb25kaXRpb24sXHJcbiAgICBhZGRWYXJpYWJsZTogICAgIF9hZGRWYXJpYWJsZSxcclxuICAgIHJlbW92ZVZhcmlhYmxlOiAgX3JlbW92ZVZhcmlhYmxlLFxyXG4gICAgYWRkVGFsazogICAgICAgICBfYWRkVGFsayxcclxuICAgIHJlbW92ZVRhbGs6ICAgICAgX3JlbW92ZVRhbGssXHJcbiAgICBhZGRBbnN3ZXI6ICAgICAgIF9hZGRBbnN3ZXIsXHJcbiAgICByZW1vdmVBbnN3ZXI6ICAgIF9yZW1vdmVBbnN3ZXIsXHJcbiAgICBpbnA6ICAgICAgICAgICAgIF9pbnAsXHJcbiAgICBvdXQ6ICAgICAgICAgICAgIF9vdXQsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2V0dGVyIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBnZXRBY3RvcjogICAgICAgIF9nZXRBY3RvcixcclxuICAgIGdldEFjdG9yczogICAgICAgX2dldEFjdG9ycyxcclxuICAgIGdldENvbmRpdGlvbjogICAgX2dldENvbmRpdGlvbixcclxuICAgIGdldENvbmRpdGlvbnM6ICAgX2dldENvbmRpdGlvbnMsXHJcbiAgICBnZXREaWFsb2c6ICAgICAgIF9nZXREaWFsb2csXHJcbiAgICBnZXREaWFsb2dzOiAgICAgIF9nZXREaWFsb2dzLFxyXG4gICAgZ2V0UXVlc3Q6ICAgICAgICBfZ2V0UXVlc3QsXHJcbiAgICBnZXRRdWVzdHM6ICAgICAgIF9nZXRRdWVzdHMsXHJcbiAgICBnZXRWYXJpYWJsZTogICAgIF9nZXRWYXJpYWJsZSxcclxuICAgIGdldFZhcmlhYmxlczogICAgX2dldFZhcmlhYmxlcyxcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy9NaXNjYWxpbmV1cyBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2VyaWFsaXplRGF0YTogICAgX3NlcmlhbGl6ZURhdGFcclxuICB9O1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IFJQR1N5c3RlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuaW1wb3J0IExpbmtUeXBlICAgZnJvbSAnLi4vY29yZS9MaW5rVHlwZSc7XHJcblxyXG5sZXQgQWN0b3JOb2RlID0gKGZ1bmN0aW9uKCkge1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF9uYW1lID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2RpYWxvZyA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgLy9sZXQgX2ludmVudG9yeSA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG5cclxuICByZXR1cm4gY2xhc3MgQWN0b3JOb2RlIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBzdXBlcihkYXRhKTtcclxuICAgICAgX25hbWUuc2V0KHRoaXMsZGF0YSA/IGRhdGEubmFtZSA6ICcnKTtcclxuICAgICAgX2RpYWxvZy5zZXQodGhpcyxkYXRhID8gZGF0YS5kaWFsb2cgOiAnJyk7XHJcbiAgICAgIC8vX2ludmVudG9yeS5zZXQodGhpcyxkYXRhLmludmVudG9yeSA/ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEubmFtZSA9IHRoaXMuZ2V0TmFtZSgpO1xyXG4gICAgICBkYXRhLmRpYWxvZyA9IHRoaXMuZ2V0RGlhbG9nKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE5hbWUodmFsdWUpIHtcclxuICAgICAgX25hbWUuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgIHJldHVybiBfbmFtZS5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlhbG9nKCkge1xyXG4gICAgICByZXR1cm4gX2RpYWxvZy5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLypnZXRJbnZlbnRvcnkoKSB7XHJcbiAgICAgIHJldHVybiBfaW52ZW50b3J5LmdldCh0aGlzKTtcclxuICAgIH0qL1xyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuRElBTE9HOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5ESUFMT0cpLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG4gICAgZ2V0T3V0cHV0Q29ubmVjdGlvbnModHlwZSkge31cclxuICAgIHJlbW92ZU91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgX25hbWUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfZGlhbG9nLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgLy9faW52ZW50b3J5LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0pKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFjdG9yTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgQmFzZU5vZGUgICBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuaW1wb3J0IExpbmtUeXBlICAgZnJvbSAnLi4vY29yZS9MaW5rVHlwZSc7XHJcbmltcG9ydCBjb21waWxlciAgIGZyb20gJ0ByaXNpbmdzdGFjay9ueC1jb21waWxlJztcclxuXHJcbmxldCBDb25kaXRpb25Ob2RlID0gKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IF9sYWJlbCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9jb2RlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2NvbXBpbGVkID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3NhbmRib3ggPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQ29uZGl0aW9uTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfbGFiZWwuc2V0KHRoaXMsZGF0YS5sYWJlbCA/IGRhdGEubGFiZWwgOiAnJyk7XHJcbiAgICAgIF9jb2RlLnNldCh0aGlzLGRhdGEuY29kZSA/IGRhdGEuY29kZSA6IGAoZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9KSgpO2ApO1xyXG4gICAgICBfc2FuZGJveC5zZXQodGhpcyx7cnBnc30pO1xyXG4gICAgICBfY29tcGlsZWQuc2V0KHRoaXMsY29tcGlsZXIuY29tcGlsZUV4cHJlc3Npb24oX2NvZGUuZ2V0KHRoaXMpLCBfc2FuZGJveC5nZXQodGhpcykpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRMYWJlbCh0ZXh0KSB7XHJcbiAgICAgIF9sYWJlbC5zZXQodGhpcyx0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYWJlbCgpIHtcclxuICAgICAgcmV0dXJuIF9sYWJlbC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29kZShjb2RlKSB7XHJcbiAgICAgIF9jb2RlLnNldCh0aGlzLGNvZGUpO1xyXG4gICAgICBfY29tcGlsZWQuc2V0KHRoaXMsY29tcGlsZXIuY29tcGlsZUV4cHJlc3Npb24oX2NvZGUuZ2V0KHRoaXMpLCBfc2FuZGJveC5nZXQodGhpcykpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb2RlKCkge1xyXG4gICAgICByZXR1cm4gX2NvZGUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrKCkge1xyXG4gICAgICByZXR1cm4gX2NvbXBpbGVkLmdldCh0aGlzKSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLmxhYmVsID0gdGhpcy5nZXRMYWJlbCgpO1xyXG4gICAgICBkYXRhLmNvZGUgPSB0aGlzLmdldENvZGUoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuVklTSUJJTElUWTpcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkFDVElWSVRZOlxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldElucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldElucHV0Q29ubmVjdGlvbnModHlwZSkge31cclxuICAgIHJlbW92ZUlucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBfbGFiZWwuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfY29kZS5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9zYW5kYm94LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2NvbXBpbGVkLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IENvbmRpdGlvbk5vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQge1VVSUR9ICAgZnJvbSAnLi9VdGlscyc7XHJcbmltcG9ydCBMaW5rVHlwZSBmcm9tICcuL0xpbmtUeXBlJztcclxuXHJcbmNvbnN0IEtFWV9MSU5LUyA9ICdsaW5rcyc7XHJcbmNvbnN0IEtFWV9DT05ESVRJT05TID0gJ2NvbmRpdGlvbnMnO1xyXG5cclxubGV0IEJhc2VOb2RlID0gKGZ1bmN0aW9uKCl7XHJcbiAgLy9XZWFrIG1hcHMgYXJlIG5ldyBmZWF0dXJlIHRvIEphdmFTY3JpcHQuIFdlIGNhbiBzdG9yZSBwcml2YXRlXHJcbiAgLy9vYmplY3QgcHJvcGVydGllcyBpbiBrZXkvdmFsdWUgcGFpcnMgdXNpbmcgb3VyIGluc3RhbmNlIGFzIHRoZSBrZXksXHJcbiAgLy9hbmQgb3VyIGNsYXNzIGNhbiBjYXB0dXJlIHRob3NlIGtleS92YWx1ZSBtYXBzIGluIGEgY2xvc3VyZS5cclxuICBsZXQgX3JwZ3MgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfdXVpZCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9pbnB1dCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9vdXRwdXQgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIF9ycGdzLnNldCh0aGlzLHJwZ3MpO1xyXG4gICAgICAvL0lmIHV1aWQgbm90IHByZXNlbnQsIHRoZW4gYnkgZGVmYXVsdCB3ZSBhc3NpZ24gVW5pdmVyc2FsbHkgVW5pcXVlIElELlxyXG4gICAgICBfdXVpZC5zZXQodGhpcyxkYXRhLnV1aWQgPyBkYXRhLnV1aWQgOiBVVUlELmdlbmVyYXRlKCkpO1xyXG4gICAgICBfaW5wdXQuc2V0KHRoaXMsZGF0YS5pbnB1dCA/IGRhdGEuaW5wdXQgOiB7fSk7XHJcbiAgICAgIF9vdXRwdXQuc2V0KHRoaXMsZGF0YS5vdXRwdXQgPyBkYXRhLm91dHB1dCA6IHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSUEdTKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRSUEdTKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SWQodmFsdWUpIHtcclxuICAgICAgX3V1aWQuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldElkKCkge1xyXG4gICAgICByZXR1cm4gX3V1aWQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQ29uZGl0aW9uKGNvbmRpdGlvbklkKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb24gPSB0aGlzLmdldFJQR1MoKS5nZXROb2RlKEtFWV9DT05ESVRJT05TLGNvbmRpdGlvbklkKTtcclxuICAgICAgcmV0dXJuIGNvbmRpdGlvbiA/IGNvbmRpdGlvbi5jaGVjaygpIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYm9vbGVhbiB0aGF0IHJlZmxlY3RzIHZpc2libGlsaXR5IHN0YXRlIG9mIG5vZGUuXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBWaXNpYmlsaXR5IHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGlzVmlzaWJsZSgpIHtcclxuICAgICAgbGV0IGNvbmRpdGlvbnMgPSBnZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLlZJU0lCSUxJVFkpO1xyXG4gICAgICByZXR1cm4gY29uZGl0aW9ucyA/IHRoaXMuY2hlY2tDb25kaXRpb24oY29uZGl0aW9uc1swXSkgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBib29sZWFuIHRoYXQgcmVmbGVjdHMgYWN0aXZpdHkgc3RhdGUgb2Ygbm9kZS5cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IEFjdGl2ZSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBpc0FjdGl2ZSgpIHtcclxuICAgICAgbGV0IGNvbmRpdGlvbnMgPSBnZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkFDVElWSVRZKTtcclxuICAgICAgcmV0dXJuIGNvbmRpdGlvbnMgPyB0aGlzLmNoZWNrQ29uZGl0aW9uKGNvbmRpdGlvbnNbMF0pIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYXNzOnRoaXMuY29uc3RydWN0b3IubmFtZSxcclxuICAgICAgICB1dWlkOnRoaXMuZ2V0SWQoKSxcclxuICAgICAgICBpbnB1dDp0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoKSxcclxuICAgICAgICBvdXRwdXQ6dGhpcy5nZXRPdXRwdXRDb25uZWN0aW9ucygpXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQWRkQ2hpbGQodHlwZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2hpbGQoY2hpbGRJZCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDaGlsZChpbmRleCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZChpbmRleCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZHJlbigpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVDaGlsZHJlbihrZXkpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlSW5wdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZU91dHB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldENvbm5lY3Rpb24ob2JqLHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIGlmKCFvYmouaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgICAgICBvYmpbdHlwZV0gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBvYmpbdHlwZV0ucHVzaChsaW5rSWQpO1xyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHtcclxuICAgICAgX291dHB1dC5zZXQodGhpcyx0aGlzLl9zZXRDb25uZWN0aW9uKF9vdXRwdXQuZ2V0KHRoaXMpLHR5cGUsbGlua0lkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIF9pbnB1dC5zZXQodGhpcyx0aGlzLl9zZXRDb25uZWN0aW9uKF9pbnB1dC5nZXQodGhpcyksdHlwZSxsaW5rSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Q29ubmVjdGlvbnMob2JqLHR5cGUpIHtcclxuICAgICAgaWYodHlwZSkgcmV0dXJuICFvYmouaGFzT3duUHJvcGVydHkodHlwZSkgPyBbXSA6IG9ialt0eXBlXTtcclxuICAgICAgZWxzZSByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbm5lY3Rpb25zKF9vdXRwdXQuZ2V0KHRoaXMpLHR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldElucHV0Q29ubmVjdGlvbnModHlwZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q29ubmVjdGlvbnMoX2lucHV0LmdldCh0aGlzKSx0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlQ29ubmVjdGlvbihvYmosdHlwZSxsaW5rSWQpIHtcclxuICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KHR5cGUpKSB7XHJcbiAgICAgICAgb2JqW3R5cGVdID0gVXRpbHMucmVtb3ZlT2JqZWN0RnJvbUFycmF5KG9ialt0eXBlXSxsaW5rSWQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlT3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLHRoaXMuX3JlbW92ZUNvbm5lY3Rpb24oX291dHB1dC5nZXQodGhpcyksdHlwZSxsaW5rSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLHRoaXMuX3JlbW92ZUNvbm5lY3Rpb24oX2lucHV0LmdldCh0aGlzKSx0eXBlLGxpbmtJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUNoaWxkcmVuRnJvbShvYmosa2V5KSB7XHJcbiAgICAgIG9iai5maWx0ZXIoKGNoaWxkSWQsIGluZGV4LCBhcnIpID0+IHtcclxuICAgICAgICB0aGlzLmdldFJQR1MoKS5yZW1vdmVOb2RlKGtleSxjaGlsZElkKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUxpbmtzRnJvbShvYmopIHtcclxuICAgICAgZm9yICh2YXIgdHlwZSBpbiBvYmopIHtcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHR5cGUpKSB7XHJcbiAgICAgICAgICByZW1vdmVDaGlsZHJlbkZyb20ob2JqW3R5cGVdLEtFWV9MSU5LUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlTGlua3NGcm9tKF9vdXRwdXQuZ2V0KHRoaXMpKTtcclxuICAgICAgdGhpcy5fcmVtb3ZlTGlua3NGcm9tKF9pbnB1dC5nZXQodGhpcykpO1xyXG4gICAgICBfcnBncy5kZWxldGUodGhpcyk7XHJcbiAgICAgIF91dWlkLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2lucHV0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX291dHB1dC5kZWxldGUodGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBCYXNlTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuaW1wb3J0IFV0aWxzICAgIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xyXG5cclxubGV0IENvbXBvdW5kTm9kZSA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgX2NoaWxkcmVuID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIENvbXBvdW5kTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX2NoaWxkcmVuLnNldCh0aGlzLGRhdGEuY2hpbGRyZW4gPyBkYXRhLmNoaWxkcmVuIDogW10pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLmNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbigpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDaGlsZChjaGlsZElkKSB7XHJcbiAgICAgIGxldCBjaGlsZHJlbiA9IF9jaGlsZHJlbi5nZXQodGhpcyk7XHJcbiAgICAgIF9jaGlsZHJlbi5zZXQodGhpcyxVdGlscy5hZGRPYmplY3RUb0FycmF5KGNoaWxkcmVuLGNoaWxkSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDaGlsZChpbmRleCkge1xyXG4gICAgICBsZXQgY2hpbGRyZW4gPSBfY2hpbGRyZW4uZ2V0KHRoaXMpO1xyXG4gICAgICBfY2hpbGRyZW4uc2V0KHRoaXMsY2hpbGRyZW4uc3BsaWNlKGluZGV4LDEpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZChpbmRleCkge1xyXG4gICAgICBsZXQgY2hpbGRyZW4gPSBfY2hpbGRyZW4uZ2V0KHRoaXMpO1xyXG4gICAgICByZXR1cm4gY2hpbGRyZW4ubGVuZ3RoID4gaW5kZXggPyBjaGlsZHJlbltpbmRleF0gOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkcmVuKCkge1xyXG4gICAgICByZXR1cm4gX2NoaWxkcmVuLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlQ2hpbGRyZW4oa2V5KSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGRyZW5Gcm9tKF9jaGlsZHJlbi5nZXQodGhpcyksa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBfY2hpbGRyZW4uZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBDb21wb3VuZE5vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgTk9ERV9OT1RfRVhJU1RTID0gMDtcclxuY29uc3QgQ0xBU1NfTk9UX0RFRklORUQgPSAxO1xyXG5jb25zdCBDT05ORUNUSU9OX1RPX0lUU0VMRiA9IDI7XHJcbmNvbnN0IElNUFJPUEVSX0NPTk5FQ1RJT04gPSAzO1xyXG5jb25zdCBPQkpFQ1RfTk9UX0ZPVU5EID0gNDtcclxuY29uc3QgTUFOREFUT1JZX1BBUkFNID0gNTtcclxuY29uc3QgSU5DT1JSRUNUX1RZUEUgPSA2O1xyXG5jb25zdCBJTkNPUlJFQ1RfUEFSRU5UX05PREUgPSA3O1xyXG5jb25zdCBJTkNPUlJFQ1RfTElOS19UQVJHRVQgPSA4O1xyXG5jb25zdCBJTkNPTVBBVElCTEVfQ0hJTEQgPSA5O1xyXG5cclxuZXhwb3J0cy5OT0RFX05PVF9FWElTVFMgPSBOT0RFX05PVF9FWElTVFM7XHJcbmV4cG9ydHMuQ0xBU1NfTk9UX0RFRklORUQgPSBDTEFTU19OT1RfREVGSU5FRDtcclxuZXhwb3J0cy5DT05ORUNUSU9OX1RPX0lUU0VMRiA9IENPTk5FQ1RJT05fVE9fSVRTRUxGO1xyXG5leHBvcnRzLklNUFJPUEVSX0NPTk5FQ1RJT04gPSBJTVBST1BFUl9DT05ORUNUSU9OO1xyXG5leHBvcnRzLk9CSkVDVF9OT1RfRk9VTkQgPSBPQkpFQ1RfTk9UX0ZPVU5EO1xyXG5leHBvcnRzLk1BTkRBVE9SWV9QQVJBTSA9IE1BTkRBVE9SWV9QQVJBTTtcclxuZXhwb3J0cy5JTkNPUlJFQ1RfVFlQRSA9IElOQ09SUkVDVF9UWVBFO1xyXG5leHBvcnRzLklOQ09SUkVDVF9QQVJFTlRfTk9ERSA9IElOQ09SUkVDVF9QQVJFTlRfTk9ERTtcclxuZXhwb3J0cy5JTkNPUlJFQ1RfTElOS19UQVJHRVQgPSBJTkNPUlJFQ1RfTElOS19UQVJHRVQ7XHJcbmV4cG9ydHMuSU5DT01QQVRJQkxFX0NISUxEID0gSU5DT01QQVRJQkxFX0NISUxEO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCBFcnJvckNvZGUgZnJvbSAnLi9FcnJvckNvZGUnO1xyXG5cclxuXHJcbmxldCBFcnJvckhhbmRsZXIgPSBmdW5jdGlvbihlZGl0b3Ipe1xyXG4gIHJldHVybiB7XHJcbiAgICBzaG93TXNnOmZ1bmN0aW9uKGVycm9yQ29kZSxwYXJhbXMpIHtcclxuICAgICAgbGV0IG1zZyA9ICcnO1xyXG4gICAgICBzd2l0Y2ggKGVycm9yQ29kZSkge1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PREVfTk9UX0VYSVNUUzpcclxuICAgICAgICAgIG1zZyA9IGBOb2RlIG9mIHR5cGUgJHtwYXJhbXMudHlwZX0gaXMgbm90IGRlZmluZWQuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLkNMQVNTX05PVF9ERUZJTkVEOlxyXG4gICAgICAgICAgbXNnID0gYENsYXNzICR7cGFyYW1zLmNsYXNzfSBpcyBub3QgZGVmaW5lZC5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuQ09OTkVDVElPTl9UT19JVFNFTEY6XHJcbiAgICAgICAgICBtc2cgPSBgQ2Fubm90IGNvbm5lY3Qgbm9kZSBcIiR7cGFyYW1zLm5vZGV9XCIgdG8gaXRzZWxmLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5JTVBST1BFUl9DT05ORUNUSU9OOlxyXG4gICAgICAgICAgbXNnID0gYENhbm5vdCBjcmVhdGUgY29ubmVjdGlvbiBvZiB0eXBlIFwiJHtwYXJhbXMudHlwZX1cIiBmcm9tIG5vZGUgaWQgXCIke3BhcmFtcy5ub2RlMX1cIiB0byBub2RlIGlkIFwiJHtwYXJhbXMubm9kZTJ9XCIuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLk9CSkVDVF9OT1RfRk9VTkQ6XHJcbiAgICAgICAgICBtc2cgPSBgQ2Fubm90IGZpbmQgb2JqZWN0IHdpdGggaWQgXCIke3BhcmFtcy5pZH1cImA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5NQU5EQVRPUllfUEFSQU06XHJcbiAgICAgICAgICBtc2cgPSBgUGFyYW1ldGVyIFwiJHtwYXJhbXMucGFyYW19XCIgd2FzIGV4cGVjdGVkIGJ1dCBpbnN0ZWFkIGdvdCB1bmRlZmluZWQuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLklOQ09SUkVDVF9UWVBFOlxyXG4gICAgICAgICAgbXNnID0gYFdyb25nIHR5cGUgb2YgYXJndW1lbnQuIEV4cGVjdGVkIFwiJHtwYXJhbXMudHlwZX1cImA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5JTkNPUlJFQ1RfUEFSRU5UX05PREU6XHJcbiAgICAgICAgICBtc2cgPSBgTm9kZSBvZiB0eXBlIFwiJHtwYXJhbXMuY2hpbGR9XCIgY2FuIGJlIGFkZGVkIG9ubHkgdG8gXCIke3BhcmFtcy5wYXJlbnR9XCIgbm9kZS5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuSU5DT1JSRUNUX0xJTktfVEFSR0VUOlxyXG4gICAgICAgICAgbXNnID0gYENhbm5vdCBjcmVhdGUgbGluayBjb25uZWN0aW9uIHRvIG51bGwgbm9kZS5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuSU5DT01QQVRJQkxFX0NISUxEOlxyXG4gICAgICAgICAgbXNnID0gYENhbm5vdCBhZGQgY2hpbGQgb2YgdHlwZSBcIiR7cGFyYW1zLmNoaWxkfVwiIGludG8gcGFyZW50IG9mIHR5cGUgXCIke3BhcmFtcy5wYXJlbnR9XCIuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBtc2cgPSBgVW5rbm93biBlcnJvciBjb2RlIHBhc3NlZDogJHtlcnJvckNvZGV9YDtcclxuICAgICAgfVxyXG4gICAgICBpZihlZGl0b3IpIHtcclxuICAgICAgICBlZGl0b3Iuc2hvd01zZyhtc2cpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xyXG4gICAgICAgIC8vYWRkIHdhcm5pbmcgbW9kZT9cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gRXJyb3JIYW5kbGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5cclxuXHJcbmxldCBMaW5rTm9kZSA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgbGV0IF90eXBlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX291dHB1dCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9pbnB1dCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBMaW5rTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncyl7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF90eXBlLnNldCh0aGlzLGRhdGEudHlwZSk7XHJcbiAgICAgIF9pbnB1dC5zZXQodGhpcyxkYXRhLmlucHV0ID8gZGF0YS5pbnB1dCA6ICcnKTtcclxuICAgICAgX291dHB1dC5zZXQodGhpcyxkYXRhLm91dHB1dCA/IGRhdGEub3V0cHV0IDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldElucCgpIHtcclxuICAgICAgcmV0dXJuIF9pbnB1dC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3V0KCkge1xyXG4gICAgICByZXR1cm4gX291dHB1dC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHlwZSgpIHtcclxuICAgICAgcmV0dXJuIF90eXBlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS50eXBlID0gdGhpcy5nZXRUeXBlKCk7XHJcbiAgICAgIGRhdGEuaW5wdXQgPSB0aGlzLmdldElucCgpO1xyXG4gICAgICBkYXRhLm91dHB1dCA9IHRoaXMuZ2V0T3V0KCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcbiAgICBzZXRJbnB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcbiAgICBnZXRPdXRwdXRDb25uZWN0aW9ucyh0eXBlKSB7fVxyXG4gICAgZ2V0SW5wdXRDb25uZWN0aW9ucyh0eXBlKSB7fVxyXG4gICAgcmVtb3ZlT3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIHJlbW92ZUlucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBsZXQgbGlua0lucCA9IHRoaXMuZ2V0SW5wKCk7XHJcbiAgICAgIGxldCBsaW5rT3V0ID0gdGhpcy5nZXRPdXQoKTtcclxuICAgICAgbGV0IGlucE9iaiA9IHRoaXMuZ2V0UlBHUygpLmZpbmROb2RlKGxpbmtJbnApO1xyXG4gICAgICBsZXQgb3V0T2JqID0gdGhpcy5nZXRSUEdTKCkuZmluZE5vZGUobGlua091dCk7XHJcbiAgICAgIGlmKGlucE9iaikgaW5wT2JqLnJlbW92ZUlucHV0Q29ubmVjdGlvbih0aGlzLmdldFR5cGUoKSxsaW5rSW5wKTtcclxuICAgICAgaWYob3V0T2JqKSBvdXRPYmoucmVtb3ZlT3V0cHV0Q29ubmVjdGlvbih0aGlzLmdldFR5cGUoKSxsaW5rT3V0KTtcclxuICAgICAgX3R5cGUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfaW5wdXQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfb3V0cHV0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gTGlua05vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgUkVGRVJFTkNFID0gJ3JlZmVyZW5jZSc7XHJcbmNvbnN0IFZJU0lCSUxJVFkgPSAndmlzaWJpbGl0eSc7XHJcbmNvbnN0IEFDVElWSVRZID0gJ2FjdGl2aXR5JztcclxuY29uc3QgQUNUSU9OID0gJ2FjdGlvbic7XHJcbmNvbnN0IEdPVE8gPSAnZ290byc7XHJcbmNvbnN0IERJQUxPRyA9ICdkaWFsb2cnO1xyXG5cclxuZXhwb3J0cy5SRUZFUkVOQ0UgPSBSRUZFUkVOQ0U7XHJcbmV4cG9ydHMuVklTSUJJTElUWSA9IFZJU0lCSUxJVFk7XHJcbmV4cG9ydHMuQUNUSVZJVFkgPSBBQ1RJVklUWTtcclxuZXhwb3J0cy5BQ1RJT04gPSBBQ1RJT047XHJcbmV4cG9ydHMuR09UTyA9IEdPVE87XHJcbmV4cG9ydHMuRElBTE9HID0gRElBTE9HO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBGYXN0IFVVSUQgZ2VuZXJhdG9yLCBSRkM0MTIyIHZlcnNpb24gNCBjb21wbGlhbnQuXHJcbiAqIEBhdXRob3IgSmVmZiBXYXJkIChqY3dhcmQuY29tKS5cclxuICogQGxpY2Vuc2UgTUlUIGxpY2Vuc2VcclxuICogQGxpbmsgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxOTYzMTM2IzIxOTYzMTM2XHJcbiAqKi9cclxudmFyIFVVSUQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHNlbGYgPSB7fTtcclxuICB2YXIgbHV0ID0gW107IGZvciAodmFyIGk9MDsgaTwyNTY7IGkrKykgeyBsdXRbaV0gPSAoaTwxNj8nMCc6JycpKyhpKS50b1N0cmluZygxNik7IH1cclxuICBzZWxmLmdlbmVyYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZDAgPSBNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtcclxuICAgIHZhciBkMSA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgdmFyIGQyID0gTWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7XHJcbiAgICB2YXIgZDMgPSBNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtcclxuICAgIHJldHVybiBsdXRbZDAmMHhmZl0rbHV0W2QwPj44JjB4ZmZdK2x1dFtkMD4+MTYmMHhmZl0rbHV0W2QwPj4yNCYweGZmXSsnLScrXHJcbiAgICAgIGx1dFtkMSYweGZmXStsdXRbZDE+PjgmMHhmZl0rJy0nK2x1dFtkMT4+MTYmMHgwZnwweDQwXStsdXRbZDE+PjI0JjB4ZmZdKyctJytcclxuICAgICAgbHV0W2QyJjB4M2Z8MHg4MF0rbHV0W2QyPj44JjB4ZmZdKyctJytsdXRbZDI+PjE2JjB4ZmZdK2x1dFtkMj4+MjQmMHhmZl0rXHJcbiAgICAgIGx1dFtkMyYweGZmXStsdXRbZDM+PjgmMHhmZl0rbHV0W2QzPj4xNiYweGZmXStsdXRbZDM+PjI0JjB4ZmZdO1xyXG4gIH1cclxuICByZXR1cm4gc2VsZjtcclxufSkoKTtcclxuXHJcbmV4cG9ydHMuVVVJRCA9IFVVSUQ7XHJcblxyXG5sZXQgaW5kZXhPZk9iamVjdCA9IGZ1bmN0aW9uKGFycmF5LG9iaikge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmKGFycmF5W2ldID09PSBvYmopIHJldHVybiBpO1xyXG4gIH1cclxuICByZXR1cm4gLTE7XHJcbn07XHJcblxyXG5leHBvcnRzLmluZGV4T2ZPYmplY3QgPSBpbmRleE9mT2JqZWN0O1xyXG5cclxubGV0IGdldEluZGV4QnlJZCA9IGZ1bmN0aW9uKGFycmF5LGlkKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYoYXJyYXlbaV0uZ2V0SWQoKSA9PT0gaWQpIHJldHVybiBpO1xyXG4gIH1cclxuICByZXR1cm4gLTE7XHJcbn07XHJcbmV4cG9ydHMuZ2V0SW5kZXhCeUlkID0gZ2V0SW5kZXhCeUlkO1xyXG5cclxuZXhwb3J0cy5hZGRPYmplY3RUb0FycmF5ID0gZnVuY3Rpb24oYXJyYXksb2JqLGV4cGVjdGVkVHlwZSkge1xyXG4gIGlmKGV4cGVjdGVkVHlwZSAhPT0gdW5kZWZpbmVkICYmIGV4cGVjdGVkVHlwZSAhPT0gbnVsbCkge1xyXG4gICAgaWYoZXhwZWN0ZWRUeXBlLmlzUHJvdG90eXBlT2Yob2JqKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHR5cGUgb2Ygb2JqZWN0IHBhc3NlZC4gRXhwZWN0ZWQgJ1xyXG4gICAgICArZXhwZWN0ZWRUeXBlLmNvbnN0cnVjdG9yLm5hbWUrJyBvYmplY3QuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmKGluZGV4T2ZPYmplY3QoYXJyYXksb2JqKSA9PT0gLTEpIHtcclxuICAgIGFycmF5LnB1c2gob2JqKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59O1xyXG5cclxuLypleHBvcnRzLnJlbW92ZU9iamVjdEJ5SWQgPSBmdW5jdGlvbihhcnJheSxpZCkge1xyXG4gIGxldCBpbmRleCA9IGdldEluZGV4QnlJZChhcnJheSxpZCk7XHJcbiAgaWYoaW5kZXggIT09IC0xKSB7XHJcbiAgICBsZXQgc3BsaWNlZCA9IGFycmF5LnNwbGljZShpbmRleCwxKTtcclxuICAgIGlmKHNwbGljZWQuZGlzcG9zZSkgc3BsaWNlZC5kaXNwb3NlKCk7XHJcbiAgfVxyXG4gIHJldHVybiBhcnJheTtcclxufSovXHJcblxyXG5leHBvcnRzLnJlbW92ZU9iamVjdEZyb21BcnJheSA9IGZ1bmN0aW9uKGFycmF5LG9iaikge1xyXG4gIGxldCBpbmRleCA9IGluZGV4T2ZPYmplY3QoYXJyYXksb2JqKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGxldCBzcGxpY2VkID0gYXJyYXkuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgaWYoc3BsaWNlZC5kaXNwb3NlKSBzcGxpY2VkLmRpc3Bvc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5pbXBvcnQgTGlua1R5cGUgICBmcm9tICcuLi9jb3JlL0xpbmtUeXBlJztcclxuXHJcbmxldCBBbnN3ZXJOb2RlID0gKGZ1bmN0aW9uKCkge1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF90ZXh0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIEFuc3dlck5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3RleHQuc2V0KHRoaXMsZGF0YS50ZXh0ID8gZGF0YS50ZXh0IDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnRleHQgPSB0aGlzLmdldFRleHQoKTtcclxuXHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHQodmFsdWUpIHtcclxuICAgICAgX3RleHQuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHQoKSB7XHJcbiAgICAgIHJldHVybiBfdGV4dC5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFsaygpIHtcclxuICAgICAgbGV0IHRhbGtzID0gZ2V0T3V0cHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuR09UTyk7XHJcbiAgICAgIHJldHVybiB0YWxrcyA/IHRhbGtzWzBdIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLlZJU0lCSUxJVFk6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLlZJU0lCSUxJVFkpLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkFDVElWSVRZOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5BQ1RJVklUWSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZU91dHB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkdPVE86XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPdXRwdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5HT1RPKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgX3RleHQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQW5zd2VyTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBDb21wb3VuZE5vZGUgZnJvbSAnLi4vY29yZS9Db21wb3VuZE5vZGUnO1xyXG5pbXBvcnQgTGlua1R5cGUgICAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5pbXBvcnQgVXRpbHMgICAgICAgIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xyXG5cclxuXHJcbmNvbnN0IEtFWV9UQUxLUyA9ICd0YWxrcyc7XHJcblxyXG5sZXQgRGlhbG9nTm9kZSA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgX3N0YXJ0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIERpYWxvZ05vZGUgZXh0ZW5kcyBDb21wb3VuZE5vZGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfc3RhcnQuc2V0KHRoaXMsZGF0YS5zdGFydFRhbGsgPyBkYXRhLnN0YXJ0VGFsayA6ICcnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5zdGFydFRhbGsgPSB0aGlzLmdldFN0YXJ0VGFsaygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BZGRDaGlsZCh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0eXBlID09PSAnVGFsa05vZGUnO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXJ0VGFsayh0YWxrSWQpIHtcclxuICAgICAgX3N0YXJ0LnNldCh0aGlzLHRhbGtJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhcnRUYWxrKCkge1xyXG4gICAgICByZXR1cm4gX3N0YXJ0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLlZJU0lCSUxJVFk6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLlZJU0lCSUxJVFkpLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkFDVElWSVRZOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5BQ1RJVklUWSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZU91dHB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkRJQUxPRzpcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUNoaWxkcmVuKEtFWV9UQUxLUyk7XHJcbiAgICAgIF9zdGFydC5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IERpYWxvZ05vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgVXRpbHMgICAgICBmcm9tICcuLi9jb3JlL1V0aWxzJztcclxuaW1wb3J0IENvbXBvdW5kTm9kZSBmcm9tICcuLi9jb3JlL0NvbXBvdW5kTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5cclxuY29uc3QgS0VZX0FOU1dFUlMgPSAnYW5zd2Vycyc7XHJcblxyXG5sZXQgVGFsa05vZGUgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gIGxldCBfdGV4dCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBUYWxrTm9kZSBleHRlbmRzIENvbXBvdW5kTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3RleHQuc2V0KHRoaXMsZGF0YS50ZXh0ID8gZGF0YS50ZXh0IDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnRleHQgPSB0aGlzLmdldFRleHQoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGV4dCh2YWx1ZSkge1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGV4dCgpIHtcclxuICAgICAgcmV0dXJuIF90ZXh0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BZGRDaGlsZCh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0eXBlID09PSAnQW5zd2VyTm9kZSc7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlSW5wdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5HT1RPOlxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUNoaWxkcmVuKEtFWV9BTlNXRVJTKTtcclxuICAgICAgX3RleHQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBUYWxrTm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBDb21wb3VuZE5vZGUgZnJvbSAnLi4vY29yZS9Db21wb3VuZE5vZGUnO1xyXG5pbXBvcnQgUXVlc3RTdGF0dXMgIGZyb20gJy4vUXVlc3RTdGF0dXMnO1xyXG5cclxuY29uc3QgS0VZX1RBU0tTID0gJ3Rhc2tzJ1xyXG5cclxubGV0IFF1ZXN0Tm9kZSA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgX3RpdGxlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2Rlc2NyaXB0aW9uID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3N0YXR1cyA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBRdWVzdE5vZGUgZXh0ZW5kcyBDb21wb3VuZE5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF90aXRsZS5zZXQodGhpcyxkYXRhLnRpdGxlID8gZGF0YS50aXRsZSA6ICcnKTtcclxuICAgICAgX2Rlc2NyaXB0aW9uLnNldCh0aGlzLGRhdGEuZGVzY3JpcHRpb24gPyBkYXRhLmRlc2NyaXB0aW9uIDogJycpO1xyXG4gICAgICBfc3RhdHVzLnNldCh0aGlzLGRhdGEuc3RhdHVzID8gZGF0YS5zdGF0dXMgOiBRdWVzdFN0YXR1cy5JTkNPTVBMRVRFKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS50aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKTtcclxuICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHRoaXMuZ2V0RGVzY3JpcHRpb24oKTtcclxuICAgICAgZGF0YS5zdGF0dXMgPSB0aGlzLmdldFN0YXR1cygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BZGRDaGlsZCh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0eXBlID09PSAnVGFzayc7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGl0bGUodmFsdWUpIHtcclxuICAgICAgX3RpdGxlLnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUaXRsZSgpIHtcclxuICAgICAgcmV0dXJuIF90aXRsZS5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGVzY3JpcHRpb24odmFsdWUpIHtcclxuICAgICAgX2Rlc2NyaXB0aW9uLnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREZXNjcmlwdGlvbigpIHtcclxuICAgICAgcmV0dXJuIF9kZXNjcmlwdGlvbi5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3RhdHVzKHZhbHVlKSB7XHJcbiAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICBjYXNlIFF1ZXN0U3RhdHVzLkNPTVBMRVRFRDpcclxuICAgICAgICBjYXNlIFF1ZXN0U3RhdHVzLkZBSUxFRDpcclxuICAgICAgICAgIF9zdGF0dXMuc2V0KHRoaXMsdmFsdWUpO1xyXG4gICAgICAgIGNhc2UgUXVlc3RTdGF0dXMuSU5DT01QTEVURTpcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgX3N0YXR1cy5zZXQodGhpcyxRdWVzdFN0YXR1cy5JTkNPTVBMRVRFKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0YXR1cygpIHtcclxuICAgICAgcmV0dXJuIF9zdGF0dXMuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUNoaWxkcmVuKEtFWV9UQVNLUyk7XHJcbiAgICAgIF90aXRsZS5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9kZXNjcmlwdGlvbi5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9zdGF0dXMuZGVsZXRlKHRoaXMpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFF1ZXN0Tm9kZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmNvbnN0IElOQ09NUExFVEUgPSAncXVlc3RJbmNvbXBsZXRlJztcclxuY29uc3QgQ09NUExFVEVEID0gJ3F1ZXN0Q29tcGxldGVkJztcclxuY29uc3QgRkFJTEVEID0gJ3F1ZXN0RmFpbGVkJztcclxuXHJcbmV4cG9ydHMuSU5DT01QTEVURSA9IElOQ09NUExFVEU7XHJcbmV4cG9ydHMuQ09NUExFVEVEID0gQ09NUExFVEVEO1xyXG5leHBvcnRzLkZBSUxFRCA9IEZBSUxFRDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuXHJcbmxldCBUYXNrTm9kZSA9IChmdW5jdGlvbigpe1xyXG4gIHJldHVybiBjbGFzcyBUYXNrTm9kZSBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy90byBkb1xyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRhc2tOb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5pbXBvcnQgVmFyaWFibGVUeXBlIGZyb20gJy4vVmFyaWFibGVUeXBlJztcclxuXHJcbmxldCBWYXJpYWJsZU5vZGUgPSAoZnVuY3Rpb24oKXtcclxuICBsZXQgX3ZhbHVlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3R5cGUgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICBmdW5jdGlvbiBfcGFyc2VCb29sZWFuKHZhbCkge1xyXG4gICAgbGV0IGlzQm9vbCA9IHR5cGVvZiB2YWwgPT09IFZhcmlhYmxlVHlwZS5CT09MRUFOO1xyXG4gICAgaWYoaXNCb29sKSB7XHJcbiAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzd2l0Y2goU3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKS50cmltKCkpe1xyXG4gICAgICAgIGNhc2UgXCJ0cnVlXCI6IGNhc2UgXCJ5ZXNcIjogY2FzZSBcIjFcIjogcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY2FzZSBcImZhbHNlXCI6IGNhc2UgXCJub1wiOiBjYXNlIFwiMFwiOiBjYXNlIG51bGw6IHJldHVybiBmYWxzZTtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gQm9vbGVhbih2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfcGFyc2VTdHJpbmcodmFsKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gVmFyaWFibGVUeXBlLlNUUklORyA/IHZhbCA6IFN0cmluZyh2YWwpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX3BhcnNlTnVtYmVyKHZhbCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFZhcmlhYmxlVHlwZS5OVU1CRVIgPyB2YWwgOiBwYXJzZUZsb2F0KHZhbCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfcGFyc2VWYWx1ZSh2YWwsdHlwZSkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgVmFyaWFibGVUeXBlLkJPT0xFQU46XHJcbiAgICAgICAgcmV0dXJuIF9wYXJzZUJvb2xlYW4odmFsKTtcclxuICAgICAgY2FzZSBWYXJpYWJsZVR5cGUuTlVNQkVSOlxyXG4gICAgICAgIHJldHVybiBfcGFyc2VOdW1iZXIodmFsKTtcclxuICAgICAgY2FzZSBWYXJpYWJsZVR5cGUuU1RSSU5HOlxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBfcGFyc2VTdHJpbmcodmFsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjbGFzcyBWYXJpYWJsZU5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLHJwZ3MpIHtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3R5cGUuc2V0KHRoaXMsIGRhdGEuaGFzT3duUHJvcGVydHkoJ3R5cGUnKSA/IGRhdGEudHlwZSA6IFZhcmlhYmxlVHlwZS5TVFJJTkcpO1xyXG4gICAgICBfdmFsdWUuc2V0KHRoaXMsIGRhdGEuaGFzT3duUHJvcGVydHkoJ3ZhbHVlJykgPyBfcGFyc2VWYWx1ZShkYXRhLnZhbHVlLF90eXBlLmdldCh0aGlzKSkgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudHlwZSA9IHRoaXMuZ2V0VHlwZSgpO1xyXG4gICAgICBkYXRhLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZSh2YWwpIHtcclxuICAgICAgX3ZhbHVlLnNldCh0aGlzLF9wYXJzZVZhbHVlKHZhbCxfdHlwZS5nZXQodGhpcykpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZSgpIHtcclxuICAgICAgcmV0dXJuIF92YWx1ZS5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHlwZSgpIHtcclxuICAgICAgcmV0dXJuIF90eXBlLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuUkVGRVJFTkNFOlxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgX3ZhbHVlLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX3R5cGUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVmFyaWFibGVOb2RlO1xyXG4iLCJjb25zdCBCT09MRUFOID0gJ2Jvb2xlYW4nO1xyXG5jb25zdCBTVFJJTkcgPSAnc3RyaW5nJztcclxuY29uc3QgTlVNQkVSID0gJ251bWJlcic7XHJcblxyXG5leHBvcnRzLkJPT0xFQU4gPSBCT09MRUFOO1xyXG5leHBvcnRzLlNUUklORyA9IFNUUklORztcclxuZXhwb3J0cy5OVU1CRVIgPSBOVU1CRVI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgZGF0YSBmcm9tICcuLi9kYXRhL2RhdGEuanNvbic7XHJcbmltcG9ydCBSUEdTeXN0ZW0gZnJvbSAnLi9ycGdzL1JQR1N5c3RlbSc7XHJcblxyXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG4gICQoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHJwZ3MxID0gbmV3IFJQR1N5c3RlbSgpO1xyXG4gICAgcnBnczFcclxuICAgIC5hZGRBY3RvcignYWN0MScse25hbWU6J0FkYW0nfSkuaW5wKCdkaWFsb2cnLCdkbGcxJylcclxuICAgIC5hZGRDb25kaXRpb24oJ2NvbmQxJyx7Y29kZTpgXHJcbiAgICAgICAgKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBhbGVydChcIkNvbmRpdGlvbiB0ZXN0IVwiKTtcclxuICAgICAgICAgIC8vcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgYH0pLm91dCgndmlzaWJpbGl0eScsJ3RsazBhbnMxJylcclxuICAgIC5hZGREaWFsb2coJ2RsZzEnLHtzdGFydFRhbGs6J3RsazAnfSkub3V0KCdkaWFsb2cnLCdhY3QxJylcclxuICAgICAgLmFkZFRhbGsoJ3RsazAnLHt0ZXh0OidUaGlzIGlzIHRhbGsgMC4nfSlcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGswYW5zMScse3RleHQ6J0Fuc3dlcjEnfSkub3V0KCdnb3RvJywndGxrMScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlucCgndmlzaWJpbGl0eScsJ2NvbmQxJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGswYW5zMicse3RleHQ6J0Fuc3dlcjInfSkub3V0KCdnb3RvJywndGxrMicpXHJcbiAgICAgICAgLmFkZEFuc3dlcigndGxrMGFuczMnLHt0ZXh0OidBbnN3ZXIzJ30pLm91dCgnZ290bycsJ3RsazMnKVxyXG5cclxuICAgICAgLmFkZFRhbGsoJ3RsazEnLHt0ZXh0OidUaGlzIGlzIHRhbGsgMS4nfSkuaW5wKCdnb3RvJywndGxrMGFuczEnKVxyXG4gICAgICAgIC5hZGRBbnN3ZXIoJ3RsazFhbnMxJyx7dGV4dDonQW5zd2VyMSd9KVxyXG5cclxuICAgICAgLmFkZFRhbGsoJ3RsazInLHt0ZXh0OidUaGlzIGlzIHRhbGsgMi4nfSkuaW5wKCdnb3RvJywndGxrMGFuczInKVxyXG4gICAgICAgIC5hZGRBbnN3ZXIoJ3RsazJhbnMxJyx7dGV4dDonQW5zd2VyMSd9KVxyXG5cclxuICAgICAgLmFkZFRhbGsoJ3RsazMnLHt0ZXh0OidUaGlzIGlzIHRhbGsgMy4nfSkuaW5wKCdnb3RvJywndGxrMGFuczMnKVxyXG4gICAgICAgIC5hZGRBbnN3ZXIoJ3RsazNhbnMxJyx7dGV4dDonQW5zd2VyMSd9KVxyXG4gICAgLmFkZFZhcmlhYmxlKCdiMScse3R5cGU6J2Jvb2xlYW4nLHZhbHVlOmZhbHNlfSlcclxuICAgIC5hZGRWYXJpYWJsZSgnczEnLHt0eXBlOidzdHJpbmcnLHZhbHVlOidzc3Nzc3NzJ30pXHJcbiAgICAuYWRkVmFyaWFibGUoJ24xJyx7dHlwZTonbnVtYmVyJyx2YWx1ZTo1Nn0pXHJcbiAgICBsZXQgYjEgPSBycGdzMS5nZXRWYXJpYWJsZSgnYjEnKTtcclxuICAgIGxldCBzMSA9IHJwZ3MxLmdldFZhcmlhYmxlKCdzMScpO1xyXG4gICAgbGV0IG4xID0gcnBnczEuZ2V0VmFyaWFibGUoJ24xJyk7XHJcbiAgICBjb25zb2xlLmxvZygnYjEgdmFsdWUnLGIxLmdldFZhbHVlKCksYjEuZ2V0VHlwZSgpKTtcclxuICAgIGNvbnNvbGUubG9nKCdzMSB2YWx1ZScsczEuZ2V0VmFsdWUoKSxzMS5nZXRUeXBlKCkpO1xyXG4gICAgY29uc29sZS5sb2coJ24xIHZhbHVlJyxuMS5nZXRWYWx1ZSgpLG4xLmdldFR5cGUoKSk7XHJcblxyXG4gICAgbGV0IHJwZ3MxU2VyaWFsaXplZCA9IHJwZ3MxLnNlcmlhbGl6ZURhdGEoKTtcclxuICAgIGNvbnNvbGUubG9nKFwicnBnczFcIixycGdzMVNlcmlhbGl6ZWQpO1xyXG5cclxuICAgIGxldCBycGdzMiA9IG5ldyBSUEdTeXN0ZW0oSlNPTi5wYXJzZShycGdzMVNlcmlhbGl6ZWQpKTtcclxuICAgIGNvbnNvbGUubG9nKFwiZGF0YSBjcmVhdGVkIGlzIGVxdWFsIHRvIGRhdGEgcGFyc2VkOlwiLHJwZ3MxU2VyaWFsaXplZCA9PT0gcnBnczIuc2VyaWFsaXplRGF0YSgpKTtcclxuICB9KTtcclxuXHJcbn0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiJdfQ==
