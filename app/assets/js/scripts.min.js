/*!
 * rpgs
 * RPG System
 * https://github.com/stanosky/rpgs
 * @author Krzysztof Stano
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict'

module.exports = {
  compileCode,
  compileExpression
}

function compileExpression (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  const expression = `
  try { with (sandbox) { return ${src} } } catch (err) {
    if (!(err instanceof ReferenceError || err instanceof TypeError)) throw err
  }`
  return new Function('sandbox', expression).bind(sandbox, sandbox) // eslint-disable-line
}

function compileCode (src, sandbox) {
  if (typeof src !== 'string') {
    throw new TypeError('first argument must be a string')
  }
  if (typeof sandbox !== 'object') {
    throw new TypeError('second argument must be an object')
  }

  sandbox = new Proxy(sandbox, {get, has})
  return new Function('sandbox', `with (sandbox) { ${src} }`).bind(sandbox, sandbox) // eslint-disable-line
}

function get (target, key, receiver) {
  if (key === Symbol.unscopables) {
    return undefined
  }
  return Reflect.get(target, key, receiver)
}

function has (target, key) {
  return true
}

},{}],2:[function(require,module,exports){
module.exports={
    "actors":[
		{
			"class":"Actor",
			"uuid":"act1",
			"input": {}
		}
    ],
    "dialogs":[
		{
			"class":"Dialog",
			"uuid":"dlg1",
			"input": {},
			"output": {},
			"children": ["tlk0", "tlk1", "tlk2", "tlk3"], "startTalk": ""
		}
    ],
    "talks":[
		{
			"class":"Talk",
			"uuid":"tlk0",
			"input": {},
			"children": ["tlk0ans1", "tlk0ans2", "tlk0ans3"],
			"text": ""
		},
		{
			"class":"Talk",
			"uuid":"tlk1",
			"input": {},
			"children": ["tlk1ans1"], "text": ""
		},
		{
			"class":"Talk",
			"uuid":"tlk2",
			"input": {},
			"children": ["tlk2ans1"],
			"text": ""
		},
		{
			"class":"Talk",
			"uuid":"tlk3",
			"input": {},
			"children": ["tlk3ans1"],
			"text": ""
		}
    ],
    "answers":[
		{
			"class":"Answer",
			"uuid":"tlk0ans1",
			"input": {},
			"output": {},
			"text": ""
		},
		{
			"class":"Answer",
			"uuid":"tlk0ans2",
			"input": {},
			"output": {},
			"text": ""
		},
		{
			"class":"Answer",
			"uuid":"tlk0ans3",
			"input": {},
			"output": {},
			"text": ""
		},
		{
			"class":"Answer",
			"uuid":"tlk1ans1",
			"input": {},
			"output": {},
			"text": ""
		},
		{
			"class":"Answer",
			"uuid":"tlk2ans1",
			"input": {},
			"output": {},
			"text": ""
		},
		{
			"class":"Answer",
			"uuid":"tlk3ans1",
			"input": {},
			"output": {},
			"text": ""
		}
    ]
}

},{}],3:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };
//import Inventory    from './actors/Invenotry';


var _Utils = require('./core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _BaseNode = require('./core/BaseNode');

var _BaseNode2 = _interopRequireDefault(_BaseNode);

var _ErrorHandler = require('./core/ErrorHandler');

var _ErrorHandler2 = _interopRequireDefault(_ErrorHandler);

var _ErrorCode = require('./core/ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

var _Link = require('./core/Link');

var _Link2 = _interopRequireDefault(_Link);

var _Actor = require('./actors/Actor');

var _Actor2 = _interopRequireDefault(_Actor);

var _Condition = require('./conditions/Condition');

var _Condition2 = _interopRequireDefault(_Condition);

var _Answer = require('./dialogs/Answer');

var _Answer2 = _interopRequireDefault(_Answer);

var _Dialog = require('./dialogs/Dialog');

var _Dialog2 = _interopRequireDefault(_Dialog);

var _Talk = require('./dialogs/Talk');

var _Talk2 = _interopRequireDefault(_Talk);

var _Quest = require('./quests/Quest');

var _Quest2 = _interopRequireDefault(_Quest);

var _Task = require('./quests/Task');

var _Task2 = _interopRequireDefault(_Task);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var KEY_ACTORS = 'actors';
var KEY_ANSWERS = 'answers';
var KEY_CONDITIONS = 'conditions';
var KEY_DIALOGS = 'dialogs';
var KEY_LINKS = 'links';
var KEY_SCRIPTS = 'scripts';
var KEY_TALKS = 'talks';
var KEY_TASKS = 'tasks';
var KEY_QUESTS = 'quests';
var KEY_VARIABLES = 'variables';

var RPGSystem = function RPGSystem(data, editor) {
  var _this = this;

  var _objectPool = {},
      _editor = editor || null,
      _errorHandler = new _ErrorHandler2.default(_editor),
      _context = null,
      _lastChild = null,
      _parentHistory = [],
      _halfLinks = {
    out: [],
    inp: []
  };

  for (var key in data) {
    if (data.hasOwnProperty(key)) {
      _objectPool[key] = data[key].map(function (d) {
        return _nodeFactory(d, _this);
      });
    }
  }

  function _nodeFactory(data) {
    var className = data.class;
    switch (className) {
      case 'Actor':
        return new _Actor2.default(data, this);
      case 'Condition':
        return new _Condition2.default(data, this);
      case 'Answer':
        return new _Answer2.default(data, this);
      case 'Dialog':
        return new _Dialog2.default(data, this);
      case 'Talk':
        return new _Talk2.default(data, this);
      case 'Quest':
        return new _Quest2.default(data, this);
      case 'Task':
        return new _Task2.default(data, this);
      case 'Link':
        return new _Link2.default(data, this);
      default:
        _errorHandler.showMsg(_ErrorCode2.default.CLASS_NOT_DEFINED, { class: className });
        return null;
    }
  }

  var _findNode = function _findNode(objId) {
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        var obj = _Utils2.default.getObjectById(_objectPool[key], objId);
        if (obj !== null) return obj;
      }
    }
    //Is error message neccessary here? To consider.
    //_errorHandler.showMsg(ErrorCode.OBJECT_NOT_FOUND,{id:objId});
    return null;
  },
      _getNode = function _getNode(key, objId) {
    var obj = _Utils2.default.getObjectById(_objectPool[key], objId);
    return obj;
  },
      _addNode = function _addNode(key, obj) {
    if (!_objectPool[key]) _objectPool[key] = [];
    _objectPool[key].push(obj);
  },
      _removeNode = function _removeNode(key, id) {
    _objectPool[key] = _Utils2.default.removeObjectById(_objectPool[key], id);
  },
      _setConnection = function _setConnection(type, nodeId1, nodeId2) {
    if (nodeId1 === nodeId2) {
      _errorHandler.showMsg(_ErrorCode2.default.CONNECTION_TO_ITSELF, { node: nodeId1 });
      return false;
    }
    var node1 = _findNode(nodeId1);
    var node2 = _findNode(nodeId2);
    if (node1 === null || node2 === null) return;
    if (node1.canCreateOutputConnection(type) && node2.canCreateInputConnection(type)) {
      var link = new _Link2.default({ type: type, output: nodeId1, input: nodeId2 });
      var linkId = link.getId();
      _addNode(KEY_LINKS, link);
      node1.setOutputConnection(type, linkId);
      node2.setInputConnection(type, linkId);
      return linkId;
    } else {
      _errorHandler.showMsg(_ErrorCode2.default.IMPROPER_CONNECTION, {
        type: type,
        node1: nodeId1,
        node2: nodeId2
      });
      return false;
    }
  },
      _getConnection = function _getConnection(linkId) {
    return this._getNode(KEY_LINKS, linkId);
  },
      _getConnections = function _getConnections() {
    return _objectPool[KEY_LINKS];
  },
      _removeConnection = function _removeConnection(linkId) {
    this._removeNode(KEY_LINKS, linkId);
  };

  ////////////////////////////////////////////////////////////////
  //METHOD CHAINING
  ////////////////////////////////////////////////////////////////

  /**
   * Method used to check passed parameters and later merge them into
   * single object.
   * @param  {string} id      Mandatory id of node.
   * @param  {object} params  Optional parameters.
   * @return {object} Parameters merged into object.
   */
  function _checkAndMergeParams() {
    var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _errorHandler.showMsg(_ErrorCode2.default.MANDATORY_PARAM, { param: 'id' });
    var params = arguments[1];

    if (typeof id !== 'string') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'string' });
    }
    if (params !== undefined && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) !== 'object') {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_TYPE, { type: 'object' });
    } else if (params === undefined) {
      params = {};
    }
    params.uuid = id;
    return params;
  }

  /**
   * This method helps in the creation of nodes. Its focus on proper
   * placement of nodes in tree.
   * @param  {string} id      Mandatory id of newly created node.
   * @param  {object} params  Parameters of created node.
   * @param  {boolean} asChild Determines if node should be added as child
   * of another node or as an independent node.
   * @param  {string} className   Name of class that will be used to create node.
   * @param  {string} storage Name of node group inside which node will be added.
   */
  function _chainNodeCreator(id, params, asChild, className, storage) {
    //First, we check that id and params are valid.
    params = _checkAndMergeParams(id, params);
    //Class name for later usage.
    params.class = className;

    //Test if node should be added as child or parent.
    if (asChild) {
      //If last added child was not null then we must check additional conditions.
      if (_lastChild !== null) {
        //If constructor name of previous child node, is equal to name of class,
        //whose we try to create, it means node should be added to current parent.
        if (_lastChild.constructor.name === className) {
          createChildNode(params);
        }
        //If names of constructors not match, then we must check if new node
        //can be added as child to our previous child.
        else if (_lastChild.canAddChild(className)) {
            _parentHistory.unshift(_lastChild);
            createChildNode(params);
          }
          //Finally if previous conditions are false we try go back to previous
          //parent node.
          else {
              _lastChild = _parentHistory.shift() || null;
              _chainNodeCreator(id, params, asChild, className, storage);
            }
      }
      //If last child is null, then we check if node can be added to current
      //parent node.
      else if (_parentHistory.length > 0 && _parentHistory[0].canAddChild(className)) {
          createChildNode(params);
        }
        //If last child and last parent is equal to null, then new child node
        //cant be added, so we throw error.
        else {
            _errorHandler.showMsg(_ErrorCode2.default.INCOMPATIBLE_CHILD, {
              child: className,
              parent: _parentHistory.length > 0 ? _parentHistory[0].constructor.name : 'null'
            });
          }
    } else {
      //If node is added as parent, then last child is set to null
      //and parent history is cleared.
      _lastChild = null;
      _parentHistory.length = 0;
      //After that, new node is created.
      var node = _nodeFactory(params);
      _parentHistory = [node];
      _addNode(storage, node);
    }

    function createChildNode(nodeParams) {
      //We create a new node, and then set as the last child.
      _lastChild = _nodeFactory(nodeParams);
      //Then we add our freshly created node to its parent.
      _parentHistory[0].addChild(_lastChild.getId());
      //Finally new node is added to main storage object.
      _addNode(storage, _lastChild);
    }
  }

  /**
   * Helper method that is used to remove nodes from object pool
   * and reset context of "method chaining" algorithm.
   * @param  {string} id  Id of node to be removed.
   * @param  {string} key Name of node group which contains node to remove.
   */
  function _chainNodeRemover(id, key) {
    _lastChild = null;
    _parentHistory.length = 0;
    this._removeNode(key, id);
  }

  /**
   * Helper method that is used for creating temporary links (half links)
   * or complete Link nodes, when input and output counterparts are present.
   * @param  {string} type      Defines type of connection.
   * @param  {string} id        Id of targeted node into which connection
   * should be made.
   * @param  {string} startSide Defines current start side of the link.
   * @param  {string} endSide   Defines current end side of the link.
   */
  function _chainLinkCreator(type, id, startSide, endSide) {
    var opposite = null;
    var node = null;
    if (_lastChild !== null) {
      node = _lastChild;
    } else if (_parentHistory[0] !== undefined) {
      node = _parentHistory[0];
    }
    if (node !== null) {
      for (var i = 0; i < _halfLinks[endSide].length; i++) {
        var link = _halfLinks[endSide][i];
        if (link.type === type && link.id === node.getId()) {
          opposite = _halfLinks[endSide].splice(i, 1)[0];
          break;
        }
      }
      if (opposite === null) {
        _halfLinks[startSide].push({ type: type, id: id });
      } else {
        if (startSide === 'inp') {
          _setConnection(type, id, opposite.id);
        } else {
          _setConnection(type, opposite.id, id);
        }
      }
    } else {
      _errorHandler.showMsg(_ErrorCode2.default.INCORRECT_LINK_TARGET);
    }
  }

  var _addActor = function _addActor(id, params) {
    _chainNodeCreator(id, params, false, 'Actor', KEY_ACTORS);
    return this;
  },
      _removeActor = function _removeActor(actorId) {
    _chainNodeRemover(actorId, KEY_ACTORS);
    return this;
  },
      _addQuest = function _addQuest(id, params) {
    _chainNodeCreator(id, params, false, 'Quest', KEY_QUESTS);
    return this;
  },
      _removeQuest = function _removeQuest(questId) {
    _chainNodeRemover(questId, KEY_QUESTS);
    return this;
  },
      _addDialog = function _addDialog(id, params) {
    _chainNodeCreator(id, params, false, 'Dialog', KEY_DIALOGS);
    return this;
  },
      _removeDialog = function _removeDialog(dialogId) {
    _chainNodeRemover(dialogId, KEY_DIALOGS);
    return this;
  },
      _addCondition = function _addCondition(id, params) {
    _chainNodeCreator(id, params, false, 'Condition', KEY_CONDITIONS);
    return this;
  },
      _removeCondition = function _removeCondition(conditionId) {
    _chainNodeRemover(conditionId, KEY_CONDITIONS);
    return this;
  },
      _addVariable = function _addVariable(id, params) {
    _chainNodeCreator(id, params, false, 'Variable', KEY_VARIABLES);
    return this;
  },
      _removeVariable = function _removeVariable(variableId) {
    _chainNodeRemover(variableId, KEY_VARIABLES);
    return this;
  },
      _addTalk = function _addTalk(id, params) {
    _chainNodeCreator(id, params, true, 'Talk', KEY_TALKS);
    return this;
  },
      _removeTalk = function _removeTalk(id) {
    _chainNodeRemover(id, KEY_TALKS);
    return this;
  },
      _addAnswer = function _addAnswer(id, params) {
    _chainNodeCreator(id, params, true, 'Answer', KEY_ANSWERS);
    return this;
  },
      _removeAnswer = function _removeAnswer(id) {
    _chainNodeRemover(id, KEY_ANSWERS);
    return this;
  },
      _inp = function _inp(type, id) {
    _chainLinkCreator(type, id, 'inp', 'out');
    return this;
  },
      _out = function _out(type, id) {
    _chainLinkCreator(type, id, 'out', 'inp');
    return this;
  },


  ////////////////////////////////////////////////////////////////
  //GETTERS
  ////////////////////////////////////////////////////////////////
  _getActor = function _getActor(actorId) {
    return this._getNode(KEY_ACTORS, actorId);
  },
      _getActors = function _getActors() {
    return _objectPool[KEY_ACTORS];
  },
      _getCondition = function _getCondition(conditionId) {
    return this._getNode(KEY_CONDITIONS, conditionId);
  },
      _getConditions = function _getConditions() {
    return _objectPool[KEY_CONDITIONS];
  },
      _getDialog = function _getDialog(dialogId) {
    return this._getNode(KEY_DIALOGS, dialogId);
  },
      _getDialogs = function _getDialogs() {
    return _objectPool[KEY_DIALOGS];
  },
      _getQuest = function _getQuest(questId) {
    return this._getNode(KEY_QUESTS, questId);
  },
      _getQuests = function _getQuests() {
    return _objectPool[KEY_QUESTS];
  },
      _getVariable = function _getVariable(variableId) {
    return this._getNode(KEY_VARIABLES, variableId);
  },
      _getVariables = function _getVariables() {
    return _objectPool[KEY_VARIABLES];
  },
      _serializeData = function _serializeData() {
    var data = {};
    for (var key in _objectPool) {
      if (_objectPool.hasOwnProperty(key)) {
        data[key] = _objectPool[key].map(function (obj) {
          return obj.getData ? obj.getData() : obj;
        });
      }
    }
    return JSON.stringify(data);
  };

  return {
    ////////////////////////////////////////////
    //General node methods
    ////////////////////////////////////////////
    findNode: _findNode,
    getNode: _getNode,
    addNode: _addNode,
    removeNode: _removeNode,

    ////////////////////////////////////////////
    //Link creation methods
    ////////////////////////////////////////////
    setConnection: _setConnection,
    getConnection: _getConnection,
    getConnections: _getConnections,
    removeConnection: _removeConnection,

    ////////////////////////////////////////////
    //Chainable methods
    ////////////////////////////////////////////
    addActor: _addActor,
    removeActor: _removeActor,
    addQuest: _addQuest,
    removeQuest: _removeQuest,
    addDialog: _addDialog,
    removeDialog: _removeDialog,
    addCondition: _addCondition,
    removeCondition: _removeCondition,
    addVariable: _addVariable,
    removeVariable: _removeVariable,
    addTalk: _addTalk,
    removeTalk: _removeTalk,
    addAnswer: _addAnswer,
    removeAnswer: _removeAnswer,
    inp: _inp,
    out: _out,

    ////////////////////////////////////////////
    //Getter methods
    ////////////////////////////////////////////
    getActor: _getActor,
    getActors: _getActors,
    getCondition: _getCondition,
    getConditions: _getConditions,
    getDialog: _getDialog,
    getDialogs: _getDialogs,
    getQuest: _getQuest,
    getQuests: _getQuests,
    getVariable: _getVariable,
    getVariables: _getVariables,

    ////////////////////////////////////////////
    //Miscalineus methods
    ////////////////////////////////////////////
    serializeData: _serializeData
  };
};
module.exports = RPGSystem;

},{"./actors/Actor":4,"./conditions/Condition":5,"./core/BaseNode":6,"./core/ErrorCode":8,"./core/ErrorHandler":9,"./core/Link":10,"./core/Utils":12,"./dialogs/Answer":13,"./dialogs/Dialog":14,"./dialogs/Talk":15,"./quests/Quest":16,"./quests/Task":18}],4:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Actor = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _name = new WeakMap();
  var _dialog = new WeakMap();
  //let _inventory = new WeakMap();


  return function (_BaseNode) {
    _inherits(Actor, _BaseNode);

    function Actor(data) {
      _classCallCheck(this, Actor);

      var _this = _possibleConstructorReturn(this, (Actor.__proto__ || Object.getPrototypeOf(Actor)).call(this, data));

      _name.set(_this, data ? data.name : '');
      _dialog.set(_this, data ? data.dialog : '');
      //_inventory.set(this,data.inventory ? );
      return _this;
    }

    _createClass(Actor, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Actor.prototype.__proto__ || Object.getPrototypeOf(Actor.prototype), 'getData', this).call(this);
        data.name = this.getName();
        data.dialog = this.getDialog();
        return data;
      }
    }, {
      key: 'setName',
      value: function setName(value) {
        _name.set(this, value);
      }
    }, {
      key: 'getName',
      value: function getName() {
        return _name.get(this);
      }
    }, {
      key: 'getDialog',
      value: function getDialog() {
        return _dialog.get(this);
      }

      /*getInventory() {
        return _inventory.get(this);
      }*/

    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return this.getInputConnections(_LinkType2.default.DIALOG).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _name.delete(this);
        _dialog.delete(this);
        //_inventory.delete(this);
        _get(Actor.prototype.__proto__ || Object.getPrototypeOf(Actor.prototype), 'dispose', this).call(this);
      }
    }]);

    return Actor;
  }(_BaseNode3.default);
}();

module.exports = Actor;

},{"../core/BaseNode":6,"../core/LinkType":11}],5:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _nxCompile = require('@risingstack/nx-compile');

var _nxCompile2 = _interopRequireDefault(_nxCompile);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Condition = function () {
  var _label = new WeakMap();
  var _code = new WeakMap();
  var _compiled = new WeakMap();
  var _sandbox = new WeakMap();

  return function (_BaseNode) {
    _inherits(Condition, _BaseNode);

    function Condition(data, rpgs) {
      _classCallCheck(this, Condition);

      var _this = _possibleConstructorReturn(this, (Condition.__proto__ || Object.getPrototypeOf(Condition)).call(this, data, rpgs));

      _label.set(_this, data.label ? data.label : '');
      _code.set(_this, data.code ? data.code : '(function(){return true;})();');
      _sandbox.set(_this, { rpgs: rpgs });
      _compiled.set(_this, _nxCompile2.default.compileExpression(_code.get(_this), _sandbox.get(_this)));
      return _this;
    }

    _createClass(Condition, [{
      key: 'setLabel',
      value: function setLabel(text) {
        _label.set(this, text);
      }
    }, {
      key: 'getLabel',
      value: function getLabel() {
        return _label.get(this);
      }
    }, {
      key: 'setCode',
      value: function setCode(code) {
        _code.set(this, code);
        _compiled.set(this, _nxCompile2.default.compileExpression(_code.get(this), _sandbox.get(this)));
      }
    }, {
      key: 'getCode',
      value: function getCode() {
        return _code.get(this);
      }
    }, {
      key: 'check',
      value: function check() {
        return _compiled.get(this)();
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(Condition.prototype.__proto__ || Object.getPrototypeOf(Condition.prototype), 'getData', this).call(this);
        data.label = this.getLabel();
        data.code = this.getCode();
        return data;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
          case _LinkType2.default.ACTIVITY:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        _label.delete(this);
        _code.delete(this);
        _sandbox.delete(this);
        _compiled.delete(this);
        _get(Condition.prototype.__proto__ || Object.getPrototypeOf(Condition.prototype), 'dispose', this).call(this);
      }
    }]);

    return Condition;
  }(_BaseNode3.default);
}();
module.exports = Condition;

},{"../core/BaseNode":6,"../core/LinkType":11,"@risingstack/nx-compile":1}],6:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require('./Utils');

var _LinkType = require('./LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var KEY_LINKS = 'links';
var KEY_CONDITIONS = 'conditions';

var BaseNode = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _rpgs = new WeakMap();
  var _uuid = new WeakMap();
  var _input = new WeakMap();
  var _output = new WeakMap();

  return function () {
    function BaseNode(data, rpgs) {
      _classCallCheck(this, BaseNode);

      _rpgs.set(this, rpgs);
      //If uuid not present, then by default we assign Universally Unique ID.
      _uuid.set(this, data.uuid ? data.uuid : _Utils.UUID.generate());
      _input.set(this, data.input ? data.input : {});
      _output.set(this, data.output ? data.output : {});
    }

    _createClass(BaseNode, [{
      key: 'getRPGS',
      value: function getRPGS() {
        return this.getRPGS();
      }
    }, {
      key: 'setId',
      value: function setId(value) {
        _uuid.set(this, value);
      }
    }, {
      key: 'getId',
      value: function getId() {
        return _uuid.get(this);
      }
    }, {
      key: 'checkCondition',
      value: function checkCondition(conditionId) {
        var condition = this.getRPGS().getNode(KEY_CONDITIONS, conditionId);
        return condition ? condition.check() : true;
      }

      /**
       * Returns boolean that reflects visiblility state of node.
       * @return {Boolean} Visibility state
       */

    }, {
      key: 'isVisible',
      value: function isVisible() {
        var conditions = getInputConnections(_LinkType2.default.VISIBILITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }

      /**
       * Returns boolean that reflects activity state of node.
       * @return {Boolean} Active state
       */

    }, {
      key: 'isActive',
      value: function isActive() {
        var conditions = getInputConnections(_LinkType2.default.ACTIVITY);
        return conditions ? this.checkCondition(conditions[0]) : true;
      }
    }, {
      key: 'getData',
      value: function getData() {
        return {
          class: this.constructor.name,
          uuid: this.getId(),
          input: this.getInputConnections(),
          output: this.getOutputConnections()
        };
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return false;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {}
    }, {
      key: 'removeChild',
      value: function removeChild(index) {}
    }, {
      key: 'getChild',
      value: function getChild(index) {
        return null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return [];
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {}
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        return false;
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        return false;
      }
    }, {
      key: '_setConnection',
      value: function _setConnection(obj, type, linkId) {
        if (!obj.hasOwnProperty(type)) {
          obj[type] = [];
        }
        obj[type].push(linkId);
        return obj;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {
        _output.set(this, this._setConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {
        _input.set(this, this._setConnection(_input.get(this), type, linkId));
      }
    }, {
      key: '_getConnections',
      value: function _getConnections(obj, type) {
        if (type) return !obj.hasOwnProperty(type) ? [] : obj[type];else return obj;
      }
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {
        return this._getConnections(_output.get(this), type);
      }
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {
        return this._getConnections(_input.get(this), type);
      }
    }, {
      key: '_removeConnection',
      value: function _removeConnection(obj, type, linkId) {
        if (obj.hasOwnProperty(type)) {
          obj[type] = Utils.removeObjectFromArray(obj[type], linkId);
        }
        return obj;
      }
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {
        _output.set(this, this._removeConnection(_output.get(this), type, linkId));
      }
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {
        _input.set(this, this._removeConnection(_input.get(this), type, linkId));
      }
    }, {
      key: 'removeChildrenFrom',
      value: function removeChildrenFrom(obj, key) {
        var _this = this;

        obj.filter(function (childId, index, arr) {
          _this.getRPGS().removeNode(key, childId);
          return true;
        });
      }
    }, {
      key: '_removeLinksFrom',
      value: function _removeLinksFrom(obj) {
        for (var type in obj) {
          if (obj.hasOwnProperty(type)) {
            removeChildrenFrom(obj[type], KEY_LINKS);
          }
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeLinksFrom(_output.get(this));
        this._removeLinksFrom(_input.get(this));
        _rpgs.delete(this);
        _uuid.delete(this);
        _input.delete(this);
        _output.delete(this);
      }
    }]);

    return BaseNode;
  }();
}();
module.exports = BaseNode;

},{"./LinkType":11,"./Utils":12}],7:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CompoundNode = function () {
  var _children = new WeakMap();

  return function (_BaseNode) {
    _inherits(CompoundNode, _BaseNode);

    function CompoundNode(data, rpgs) {
      _classCallCheck(this, CompoundNode);

      var _this = _possibleConstructorReturn(this, (CompoundNode.__proto__ || Object.getPrototypeOf(CompoundNode)).call(this, data, rpgs));

      _children.set(_this, data.children ? data.children : []);
      return _this;
    }

    _createClass(CompoundNode, [{
      key: 'getData',
      value: function getData() {
        var data = _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'getData', this).call(this);
        data.children = this.getChildren();
        return data;
      }
    }, {
      key: 'addChild',
      value: function addChild(childId) {
        var children = _children.get(this);
        _children.set(this, _Utils2.default.addObjectToArray(children, childId));
      }
    }, {
      key: 'removeChild',
      value: function removeChild(index) {
        var children = _children.get(this);
        _children.set(this, children.splice(index, 1));
      }
    }, {
      key: 'getChild',
      value: function getChild(index) {
        var children = _children.get(this);
        return children.length > index ? children[index] : null;
      }
    }, {
      key: 'getChildren',
      value: function getChildren() {
        return _children.get(this);
      }
    }, {
      key: '_removeChildren',
      value: function _removeChildren(key) {
        this.removeChildrenFrom(_children.get(this), key);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _children.delete(this);
        _get(CompoundNode.prototype.__proto__ || Object.getPrototypeOf(CompoundNode.prototype), 'dispose', this).call(this);
      }
    }]);

    return CompoundNode;
  }(_BaseNode3.default);
}();
module.exports = CompoundNode;

},{"../core/BaseNode":6,"../core/Utils":12}],8:[function(require,module,exports){
"use strict";

var NODE_NOT_EXISTS = 0;
var CLASS_NOT_DEFINED = 1;
var CONNECTION_TO_ITSELF = 2;
var IMPROPER_CONNECTION = 3;
var OBJECT_NOT_FOUND = 4;
var MANDATORY_PARAM = 5;
var INCORRECT_TYPE = 6;
var INCORRECT_PARENT_NODE = 7;
var INCORRECT_LINK_TARGET = 8;
var INCOMPATIBLE_CHILD = 9;

exports.NODE_NOT_EXISTS = NODE_NOT_EXISTS;
exports.CLASS_NOT_DEFINED = CLASS_NOT_DEFINED;
exports.CONNECTION_TO_ITSELF = CONNECTION_TO_ITSELF;
exports.IMPROPER_CONNECTION = IMPROPER_CONNECTION;
exports.OBJECT_NOT_FOUND = OBJECT_NOT_FOUND;
exports.MANDATORY_PARAM = MANDATORY_PARAM;
exports.INCORRECT_TYPE = INCORRECT_TYPE;
exports.INCORRECT_PARENT_NODE = INCORRECT_PARENT_NODE;
exports.INCORRECT_LINK_TARGET = INCORRECT_LINK_TARGET;
exports.INCOMPATIBLE_CHILD = INCOMPATIBLE_CHILD;

},{}],9:[function(require,module,exports){
"use strict";

var _ErrorCode = require('./ErrorCode');

var _ErrorCode2 = _interopRequireDefault(_ErrorCode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ErrorHandler = function ErrorHandler(editor) {
  return {
    showMsg: function showMsg(errorCode, params) {
      var msg = '';
      switch (errorCode) {
        case _ErrorCode2.default.NODE_NOT_EXISTS:
          msg = 'Node of type ' + params.type + ' is not defined.';
          break;
        case _ErrorCode2.default.CLASS_NOT_DEFINED:
          msg = 'Class ' + params.class + ' is not defined.';
          break;
        case _ErrorCode2.default.CONNECTION_TO_ITSELF:
          msg = 'Cannot connect node "' + params.node + '" to itself.';
          break;
        case _ErrorCode2.default.IMPROPER_CONNECTION:
          msg = 'Cannot create connection of type "' + params.type + '" from node id "' + params.node1 + '" to node id "' + params.node2 + '".';
          break;
        case _ErrorCode2.default.OBJECT_NOT_FOUND:
          msg = 'Cannot find object with id "' + params.id + '"';
          break;
        case _ErrorCode2.default.MANDATORY_PARAM:
          msg = 'Parameter "' + params.param + '" was expected but instead got undefined.';
          break;
        case _ErrorCode2.default.INCORRECT_TYPE:
          msg = 'Wrong type of argument. Expected "' + params.type + '"';
          break;
        case _ErrorCode2.default.INCORRECT_PARENT_NODE:
          msg = 'Node of type "' + params.child + '" can be added only to "' + params.parent + '" node.';
          break;
        case _ErrorCode2.default.INCORRECT_LINK_TARGET:
          msg = 'Cannot create link connection to null node.';
          break;
        case _ErrorCode2.default.INCOMPATIBLE_CHILD:
          msg = 'Cannot add child of type "' + params.child + '" into parent of type "' + params.parent + '".';
          break;
        default:
          msg = 'Unknown error code passed: ' + errorCode;
      }
      if (editor) {
        editor.showMsg(msg);
      } else {
        throw new Error(msg);
        //add warning mode?
      }
    }
  };
};
module.exports = ErrorHandler;

},{"./ErrorCode":8}],10:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Link = function () {

  var _type = new WeakMap();
  var _output = new WeakMap();
  var _input = new WeakMap();

  return function (_BaseNode) {
    _inherits(Link, _BaseNode);

    function Link(data, rpgs) {
      _classCallCheck(this, Link);

      var _this = _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).call(this, data, rpgs));

      _type.set(_this, data.type);
      _input.set(_this, data.input ? data.input : '');
      _output.set(_this, data.output ? data.output : '');
      return _this;
    }

    _createClass(Link, [{
      key: 'getInp',
      value: function getInp() {
        return _input.get(this);
      }
    }, {
      key: 'getOut',
      value: function getOut() {
        return _output.get(this);
      }
    }, {
      key: 'getType',
      value: function getType() {
        return _type.get(this);
      }
    }, {
      key: 'getData',
      value: function getData() {
        var data = _get(Link.prototype.__proto__ || Object.getPrototypeOf(Link.prototype), 'getData', this).call(this);
        data.type = this.getType();
        data.input = this.getInp();
        data.output = this.getOut();
        return data;
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'setInputConnection',
      value: function setInputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'getInputConnections',
      value: function getInputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'removeInputConnection',
      value: function removeInputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        var linkInp = this.getInp();
        var linkOut = this.getOut();
        var inpObj = this.getRPGS().findNode(linkInp);
        var outObj = this.getRPGS().findNode(linkOut);
        if (inpObj) inpObj.removeInputConnection(this.getType(), linkInp);
        if (outObj) outObj.removeOutputConnection(this.getType(), linkOut);
        _type.delete(this);
        _input.delete(this);
        _output.delete(this);
        _get(Link.prototype.__proto__ || Object.getPrototypeOf(Link.prototype), 'dispose', this).call(this);
      }
    }]);

    return Link;
  }(_BaseNode3.default);
}();
module.exports = Link;

},{"../core/BaseNode":6}],11:[function(require,module,exports){
"use strict";

var REFERENCE = 'reference';
var VISIBILITY = 'visibility';
var ACTIVITY = 'activity';
var ACTION = 'action';
var GOTO = 'goto';
var DIALOG = 'dialog';

exports.REFERENCE = REFERENCE;
exports.VISIBILITY = VISIBILITY;
exports.ACTIVITY = ACTIVITY;
exports.ACTION = ACTION;
exports.GOTO = GOTO;
exports.DIALOG = DIALOG;

},{}],12:[function(require,module,exports){
"use strict";

/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/

var UUID = function () {
  var self = {};
  var lut = [];for (var i = 0; i < 256; i++) {
    lut[i] = (i < 16 ? '0' : '') + i.toString(16);
  }
  self.generate = function () {
    var d0 = Math.random() * 0xffffffff | 0;
    var d1 = Math.random() * 0xffffffff | 0;
    var d2 = Math.random() * 0xffffffff | 0;
    var d3 = Math.random() * 0xffffffff | 0;
    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
  };
  return self;
}();

exports.UUID = UUID;

var indexOfObject = function indexOfObject(array, obj) {
  for (var i = 0; i < array.length; i++) {
    if (array[i] === obj) return i;
  }
  return -1;
};

exports.indexOfObject = indexOfObject;

exports.getObjectById = function (array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return array[i];
  }
  return null;
};

var getIndexById = function getIndexById(array, id) {
  for (var i = 0; i < array.length; i++) {
    if (array[i].getId() === id) return i;
  }
  return -1;
};
exports.getIndexById = getIndexById;

exports.addObjectToArray = function (array, obj, expectedType) {
  if (expectedType !== undefined && expectedType !== null) {
    if (expectedType.isPrototypeOf(obj)) {
      throw new Error('Wrong type of object passed. Expected ' + expectedType.constructor.name + ' object.');
    }
  }
  if (indexOfObject(array, obj) === -1) {
    array.push(obj);
  }
  return array;
};

exports.getObjectsByType = function (array, type) {
  var out = [];
  for (var i = 0; i < array.length; i++) {
    if (type.isPrototypeOf(array[i])) {
      out.push(array[i]);
    }
  }
  return out;
};

exports.removeObjectById = function (array, id) {
  var index = getIndexById(array, id);
  if (index !== -1) {
    var spliced = array.splice(index, 1);
    if (spliced.dispose) spliced.dispose();
  }
  return array;
};

exports.removeObjectFromArray = function (array, obj) {
  var index = indexOfObject(array, obj);
  if (index !== -1) {
    var spliced = array.splice(index, 1);
    if (spliced.dispose) spliced.dispose();
  }
  return array;
};

},{}],13:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseNode2 = require('../core/BaseNode');

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Answer = function () {
  //Weak maps are new feature to JavaScript. We can store private
  //object properties in key/value pairs using our instance as the key,
  //and our class can capture those key/value maps in a closure.
  var _text = new WeakMap();

  return function (_BaseNode) {
    _inherits(Answer, _BaseNode);

    function Answer(data, rpgs) {
      _classCallCheck(this, Answer);

      var _this = _possibleConstructorReturn(this, (Answer.__proto__ || Object.getPrototypeOf(Answer)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(Answer, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Answer.prototype.__proto__ || Object.getPrototypeOf(Answer.prototype), 'getData', this).call(this);
        data.text = this.getText();

        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'getTalk',
      value: function getTalk() {
        var talks = getOutputConnections(_LinkType2.default.GOTO);
        return talks ? talks[0] : null;
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return this.getOutputConnections(_LinkType2.default.GOTO).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        _text.delete(this);
        _get(Answer.prototype.__proto__ || Object.getPrototypeOf(Answer.prototype), 'dispose', this).call(this);
      }
    }]);

    return Answer;
  }(_BaseNode3.default);
}();
module.exports = Answer;

},{"../core/BaseNode":6,"../core/LinkType":11}],14:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TALKS = 'talks';

var Dialog = function () {
  var _start = new WeakMap();

  return function (_CompoundNode) {
    _inherits(Dialog, _CompoundNode);

    function Dialog(data, rpgs) {
      _classCallCheck(this, Dialog);

      var _this = _possibleConstructorReturn(this, (Dialog.__proto__ || Object.getPrototypeOf(Dialog)).call(this, data, rpgs));

      _start.set(_this, data.startTalk ? data.startTalk : '');
      return _this;
    }

    _createClass(Dialog, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Dialog.prototype.__proto__ || Object.getPrototypeOf(Dialog.prototype), 'getData', this).call(this);
        data.startTalk = this.getStartTalk();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'Talk';
      }
    }, {
      key: 'setStartTalk',
      value: function setStartTalk(talkId) {
        _start.set(this, talkId);
      }
    }, {
      key: 'getStartTalk',
      value: function getStartTalk() {
        return _start.get(this);
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.VISIBILITY:
            return this.getInputConnections(_LinkType2.default.VISIBILITY).length === 0;
          case _LinkType2.default.ACTIVITY:
            return this.getInputConnections(_LinkType2.default.ACTIVITY).length === 0;
          default:
            return false;
        }
      }
    }, {
      key: 'canCreateOutputConnection',
      value: function canCreateOutputConnection(type) {
        switch (type) {
          case _LinkType2.default.DIALOG:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TALKS);
        _start.delete(this);
        _get(Dialog.prototype.__proto__ || Object.getPrototypeOf(Dialog.prototype), 'dispose', this).call(this);
      }
    }]);

    return Dialog;
  }(_CompoundNode3.default);
}();
module.exports = Dialog;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],15:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _Utils = require('../core/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _LinkType = require('../core/LinkType');

var _LinkType2 = _interopRequireDefault(_LinkType);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_ANSWERS = 'answers';

var Talk = function () {

  var _text = new WeakMap();

  return function (_CompoundNode) {
    _inherits(Talk, _CompoundNode);

    function Talk(data, rpgs) {
      _classCallCheck(this, Talk);

      var _this = _possibleConstructorReturn(this, (Talk.__proto__ || Object.getPrototypeOf(Talk)).call(this, data, rpgs));

      _text.set(_this, data.text ? data.text : '');
      return _this;
    }

    _createClass(Talk, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Talk.prototype.__proto__ || Object.getPrototypeOf(Talk.prototype), 'getData', this).call(this);
        data.text = this.getText();
        return data;
      }
    }, {
      key: 'setText',
      value: function setText(value) {
        _text.set(this, value);
      }
    }, {
      key: 'getText',
      value: function getText() {
        return _text.get(this);
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'Answer';
      }
    }, {
      key: 'canCreateInputConnection',
      value: function canCreateInputConnection(type) {
        switch (type) {
          case _LinkType2.default.GOTO:
            return true;
          default:
            return false;
        }
      }
    }, {
      key: 'setOutputConnection',
      value: function setOutputConnection(type, linkId) {}
    }, {
      key: 'getOutputConnections',
      value: function getOutputConnections(type) {}
    }, {
      key: 'removeOutputConnection',
      value: function removeOutputConnection(type, linkId) {}
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_ANSWERS);
        _text.delete(this);
        _get(Talk.prototype.__proto__ || Object.getPrototypeOf(Talk.prototype), 'dispose', this).call(this);
      }
    }]);

    return Talk;
  }(_CompoundNode3.default);
}();
module.exports = Talk;

},{"../core/CompoundNode":7,"../core/LinkType":11,"../core/Utils":12}],16:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _CompoundNode2 = require('../core/CompoundNode');

var _CompoundNode3 = _interopRequireDefault(_CompoundNode2);

var _QuestStatus = require('./QuestStatus');

var _QuestStatus2 = _interopRequireDefault(_QuestStatus);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KEY_TASKS = 'tasks';

var Quest = function () {
  var _title = new WeakMap();
  var _description = new WeakMap();
  var _status = new WeakMap();

  return function (_CompoundNode) {
    _inherits(Quest, _CompoundNode);

    function Quest(data, rpgs) {
      _classCallCheck(this, Quest);

      var _this = _possibleConstructorReturn(this, (Quest.__proto__ || Object.getPrototypeOf(Quest)).call(this, data, rpgs));

      _title.set(_this, data.title ? data.title : '');
      _description.set(_this, data.description ? data.description : '');
      _status.set(_this, data.status ? data.status : _QuestStatus2.default.INCOMPLETE);
      return _this;
    }

    _createClass(Quest, [{
      key: 'getData',
      value: function getData() {
        var data = _get(Quest.prototype.__proto__ || Object.getPrototypeOf(Quest.prototype), 'getData', this).call(this);
        data.title = this.getTitle();
        data.description = this.getDescription();
        data.status = this.getStatus();
        return data;
      }
    }, {
      key: 'canAddChild',
      value: function canAddChild(type) {
        return type === 'Task';
      }
    }, {
      key: 'setTitle',
      value: function setTitle(value) {
        _title.set(this, value);
      }
    }, {
      key: 'getTitle',
      value: function getTitle() {
        return _title.get(this);
      }
    }, {
      key: 'setDescription',
      value: function setDescription(value) {
        _description.set(this, value);
      }
    }, {
      key: 'getDescription',
      value: function getDescription() {
        return _description.get(this);
      }
    }, {
      key: 'setStatus',
      value: function setStatus(value) {
        switch (value) {
          case _QuestStatus2.default.COMPLETED:
          case _QuestStatus2.default.FAILED:
            _status.set(this, value);
          case _QuestStatus2.default.INCOMPLETE:
          default:
            _status.set(this, _QuestStatus2.default.INCOMPLETE);
            break;
        };
      }
    }, {
      key: 'getStatus',
      value: function getStatus() {
        return _status.get(this);
      }
    }, {
      key: 'dispose',
      value: function dispose() {
        this._removeChildren(KEY_TASKS);
        _title.delete(this);
        _description.delete(this);
        _status.delete(this);
      }
    }]);

    return Quest;
  }(_CompoundNode3.default);
}();
module.exports = Quest;

},{"../core/CompoundNode":7,"./QuestStatus":17}],17:[function(require,module,exports){
"use strict";

var INCOMPLETE = 'questIncomplete';
var COMPLETED = 'questCompleted';
var FAILED = 'questFailed';

exports.INCOMPLETE = INCOMPLETE;
exports.COMPLETED = COMPLETED;
exports.FAILED = FAILED;

},{}],18:[function(require,module,exports){
"use strict";

var _BaseNode2 = require("../core/BaseNode");

var _BaseNode3 = _interopRequireDefault(_BaseNode2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Task = function () {
  return function (_BaseNode) {
    _inherits(Task, _BaseNode);

    function Task(data) {
      _classCallCheck(this, Task);

      return _possibleConstructorReturn(this, (Task.__proto__ || Object.getPrototypeOf(Task)).call(this, data));
    }

    //to do


    return Task;
  }(_BaseNode3.default);
}();

module.exports = Task;

},{"../core/BaseNode":6}],19:[function(require,module,exports){
"use strict";

var _data = require('../data/data.json');

var _data2 = _interopRequireDefault(_data);

var _RPGSystem = require('./rpgs/RPGSystem');

var _RPGSystem2 = _interopRequireDefault(_RPGSystem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(function ($, window, document, undefined) {
  $(function () {
    var rpgs1 = new _RPGSystem2.default();
    rpgs1.addActor('act1', { name: 'Adam' }).inp('dialog', 'dlg1').addCondition('cond1', { code: '\n        (function(){\n          alert("Condition test!");\n          //return true;\n        })();\n      ' }).out('visibility', 'tlk0ans1').addDialog('dlg1', { startTalk: 'tlk0' }).out('dialog', 'act1').addTalk('tlk0', { text: 'This is talk 0.' }).addAnswer('tlk0ans1', { text: 'Answer1' }).out('goto', 'tlk1').inp('visibility', 'cond1').addAnswer('tlk0ans2', { text: 'Answer2' }).out('goto', 'tlk2').addAnswer('tlk0ans3', { text: 'Answer3' }).out('goto', 'tlk3').addTalk('tlk1', { text: 'This is talk 1.' }).inp('goto', 'tlk0ans1').addAnswer('tlk1ans1', { text: 'Answer1' }).addTalk('tlk2', { text: 'This is talk 2.' }).inp('goto', 'tlk0ans2').addAnswer('tlk2ans1', { text: 'Answer1' }).addTalk('tlk3', { text: 'This is talk 3.' }).inp('goto', 'tlk0ans3').addAnswer('tlk3ans1', { text: 'Answer1' });
    var rpgs1Serialized = rpgs1.serializeData();
    console.log("rpgs1", rpgs1Serialized);

    var rpgs2 = new _RPGSystem2.default(JSON.parse(rpgs1Serialized));
    console.log(rpgs2.serializeData());
  });
})(jQuery, window, document);

},{"../data/data.json":2,"./rpgs/RPGSystem":3}]},{},[19])


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQHJpc2luZ3N0YWNrL254LWNvbXBpbGUvY29tcGlsZXIuanMiLCJzcmMvZGF0YS9kYXRhLmpzb24iLCJzcmMvanMvcnBncy9SUEdTeXN0ZW0uanMiLCJzcmMvanMvcnBncy9hY3RvcnMvQWN0b3IuanMiLCJzcmMvanMvcnBncy9jb25kaXRpb25zL0NvbmRpdGlvbi5qcyIsInNyYy9qcy9ycGdzL2NvcmUvQmFzZU5vZGUuanMiLCJzcmMvanMvcnBncy9jb3JlL0NvbXBvdW5kTm9kZS5qcyIsInNyYy9qcy9ycGdzL2NvcmUvRXJyb3JDb2RlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9FcnJvckhhbmRsZXIuanMiLCJzcmMvanMvcnBncy9jb3JlL0xpbmsuanMiLCJzcmMvanMvcnBncy9jb3JlL0xpbmtUeXBlLmpzIiwic3JjL2pzL3JwZ3MvY29yZS9VdGlscy5qcyIsInNyYy9qcy9ycGdzL2RpYWxvZ3MvQW5zd2VyLmpzIiwic3JjL2pzL3JwZ3MvZGlhbG9ncy9EaWFsb2cuanMiLCJzcmMvanMvcnBncy9kaWFsb2dzL1RhbGsuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3QuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvUXVlc3RTdGF0dXMuanMiLCJzcmMvanMvcnBncy9xdWVzdHMvVGFzay5qcyIsInNyYy9qcy9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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aUJBQU4sRUFmbEIsRUFlNEMsR0FmNUMsQ0FlZ0QsTUFmaEQsRUFldUQsVUFmdkQsRUFnQkssU0FoQkwsQ0FnQmUsVUFoQmYsRUFnQjBCLEVBQUMsTUFBSyxTQUFOLEVBaEIxQixFQWtCRyxPQWxCSCxDQWtCVyxNQWxCWCxFQWtCa0IsRUFBQyxNQUFLLGlCQUFOLEVBbEJsQixFQWtCNEMsR0FsQjVDLENBa0JnRCxNQWxCaEQsRUFrQnVELFVBbEJ2RCxFQW1CSyxTQW5CTCxDQW1CZSxVQW5CZixFQW1CMEIsRUFBQyxNQUFLLFNBQU4sRUFuQjFCLEVBcUJHLE9BckJILENBcUJXLE1BckJYLEVBcUJrQixFQUFDLE1BQUssaUJBQU4sRUFyQmxCLEVBcUI0QyxHQXJCNUMsQ0FxQmdELE1BckJoRCxFQXFCdUQsVUFyQnZELEVBc0JLLFNBdEJMLENBc0JlLFVBdEJmLEVBc0IwQixFQUFDLE1BQUssU0FBTixFQXRCMUI7QUF1QkEsUUFBSSxrQkFBa0IsTUFBTSxhQUFOLEVBQXRCO0FBQ0EsWUFBUSxHQUFSLENBQVksT0FBWixFQUFvQixlQUFwQjs7QUFFQSxRQUFJLFFBQVEsd0JBQWMsS0FBSyxLQUFMLENBQVcsZUFBWCxDQUFkLENBQVo7QUFDQSxZQUFRLEdBQVIsQ0FBWSxNQUFNLGFBQU4sRUFBWjtBQUNELEdBOUJEO0FBZ0NELENBakNELEVBaUNHLE1BakNILEVBaUNXLE1BakNYLEVBaUNtQixRQWpDbkIiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY29tcGlsZUNvZGUsXG4gIGNvbXBpbGVFeHByZXNzaW9uXG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVFeHByZXNzaW9uIChzcmMsIHNhbmRib3gpIHtcbiAgaWYgKHR5cGVvZiBzcmMgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycpXG4gIH1cbiAgaWYgKHR5cGVvZiBzYW5kYm94ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdCcpXG4gIH1cblxuICBzYW5kYm94ID0gbmV3IFByb3h5KHNhbmRib3gsIHtnZXQsIGhhc30pXG4gIGNvbnN0IGV4cHJlc3Npb24gPSBgXG4gIHRyeSB7IHdpdGggKHNhbmRib3gpIHsgcmV0dXJuICR7c3JjfSB9IH0gY2F0Y2ggKGVycikge1xuICAgIGlmICghKGVyciBpbnN0YW5jZW9mIFJlZmVyZW5jZUVycm9yIHx8IGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikpIHRocm93IGVyclxuICB9YFxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzYW5kYm94JywgZXhwcmVzc2lvbikuYmluZChzYW5kYm94LCBzYW5kYm94KSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVDb2RlIChzcmMsIHNhbmRib3gpIHtcbiAgaWYgKHR5cGVvZiBzcmMgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycpXG4gIH1cbiAgaWYgKHR5cGVvZiBzYW5kYm94ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdCcpXG4gIH1cblxuICBzYW5kYm94ID0gbmV3IFByb3h5KHNhbmRib3gsIHtnZXQsIGhhc30pXG4gIHJldHVybiBuZXcgRnVuY3Rpb24oJ3NhbmRib3gnLCBgd2l0aCAoc2FuZGJveCkgeyAke3NyY30gfWApLmJpbmQoc2FuZGJveCwgc2FuZGJveCkgLy8gZXNsaW50LWRpc2FibGUtbGluZVxufVxuXG5mdW5jdGlvbiBnZXQgKHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICBpZiAoa2V5ID09PSBTeW1ib2wudW5zY29wYWJsZXMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbiAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcilcbn1cblxuZnVuY3Rpb24gaGFzICh0YXJnZXQsIGtleSkge1xuICByZXR1cm4gdHJ1ZVxufVxuIiwibW9kdWxlLmV4cG9ydHM9e1xyXG4gICAgXCJhY3RvcnNcIjpbXHJcblx0XHR7XHJcblx0XHRcdFwiY2xhc3NcIjpcIkFjdG9yXCIsXHJcblx0XHRcdFwidXVpZFwiOlwiYWN0MVwiLFxyXG5cdFx0XHRcImlucHV0XCI6IHt9XHJcblx0XHR9XHJcbiAgICBdLFxyXG4gICAgXCJkaWFsb2dzXCI6W1xyXG5cdFx0e1xyXG5cdFx0XHRcImNsYXNzXCI6XCJEaWFsb2dcIixcclxuXHRcdFx0XCJ1dWlkXCI6XCJkbGcxXCIsXHJcblx0XHRcdFwiaW5wdXRcIjoge30sXHJcblx0XHRcdFwib3V0cHV0XCI6IHt9LFxyXG5cdFx0XHRcImNoaWxkcmVuXCI6IFtcInRsazBcIiwgXCJ0bGsxXCIsIFwidGxrMlwiLCBcInRsazNcIl0sIFwic3RhcnRUYWxrXCI6IFwiXCJcclxuXHRcdH1cclxuICAgIF0sXHJcbiAgICBcInRhbGtzXCI6W1xyXG5cdFx0e1xyXG5cdFx0XHRcImNsYXNzXCI6XCJUYWxrXCIsXHJcblx0XHRcdFwidXVpZFwiOlwidGxrMFwiLFxyXG5cdFx0XHRcImlucHV0XCI6IHt9LFxyXG5cdFx0XHRcImNoaWxkcmVuXCI6IFtcInRsazBhbnMxXCIsIFwidGxrMGFuczJcIiwgXCJ0bGswYW5zM1wiXSxcclxuXHRcdFx0XCJ0ZXh0XCI6IFwiXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiY2xhc3NcIjpcIlRhbGtcIixcclxuXHRcdFx0XCJ1dWlkXCI6XCJ0bGsxXCIsXHJcblx0XHRcdFwiaW5wdXRcIjoge30sXHJcblx0XHRcdFwiY2hpbGRyZW5cIjogW1widGxrMWFuczFcIl0sIFwidGV4dFwiOiBcIlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImNsYXNzXCI6XCJUYWxrXCIsXHJcblx0XHRcdFwidXVpZFwiOlwidGxrMlwiLFxyXG5cdFx0XHRcImlucHV0XCI6IHt9LFxyXG5cdFx0XHRcImNoaWxkcmVuXCI6IFtcInRsazJhbnMxXCJdLFxyXG5cdFx0XHRcInRleHRcIjogXCJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJjbGFzc1wiOlwiVGFsa1wiLFxyXG5cdFx0XHRcInV1aWRcIjpcInRsazNcIixcclxuXHRcdFx0XCJpbnB1dFwiOiB7fSxcclxuXHRcdFx0XCJjaGlsZHJlblwiOiBbXCJ0bGszYW5zMVwiXSxcclxuXHRcdFx0XCJ0ZXh0XCI6IFwiXCJcclxuXHRcdH1cclxuICAgIF0sXHJcbiAgICBcImFuc3dlcnNcIjpbXHJcblx0XHR7XHJcblx0XHRcdFwiY2xhc3NcIjpcIkFuc3dlclwiLFxyXG5cdFx0XHRcInV1aWRcIjpcInRsazBhbnMxXCIsXHJcblx0XHRcdFwiaW5wdXRcIjoge30sXHJcblx0XHRcdFwib3V0cHV0XCI6IHt9LFxyXG5cdFx0XHRcInRleHRcIjogXCJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJjbGFzc1wiOlwiQW5zd2VyXCIsXHJcblx0XHRcdFwidXVpZFwiOlwidGxrMGFuczJcIixcclxuXHRcdFx0XCJpbnB1dFwiOiB7fSxcclxuXHRcdFx0XCJvdXRwdXRcIjoge30sXHJcblx0XHRcdFwidGV4dFwiOiBcIlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImNsYXNzXCI6XCJBbnN3ZXJcIixcclxuXHRcdFx0XCJ1dWlkXCI6XCJ0bGswYW5zM1wiLFxyXG5cdFx0XHRcImlucHV0XCI6IHt9LFxyXG5cdFx0XHRcIm91dHB1dFwiOiB7fSxcclxuXHRcdFx0XCJ0ZXh0XCI6IFwiXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiY2xhc3NcIjpcIkFuc3dlclwiLFxyXG5cdFx0XHRcInV1aWRcIjpcInRsazFhbnMxXCIsXHJcblx0XHRcdFwiaW5wdXRcIjoge30sXHJcblx0XHRcdFwib3V0cHV0XCI6IHt9LFxyXG5cdFx0XHRcInRleHRcIjogXCJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJjbGFzc1wiOlwiQW5zd2VyXCIsXHJcblx0XHRcdFwidXVpZFwiOlwidGxrMmFuczFcIixcclxuXHRcdFx0XCJpbnB1dFwiOiB7fSxcclxuXHRcdFx0XCJvdXRwdXRcIjoge30sXHJcblx0XHRcdFwidGV4dFwiOiBcIlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImNsYXNzXCI6XCJBbnN3ZXJcIixcclxuXHRcdFx0XCJ1dWlkXCI6XCJ0bGszYW5zMVwiLFxyXG5cdFx0XHRcImlucHV0XCI6IHt9LFxyXG5cdFx0XHRcIm91dHB1dFwiOiB7fSxcclxuXHRcdFx0XCJ0ZXh0XCI6IFwiXCJcclxuXHRcdH1cclxuICAgIF1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IFV0aWxzICAgICAgICBmcm9tICcuL2NvcmUvVXRpbHMnO1xyXG5pbXBvcnQgQmFzZU5vZGUgICAgIGZyb20gJy4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBFcnJvckhhbmRsZXIgZnJvbSAnLi9jb3JlL0Vycm9ySGFuZGxlcidcclxuaW1wb3J0IEVycm9yQ29kZSAgICBmcm9tICcuL2NvcmUvRXJyb3JDb2RlJztcclxuaW1wb3J0IExpbmsgICAgICAgICBmcm9tICcuL2NvcmUvTGluayc7XHJcbmltcG9ydCBBY3RvciAgICAgICAgZnJvbSAnLi9hY3RvcnMvQWN0b3InO1xyXG4vL2ltcG9ydCBJbnZlbnRvcnkgICAgZnJvbSAnLi9hY3RvcnMvSW52ZW5vdHJ5JztcclxuaW1wb3J0IENvbmRpdGlvbiAgICBmcm9tICcuL2NvbmRpdGlvbnMvQ29uZGl0aW9uJztcclxuaW1wb3J0IEFuc3dlciAgICAgICBmcm9tICcuL2RpYWxvZ3MvQW5zd2VyJztcclxuaW1wb3J0IERpYWxvZyAgICAgICBmcm9tICcuL2RpYWxvZ3MvRGlhbG9nJztcclxuaW1wb3J0IFRhbGsgICAgICAgICBmcm9tICcuL2RpYWxvZ3MvVGFsayc7XHJcbmltcG9ydCBRdWVzdCAgICAgICAgZnJvbSAnLi9xdWVzdHMvUXVlc3QnO1xyXG5pbXBvcnQgVGFzayAgICAgICAgIGZyb20gJy4vcXVlc3RzL1Rhc2snO1xyXG5cclxuY29uc3QgS0VZX0FDVE9SUyA9ICdhY3RvcnMnO1xyXG5jb25zdCBLRVlfQU5TV0VSUyA9ICdhbnN3ZXJzJztcclxuY29uc3QgS0VZX0NPTkRJVElPTlMgPSAnY29uZGl0aW9ucyc7XHJcbmNvbnN0IEtFWV9ESUFMT0dTID0gJ2RpYWxvZ3MnO1xyXG5jb25zdCBLRVlfTElOS1MgPSAnbGlua3MnO1xyXG5jb25zdCBLRVlfU0NSSVBUUyA9ICdzY3JpcHRzJztcclxuY29uc3QgS0VZX1RBTEtTID0gJ3RhbGtzJztcclxuY29uc3QgS0VZX1RBU0tTID0gJ3Rhc2tzJztcclxuY29uc3QgS0VZX1FVRVNUUyA9ICdxdWVzdHMnO1xyXG5jb25zdCBLRVlfVkFSSUFCTEVTID0gJ3ZhcmlhYmxlcyc7XHJcblxyXG5sZXQgUlBHU3lzdGVtID0gZnVuY3Rpb24gKGRhdGEsZWRpdG9yKSB7XHJcblxyXG4gIGxldCBfb2JqZWN0UG9vbCA9IHt9LFxyXG4gIF9lZGl0b3IgPSBlZGl0b3J8fG51bGwsXHJcbiAgX2Vycm9ySGFuZGxlciA9IG5ldyBFcnJvckhhbmRsZXIoX2VkaXRvciksXHJcbiAgX2NvbnRleHQgPSBudWxsLFxyXG4gIF9sYXN0Q2hpbGQgPSBudWxsLFxyXG4gIF9wYXJlbnRIaXN0b3J5ID0gW10sXHJcbiAgX2hhbGZMaW5rcyA9IHtcclxuICAgIG91dDogW10sXHJcbiAgICBpbnA6IFtdXHJcbiAgfTtcclxuXHJcbiAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgX29iamVjdFBvb2xba2V5XSA9IGRhdGFba2V5XS5tYXAoKGQpID0+IF9ub2RlRmFjdG9yeShkLHRoaXMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9ub2RlRmFjdG9yeShkYXRhKSB7XHJcbiAgICBsZXQgY2xhc3NOYW1lID0gZGF0YS5jbGFzcztcclxuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XHJcbiAgICAgIGNhc2UgJ0FjdG9yJzogICAgIHJldHVybiBuZXcgQWN0b3IoZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnQ29uZGl0aW9uJzogcmV0dXJuIG5ldyBDb25kaXRpb24oZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnQW5zd2VyJzogICAgcmV0dXJuIG5ldyBBbnN3ZXIoZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnRGlhbG9nJzogICAgcmV0dXJuIG5ldyBEaWFsb2coZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnVGFsayc6ICAgICAgcmV0dXJuIG5ldyBUYWxrKGRhdGEsdGhpcyk7XHJcbiAgICAgIGNhc2UgJ1F1ZXN0JzogICAgIHJldHVybiBuZXcgUXVlc3QoZGF0YSx0aGlzKTtcclxuICAgICAgY2FzZSAnVGFzayc6ICAgICAgcmV0dXJuIG5ldyBUYXNrKGRhdGEsdGhpcyk7XHJcbiAgICAgIGNhc2UgJ0xpbmsnOiAgICAgIHJldHVybiBuZXcgTGluayhkYXRhLHRoaXMpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuQ0xBU1NfTk9UX0RFRklORUQse2NsYXNzOmNsYXNzTmFtZX0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IF9maW5kTm9kZSA9IGZ1bmN0aW9uKG9iaklkKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gX29iamVjdFBvb2wpIHtcclxuICAgICAgaWYgKF9vYmplY3RQb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBsZXQgb2JqID0gVXRpbHMuZ2V0T2JqZWN0QnlJZChfb2JqZWN0UG9vbFtrZXldLG9iaklkKTtcclxuICAgICAgICBpZihvYmogIT09IG51bGwpIHJldHVybiBvYmo7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vSXMgZXJyb3IgbWVzc2FnZSBuZWNjZXNzYXJ5IGhlcmU/IFRvIGNvbnNpZGVyLlxyXG4gICAgLy9fZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLk9CSkVDVF9OT1RfRk9VTkQse2lkOm9iaklkfSk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LFxyXG5cbiAgX2dldE5vZGUgPSBmdW5jdGlvbihrZXksb2JqSWQpIHtcbiAgICBsZXQgb2JqID0gVXRpbHMuZ2V0T2JqZWN0QnlJZChfb2JqZWN0UG9vbFtrZXldLG9iaklkKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIF9hZGROb2RlID0gZnVuY3Rpb24oa2V5LG9iaikge1xyXG4gICAgaWYoIV9vYmplY3RQb29sW2tleV0pIF9vYmplY3RQb29sW2tleV0gPSBbXTtcclxuICAgIF9vYmplY3RQb29sW2tleV0ucHVzaChvYmopO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVOb2RlID0gZnVuY3Rpb24oa2V5LGlkKSB7XHJcbiAgICBfb2JqZWN0UG9vbFtrZXldID0gVXRpbHMucmVtb3ZlT2JqZWN0QnlJZChfb2JqZWN0UG9vbFtrZXldLGlkKTtcclxuICB9LFxyXG5cclxuICBfc2V0Q29ubmVjdGlvbiA9IGZ1bmN0aW9uKHR5cGUsbm9kZUlkMSxub2RlSWQyKSB7XHJcbiAgICBpZihub2RlSWQxID09PSBub2RlSWQyKSB7XHJcbiAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuQ09OTkVDVElPTl9UT19JVFNFTEYse25vZGU6bm9kZUlkMX0pO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZTEgPSBfZmluZE5vZGUobm9kZUlkMSk7XHJcbiAgICBsZXQgbm9kZTIgPSBfZmluZE5vZGUobm9kZUlkMik7XHJcbiAgICBpZihub2RlMSA9PT0gbnVsbCB8fCBub2RlMiA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgaWYobm9kZTEuY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSAmJiBub2RlMi5jYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkpIHtcclxuICAgICAgbGV0IGxpbmsgPSBuZXcgTGluayh7dHlwZTp0eXBlLG91dHB1dDpub2RlSWQxLGlucHV0Om5vZGVJZDJ9KTtcclxuICAgICAgbGV0IGxpbmtJZCA9IGxpbmsuZ2V0SWQoKTtcclxuICAgICAgX2FkZE5vZGUoS0VZX0xJTktTLGxpbmspO1xyXG4gICAgICBub2RlMS5zZXRPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKTtcclxuICAgICAgbm9kZTIuc2V0SW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKTtcclxuICAgICAgcmV0dXJuIGxpbmtJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU1QUk9QRVJfQ09OTkVDVElPTix7XHJcbiAgICAgICAgdHlwZTp0eXBlLFxyXG4gICAgICAgIG5vZGUxOm5vZGVJZDEsXHJcbiAgICAgICAgbm9kZTI6bm9kZUlkMlxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIF9nZXRDb25uZWN0aW9uID0gZnVuY3Rpb24obGlua0lkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZShLRVlfTElOS1MsbGlua0lkKTtcclxuICB9LFxyXG5cclxuICBfZ2V0Q29ubmVjdGlvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfTElOS1NdO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVDb25uZWN0aW9uID0gZnVuY3Rpb24obGlua0lkKSB7XHJcbiAgICB0aGlzLl9yZW1vdmVOb2RlKEtFWV9MSU5LUyxsaW5rSWQpO1xyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvL01FVEhPRCBDSEFJTklOR1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHVzZWQgdG8gY2hlY2sgcGFzc2VkIHBhcmFtZXRlcnMgYW5kIGxhdGVyIG1lcmdlIHRoZW0gaW50b1xyXG4gICAqIHNpbmdsZSBvYmplY3QuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgICAgIE1hbmRhdG9yeSBpZCBvZiBub2RlLlxyXG4gICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zICBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gUGFyYW1ldGVycyBtZXJnZWQgaW50byBvYmplY3QuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX2NoZWNrQW5kTWVyZ2VQYXJhbXMoXHJcbiAgICAgICAgICAgICAgICBpZCA9IF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuTUFOREFUT1JZX1BBUkFNLHtwYXJhbTonaWQnfSksXHJcbiAgICAgICAgICAgICAgICBwYXJhbXMpIHtcclxuICAgICAgaWYodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT1JSRUNUX1RZUEUse3R5cGU6J3N0cmluZyd9KTtcclxuICAgICAgfVxyXG4gICAgICBpZihwYXJhbXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcGFyYW1zICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT1JSRUNUX1RZUEUse3R5cGU6J29iamVjdCd9KTtcclxuICAgICAgfSBlbHNlIGlmKHBhcmFtcyA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBwYXJhbXMgPSB7fTtcclxuICAgICAgfVxyXG4gICAgICBwYXJhbXMudXVpZCA9IGlkO1xyXG4gICAgICByZXR1cm4gcGFyYW1zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2QgaGVscHMgaW4gdGhlIGNyZWF0aW9uIG9mIG5vZGVzLiBJdHMgZm9jdXMgb24gcHJvcGVyXHJcbiAgICogcGxhY2VtZW50IG9mIG5vZGVzIGluIHRyZWUuXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgICAgIE1hbmRhdG9yeSBpZCBvZiBuZXdseSBjcmVhdGVkIG5vZGUuXHJcbiAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJhbXMgIFBhcmFtZXRlcnMgb2YgY3JlYXRlZCBub2RlLlxyXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGFzQ2hpbGQgRGV0ZXJtaW5lcyBpZiBub2RlIHNob3VsZCBiZSBhZGRlZCBhcyBjaGlsZFxyXG4gICAqIG9mIGFub3RoZXIgbm9kZSBvciBhcyBhbiBpbmRlcGVuZGVudCBub2RlLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gY2xhc3NOYW1lICAgTmFtZSBvZiBjbGFzcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgbm9kZS5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0b3JhZ2UgTmFtZSBvZiBub2RlIGdyb3VwIGluc2lkZSB3aGljaCBub2RlIHdpbGwgYmUgYWRkZWQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGFzQ2hpbGQsY2xhc3NOYW1lLHN0b3JhZ2UpIHtcclxuICAgIC8vRmlyc3QsIHdlIGNoZWNrIHRoYXQgaWQgYW5kIHBhcmFtcyBhcmUgdmFsaWQuXHJcbiAgICBwYXJhbXMgPSBfY2hlY2tBbmRNZXJnZVBhcmFtcyhpZCxwYXJhbXMpO1xyXG4gICAgLy9DbGFzcyBuYW1lIGZvciBsYXRlciB1c2FnZS5cclxuICAgIHBhcmFtcy5jbGFzcyA9IGNsYXNzTmFtZTtcclxuXHJcbiAgICAvL1Rlc3QgaWYgbm9kZSBzaG91bGQgYmUgYWRkZWQgYXMgY2hpbGQgb3IgcGFyZW50LlxyXG4gICAgaWYoYXNDaGlsZCkge1xyXG4gICAgICAvL0lmIGxhc3QgYWRkZWQgY2hpbGQgd2FzIG5vdCBudWxsIHRoZW4gd2UgbXVzdCBjaGVjayBhZGRpdGlvbmFsIGNvbmRpdGlvbnMuXHJcbiAgICAgIGlmKF9sYXN0Q2hpbGQgIT09IG51bGwpIHtcclxuICAgICAgICAvL0lmIGNvbnN0cnVjdG9yIG5hbWUgb2YgcHJldmlvdXMgY2hpbGQgbm9kZSwgaXMgZXF1YWwgdG8gbmFtZSBvZiBjbGFzcyxcclxuICAgICAgICAvL3dob3NlIHdlIHRyeSB0byBjcmVhdGUsIGl0IG1lYW5zIG5vZGUgc2hvdWxkIGJlIGFkZGVkIHRvIGN1cnJlbnQgcGFyZW50LlxyXG4gICAgICAgIGlmKF9sYXN0Q2hpbGQuY29uc3RydWN0b3IubmFtZSA9PT0gY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICBjcmVhdGVDaGlsZE5vZGUocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9JZiBuYW1lcyBvZiBjb25zdHJ1Y3RvcnMgbm90IG1hdGNoLCB0aGVuIHdlIG11c3QgY2hlY2sgaWYgbmV3IG5vZGVcclxuICAgICAgICAvL2NhbiBiZSBhZGRlZCBhcyBjaGlsZCB0byBvdXIgcHJldmlvdXMgY2hpbGQuXHJcbiAgICAgICAgZWxzZSBpZihfbGFzdENoaWxkLmNhbkFkZENoaWxkKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgIF9wYXJlbnRIaXN0b3J5LnVuc2hpZnQoX2xhc3RDaGlsZCk7XHJcbiAgICAgICAgICBjcmVhdGVDaGlsZE5vZGUocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9GaW5hbGx5IGlmIHByZXZpb3VzIGNvbmRpdGlvbnMgYXJlIGZhbHNlIHdlIHRyeSBnbyBiYWNrIHRvIHByZXZpb3VzXHJcbiAgICAgICAgLy9wYXJlbnQgbm9kZS5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIF9sYXN0Q2hpbGQgPSBfcGFyZW50SGlzdG9yeS5zaGlmdCgpfHxudWxsO1xyXG4gICAgICAgICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGFzQ2hpbGQsY2xhc3NOYW1lLHN0b3JhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL0lmIGxhc3QgY2hpbGQgaXMgbnVsbCwgdGhlbiB3ZSBjaGVjayBpZiBub2RlIGNhbiBiZSBhZGRlZCB0byBjdXJyZW50XHJcbiAgICAgIC8vcGFyZW50IG5vZGUuXHJcbiAgICAgIGVsc2UgaWYoX3BhcmVudEhpc3RvcnkubGVuZ3RoID4gMCAmJiBfcGFyZW50SGlzdG9yeVswXS5jYW5BZGRDaGlsZChjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgY3JlYXRlQ2hpbGROb2RlKHBhcmFtcyk7XHJcbiAgICAgIH1cclxuICAgICAgLy9JZiBsYXN0IGNoaWxkIGFuZCBsYXN0IHBhcmVudCBpcyBlcXVhbCB0byBudWxsLCB0aGVuIG5ldyBjaGlsZCBub2RlXHJcbiAgICAgIC8vY2FudCBiZSBhZGRlZCwgc28gd2UgdGhyb3cgZXJyb3IuXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIF9lcnJvckhhbmRsZXIuc2hvd01zZyhFcnJvckNvZGUuSU5DT01QQVRJQkxFX0NISUxELHtcclxuICAgICAgICAgIGNoaWxkOmNsYXNzTmFtZSxcclxuICAgICAgICAgIHBhcmVudDogX3BhcmVudEhpc3RvcnkubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgPyBfcGFyZW50SGlzdG9yeVswXS5jb25zdHJ1Y3Rvci5uYW1lXHJcbiAgICAgICAgICAgICAgICA6ICdudWxsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvL0lmIG5vZGUgaXMgYWRkZWQgYXMgcGFyZW50LCB0aGVuIGxhc3QgY2hpbGQgaXMgc2V0IHRvIG51bGxcclxuICAgICAgLy9hbmQgcGFyZW50IGhpc3RvcnkgaXMgY2xlYXJlZC5cclxuICAgICAgX2xhc3RDaGlsZCA9IG51bGw7XHJcbiAgICAgIF9wYXJlbnRIaXN0b3J5Lmxlbmd0aCA9IDA7XHJcbiAgICAgIC8vQWZ0ZXIgdGhhdCwgbmV3IG5vZGUgaXMgY3JlYXRlZC5cclxuICAgICAgbGV0IG5vZGUgPSBfbm9kZUZhY3RvcnkocGFyYW1zKTtcclxuICAgICAgX3BhcmVudEhpc3RvcnkgPSBbbm9kZV07XHJcbiAgICAgIF9hZGROb2RlKHN0b3JhZ2Usbm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hpbGROb2RlKG5vZGVQYXJhbXMpIHtcclxuICAgICAgLy9XZSBjcmVhdGUgYSBuZXcgbm9kZSwgYW5kIHRoZW4gc2V0IGFzIHRoZSBsYXN0IGNoaWxkLlxyXG4gICAgICBfbGFzdENoaWxkID0gX25vZGVGYWN0b3J5KG5vZGVQYXJhbXMpO1xyXG4gICAgICAvL1RoZW4gd2UgYWRkIG91ciBmcmVzaGx5IGNyZWF0ZWQgbm9kZSB0byBpdHMgcGFyZW50LlxyXG4gICAgICBfcGFyZW50SGlzdG9yeVswXS5hZGRDaGlsZChfbGFzdENoaWxkLmdldElkKCkpO1xyXG4gICAgICAvL0ZpbmFsbHkgbmV3IG5vZGUgaXMgYWRkZWQgdG8gbWFpbiBzdG9yYWdlIG9iamVjdC5cclxuICAgICAgX2FkZE5vZGUoc3RvcmFnZSxfbGFzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIHJlbW92ZSBub2RlcyBmcm9tIG9iamVjdCBwb29sXHJcbiAgICogYW5kIHJlc2V0IGNvbnRleHQgb2YgXCJtZXRob2QgY2hhaW5pbmdcIiBhbGdvcml0aG0uXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBpZCAgSWQgb2Ygbm9kZSB0byBiZSByZW1vdmVkLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30ga2V5IE5hbWUgb2Ygbm9kZSBncm91cCB3aGljaCBjb250YWlucyBub2RlIHRvIHJlbW92ZS5cclxuICAgKi9cclxuICBmdW5jdGlvbiBfY2hhaW5Ob2RlUmVtb3ZlcihpZCxrZXkpIHtcclxuICAgIF9sYXN0Q2hpbGQgPSBudWxsO1xyXG4gICAgX3BhcmVudEhpc3RvcnkubGVuZ3RoID0gMDtcclxuICAgIHRoaXMuX3JlbW92ZU5vZGUoa2V5LGlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIGZvciBjcmVhdGluZyB0ZW1wb3JhcnkgbGlua3MgKGhhbGYgbGlua3MpXHJcbiAgICogb3IgY29tcGxldGUgTGluayBub2Rlcywgd2hlbiBpbnB1dCBhbmQgb3V0cHV0IGNvdW50ZXJwYXJ0cyBhcmUgcHJlc2VudC5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGUgICAgICBEZWZpbmVzIHR5cGUgb2YgY29ubmVjdGlvbi5cclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGlkICAgICAgICBJZCBvZiB0YXJnZXRlZCBub2RlIGludG8gd2hpY2ggY29ubmVjdGlvblxyXG4gICAqIHNob3VsZCBiZSBtYWRlLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gc3RhcnRTaWRlIERlZmluZXMgY3VycmVudCBzdGFydCBzaWRlIG9mIHRoZSBsaW5rLlxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZW5kU2lkZSAgIERlZmluZXMgY3VycmVudCBlbmQgc2lkZSBvZiB0aGUgbGluay5cclxuICAgKi9cclxuICBmdW5jdGlvbiBfY2hhaW5MaW5rQ3JlYXRvcih0eXBlLGlkLHN0YXJ0U2lkZSxlbmRTaWRlKSB7XHJcbiAgICBsZXQgb3Bwb3NpdGUgPSBudWxsO1xyXG4gICAgbGV0IG5vZGUgPSBudWxsO1xyXG4gICAgaWYoX2xhc3RDaGlsZCAhPT0gbnVsbCkge1xyXG4gICAgICBub2RlID0gX2xhc3RDaGlsZDtcclxuICAgIH0gZWxzZSBpZihfcGFyZW50SGlzdG9yeVswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIG5vZGUgPSBfcGFyZW50SGlzdG9yeVswXTtcclxuICAgIH1cclxuICAgIGlmKG5vZGUgIT09IG51bGwpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfaGFsZkxpbmtzW2VuZFNpZGVdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGxpbmsgPSBfaGFsZkxpbmtzW2VuZFNpZGVdW2ldO1xyXG4gICAgICAgIGlmKGxpbmsudHlwZSA9PT0gdHlwZSAmJiBsaW5rLmlkID09PSBub2RlLmdldElkKCkpe1xyXG4gICAgICAgICAgb3Bwb3NpdGUgPSBfaGFsZkxpbmtzW2VuZFNpZGVdLnNwbGljZShpLDEpWzBdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmKG9wcG9zaXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgX2hhbGZMaW5rc1tzdGFydFNpZGVdLnB1c2goe3R5cGUsaWR9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZihzdGFydFNpZGUgPT09ICdpbnAnKSB7XHJcbiAgICAgICAgICBfc2V0Q29ubmVjdGlvbih0eXBlLGlkLG9wcG9zaXRlLmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX3NldENvbm5lY3Rpb24odHlwZSxvcHBvc2l0ZS5pZCxpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfZXJyb3JIYW5kbGVyLnNob3dNc2coRXJyb3JDb2RlLklOQ09SUkVDVF9MSU5LX1RBUkdFVCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsZXQgX2FkZEFjdG9yID0gZnVuY3Rpb24oaWQscGFyYW1zKSB7XHJcbiAgICBfY2hhaW5Ob2RlQ3JlYXRvcihpZCxwYXJhbXMsZmFsc2UsJ0FjdG9yJyxLRVlfQUNUT1JTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVBY3RvciA9IGZ1bmN0aW9uKGFjdG9ySWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGFjdG9ySWQsS0VZX0FDVE9SUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfYWRkUXVlc3QgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnUXVlc3QnLEtFWV9RVUVTVFMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZVF1ZXN0ID0gZnVuY3Rpb24ocXVlc3RJZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIocXVlc3RJZCxLRVlfUVVFU1RTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGREaWFsb2cgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnRGlhbG9nJyxLRVlfRElBTE9HUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlRGlhbG9nID0gZnVuY3Rpb24oZGlhbG9nSWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGRpYWxvZ0lkLEtFWV9ESUFMT0dTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRDb25kaXRpb24gPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyxmYWxzZSwnQ29uZGl0aW9uJyxLRVlfQ09ORElUSU9OUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlQ29uZGl0aW9uID0gZnVuY3Rpb24oY29uZGl0aW9uSWQpIHtcclxuICAgIF9jaGFpbk5vZGVSZW1vdmVyKGNvbmRpdGlvbklkLEtFWV9DT05ESVRJT05TKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRWYXJpYWJsZSA9IGZ1bmN0aW9uKGlkLHBhcmFtcykge1xyXG4gICAgX2NoYWluTm9kZUNyZWF0b3IoaWQscGFyYW1zLGZhbHNlLCdWYXJpYWJsZScsS0VZX1ZBUklBQkxFUyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBfcmVtb3ZlVmFyaWFibGUgPSBmdW5jdGlvbih2YXJpYWJsZUlkKSB7XHJcbiAgICBfY2hhaW5Ob2RlUmVtb3Zlcih2YXJpYWJsZUlkLEtFWV9WQVJJQUJMRVMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2FkZFRhbGsgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyx0cnVlLCdUYWxrJyxLRVlfVEFMS1MpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX3JlbW92ZVRhbGsgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoaWQsS0VZX1RBTEtTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9hZGRBbnN3ZXIgPSBmdW5jdGlvbihpZCxwYXJhbXMpIHtcclxuICAgIF9jaGFpbk5vZGVDcmVhdG9yKGlkLHBhcmFtcyx0cnVlLCdBbnN3ZXInLEtFWV9BTlNXRVJTKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIF9yZW1vdmVBbnN3ZXIgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgX2NoYWluTm9kZVJlbW92ZXIoaWQsS0VZX0FOU1dFUlMpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX2lucCA9IGZ1bmN0aW9uKHR5cGUsaWQpIHtcclxuICAgIF9jaGFpbkxpbmtDcmVhdG9yKHR5cGUsaWQsJ2lucCcsJ291dCcpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgX291dCA9IGZ1bmN0aW9uKHR5cGUsaWQpIHtcclxuICAgIF9jaGFpbkxpbmtDcmVhdG9yKHR5cGUsaWQsJ291dCcsJ2lucCcpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vR0VUVEVSU1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBfZ2V0QWN0b3IgPSBmdW5jdGlvbihhY3RvcklkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZShLRVlfQUNUT1JTLGFjdG9ySWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRBY3RvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfQUNUT1JTXTtcclxuICB9LFxyXG5cclxuICBfZ2V0Q29uZGl0aW9uID0gZnVuY3Rpb24oY29uZGl0aW9uSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXROb2RlKEtFWV9DT05ESVRJT05TLGNvbmRpdGlvbklkKTtcclxuICB9LFxyXG5cclxuICBfZ2V0Q29uZGl0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIF9vYmplY3RQb29sW0tFWV9DT05ESVRJT05TXTtcclxuICB9LFxyXG5cclxuICBfZ2V0RGlhbG9nID0gZnVuY3Rpb24oZGlhbG9nSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXROb2RlKEtFWV9ESUFMT0dTLGRpYWxvZ0lkKTtcclxuICB9LFxyXG5cclxuICBfZ2V0RGlhbG9ncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIF9vYmplY3RQb29sW0tFWV9ESUFMT0dTXTtcclxuICB9LFxyXG5cclxuICBfZ2V0UXVlc3QgPSBmdW5jdGlvbihxdWVzdElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZShLRVlfUVVFU1RTLHF1ZXN0SWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRRdWVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfUVVFU1RTXTtcclxuICB9LFxyXG5cclxuICBfZ2V0VmFyaWFibGUgPSBmdW5jdGlvbih2YXJpYWJsZUlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZShLRVlfVkFSSUFCTEVTLHZhcmlhYmxlSWQpO1xyXG4gIH0sXHJcblxyXG4gIF9nZXRWYXJpYWJsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBfb2JqZWN0UG9vbFtLRVlfVkFSSUFCTEVTXTtcclxuICB9LFxyXG5cclxuICBfc2VyaWFsaXplRGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGRhdGEgPSB7fTtcclxuICAgIGZvciAodmFyIGtleSBpbiBfb2JqZWN0UG9vbCkge1xyXG4gICAgICBpZiAoX29iamVjdFBvb2wuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgIGRhdGFba2V5XSA9IF9vYmplY3RQb29sW2tleV0ubWFwKChvYmopID0+IHtcclxuICAgICAgICAgIHJldHVybiBvYmouZ2V0RGF0YSA/IG9iai5nZXREYXRhKCkgOiBvYmo7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2VuZXJhbCBub2RlIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBmaW5kTm9kZTogICAgICAgICBfZmluZE5vZGUsXHJcbiAgICBnZXROb2RlOiAgICAgICAgICBfZ2V0Tm9kZSxcclxuICAgIGFkZE5vZGU6ICAgICAgICAgIF9hZGROb2RlLFxyXG4gICAgcmVtb3ZlTm9kZTogICAgICAgX3JlbW92ZU5vZGUsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vTGluayBjcmVhdGlvbiBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2V0Q29ubmVjdGlvbjogICAgX3NldENvbm5lY3Rpb24sXHJcbiAgICBnZXRDb25uZWN0aW9uOiAgICBfZ2V0Q29ubmVjdGlvbixcclxuICAgIGdldENvbm5lY3Rpb25zOiAgIF9nZXRDb25uZWN0aW9ucyxcclxuICAgIHJlbW92ZUNvbm5lY3Rpb246IF9yZW1vdmVDb25uZWN0aW9uLFxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvL0NoYWluYWJsZSBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgYWRkQWN0b3I6ICAgICAgICBfYWRkQWN0b3IsXHJcbiAgICByZW1vdmVBY3RvcjogICAgIF9yZW1vdmVBY3RvcixcclxuICAgIGFkZFF1ZXN0OiAgICAgICAgX2FkZFF1ZXN0LFxyXG4gICAgcmVtb3ZlUXVlc3Q6ICAgICBfcmVtb3ZlUXVlc3QsXHJcbiAgICBhZGREaWFsb2c6ICAgICAgIF9hZGREaWFsb2csXHJcbiAgICByZW1vdmVEaWFsb2c6ICAgIF9yZW1vdmVEaWFsb2csXHJcbiAgICBhZGRDb25kaXRpb246ICAgIF9hZGRDb25kaXRpb24sXHJcbiAgICByZW1vdmVDb25kaXRpb246IF9yZW1vdmVDb25kaXRpb24sXHJcbiAgICBhZGRWYXJpYWJsZTogICAgIF9hZGRWYXJpYWJsZSxcclxuICAgIHJlbW92ZVZhcmlhYmxlOiAgX3JlbW92ZVZhcmlhYmxlLFxyXG4gICAgYWRkVGFsazogICAgICAgICBfYWRkVGFsayxcclxuICAgIHJlbW92ZVRhbGs6ICAgICAgX3JlbW92ZVRhbGssXHJcbiAgICBhZGRBbnN3ZXI6ICAgICAgIF9hZGRBbnN3ZXIsXHJcbiAgICByZW1vdmVBbnN3ZXI6ICAgIF9yZW1vdmVBbnN3ZXIsXHJcbiAgICBpbnA6ICAgICAgICAgICAgIF9pbnAsXHJcbiAgICBvdXQ6ICAgICAgICAgICAgIF9vdXQsXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vR2V0dGVyIG1ldGhvZHNcclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBnZXRBY3RvcjogICAgICAgIF9nZXRBY3RvcixcclxuICAgIGdldEFjdG9yczogICAgICAgX2dldEFjdG9ycyxcclxuICAgIGdldENvbmRpdGlvbjogICAgX2dldENvbmRpdGlvbixcclxuICAgIGdldENvbmRpdGlvbnM6ICAgX2dldENvbmRpdGlvbnMsXHJcbiAgICBnZXREaWFsb2c6ICAgICAgIF9nZXREaWFsb2csXHJcbiAgICBnZXREaWFsb2dzOiAgICAgIF9nZXREaWFsb2dzLFxyXG4gICAgZ2V0UXVlc3Q6ICAgICAgICBfZ2V0UXVlc3QsXHJcbiAgICBnZXRRdWVzdHM6ICAgICAgIF9nZXRRdWVzdHMsXHJcbiAgICBnZXRWYXJpYWJsZTogICAgIF9nZXRWYXJpYWJsZSxcclxuICAgIGdldFZhcmlhYmxlczogICAgX2dldFZhcmlhYmxlcyxcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy9NaXNjYWxpbmV1cyBtZXRob2RzXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgc2VyaWFsaXplRGF0YTogICAgX3NlcmlhbGl6ZURhdGFcclxuICB9O1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IFJQR1N5c3RlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuaW1wb3J0IExpbmtUeXBlICAgZnJvbSAnLi4vY29yZS9MaW5rVHlwZSc7XHJcblxyXG5sZXQgQWN0b3IgPSAoZnVuY3Rpb24oKSB7XHJcbiAgLy9XZWFrIG1hcHMgYXJlIG5ldyBmZWF0dXJlIHRvIEphdmFTY3JpcHQuIFdlIGNhbiBzdG9yZSBwcml2YXRlXHJcbiAgLy9vYmplY3QgcHJvcGVydGllcyBpbiBrZXkvdmFsdWUgcGFpcnMgdXNpbmcgb3VyIGluc3RhbmNlIGFzIHRoZSBrZXksXHJcbiAgLy9hbmQgb3VyIGNsYXNzIGNhbiBjYXB0dXJlIHRob3NlIGtleS92YWx1ZSBtYXBzIGluIGEgY2xvc3VyZS5cclxuICBsZXQgX25hbWUgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfZGlhbG9nID0gbmV3IFdlYWtNYXAoKTtcclxuICAvL2xldCBfaW52ZW50b3J5ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcblxyXG4gIHJldHVybiBjbGFzcyBBY3RvciBleHRlbmRzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgIF9uYW1lLnNldCh0aGlzLGRhdGEgPyBkYXRhLm5hbWUgOiAnJyk7XHJcbiAgICAgIF9kaWFsb2cuc2V0KHRoaXMsZGF0YSA/IGRhdGEuZGlhbG9nIDogJycpO1xyXG4gICAgICAvL19pbnZlbnRvcnkuc2V0KHRoaXMsZGF0YS5pbnZlbnRvcnkgPyApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLm5hbWUgPSB0aGlzLmdldE5hbWUoKTtcclxuICAgICAgZGF0YS5kaWFsb2cgPSB0aGlzLmdldERpYWxvZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROYW1lKHZhbHVlKSB7XHJcbiAgICAgIF9uYW1lLnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICByZXR1cm4gX25hbWUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpYWxvZygpIHtcclxuICAgICAgcmV0dXJuIF9kaWFsb2cuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qZ2V0SW52ZW50b3J5KCkge1xyXG4gICAgICByZXR1cm4gX2ludmVudG9yeS5nZXQodGhpcyk7XHJcbiAgICB9Ki9cclxuXHJcbiAgICBjYW5DcmVhdGVJbnB1dENvbm5lY3Rpb24odHlwZSkge1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIExpbmtUeXBlLkRJQUxPRzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuRElBTE9HKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIF9uYW1lLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX2RpYWxvZy5kZWxldGUodGhpcyk7XHJcbiAgICAgIC8vX2ludmVudG9yeS5kZWxldGUodGhpcyk7XHJcbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBY3RvcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBMaW5rVHlwZSAgIGZyb20gJy4uL2NvcmUvTGlua1R5cGUnO1xyXG5pbXBvcnQgY29tcGlsZXIgICBmcm9tICdAcmlzaW5nc3RhY2svbngtY29tcGlsZSc7XHJcblxyXG5sZXQgQ29uZGl0aW9uID0gKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IF9sYWJlbCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9jb2RlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX2NvbXBpbGVkID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3NhbmRib3ggPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQ29uZGl0aW9uIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF9sYWJlbC5zZXQodGhpcyxkYXRhLmxhYmVsID8gZGF0YS5sYWJlbCA6ICcnKTtcclxuICAgICAgX2NvZGUuc2V0KHRoaXMsZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogYChmdW5jdGlvbigpe3JldHVybiB0cnVlO30pKCk7YCk7XHJcbiAgICAgIF9zYW5kYm94LnNldCh0aGlzLHtycGdzfSk7XHJcbiAgICAgIF9jb21waWxlZC5zZXQodGhpcyxjb21waWxlci5jb21waWxlRXhwcmVzc2lvbihfY29kZS5nZXQodGhpcyksIF9zYW5kYm94LmdldCh0aGlzKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExhYmVsKHRleHQpIHtcclxuICAgICAgX2xhYmVsLnNldCh0aGlzLHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExhYmVsKCkge1xyXG4gICAgICByZXR1cm4gX2xhYmVsLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb2RlKGNvZGUpIHtcclxuICAgICAgX2NvZGUuc2V0KHRoaXMsY29kZSk7XHJcbiAgICAgIF9jb21waWxlZC5zZXQodGhpcyxjb21waWxlci5jb21waWxlRXhwcmVzc2lvbihfY29kZS5nZXQodGhpcyksIF9zYW5kYm94LmdldCh0aGlzKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvZGUoKSB7XHJcbiAgICAgIHJldHVybiBfY29kZS5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2soKSB7XHJcbiAgICAgIHJldHVybiBfY29tcGlsZWQuZ2V0KHRoaXMpKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEubGFiZWwgPSB0aGlzLmdldExhYmVsKCk7XHJcbiAgICAgIGRhdGEuY29kZSA9IHRoaXMuZ2V0Q29kZSgpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVPdXRwdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5WSVNJQklMSVRZOlxyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuQUNUSVZJVFk6XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG4gICAgZ2V0SW5wdXRDb25uZWN0aW9ucyh0eXBlKSB7fVxyXG4gICAgcmVtb3ZlSW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIF9sYWJlbC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9jb2RlLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgX3NhbmRib3guZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfY29tcGlsZWQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQ29uZGl0aW9uO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IHtVVUlEfSAgIGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgTGlua1R5cGUgZnJvbSAnLi9MaW5rVHlwZSc7XHJcblxyXG5jb25zdCBLRVlfTElOS1MgPSAnbGlua3MnO1xyXG5jb25zdCBLRVlfQ09ORElUSU9OUyA9ICdjb25kaXRpb25zJztcclxuXHJcbmxldCBCYXNlTm9kZSA9IChmdW5jdGlvbigpe1xyXG4gIC8vV2VhayBtYXBzIGFyZSBuZXcgZmVhdHVyZSB0byBKYXZhU2NyaXB0LiBXZSBjYW4gc3RvcmUgcHJpdmF0ZVxyXG4gIC8vb2JqZWN0IHByb3BlcnRpZXMgaW4ga2V5L3ZhbHVlIHBhaXJzIHVzaW5nIG91ciBpbnN0YW5jZSBhcyB0aGUga2V5LFxyXG4gIC8vYW5kIG91ciBjbGFzcyBjYW4gY2FwdHVyZSB0aG9zZSBrZXkvdmFsdWUgbWFwcyBpbiBhIGNsb3N1cmUuXHJcbiAgbGV0IF9ycGdzID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX3V1aWQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfaW5wdXQgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfb3V0cHV0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIEJhc2VOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBfcnBncy5zZXQodGhpcyxycGdzKTtcclxuICAgICAgLy9JZiB1dWlkIG5vdCBwcmVzZW50LCB0aGVuIGJ5IGRlZmF1bHQgd2UgYXNzaWduIFVuaXZlcnNhbGx5IFVuaXF1ZSBJRC5cclxuICAgICAgX3V1aWQuc2V0KHRoaXMsZGF0YS51dWlkID8gZGF0YS51dWlkIDogVVVJRC5nZW5lcmF0ZSgpKTtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLGRhdGEuaW5wdXQgPyBkYXRhLmlucHV0IDoge30pO1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLGRhdGEub3V0cHV0ID8gZGF0YS5vdXRwdXQgOiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UlBHUygpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0UlBHUygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldElkKHZhbHVlKSB7XHJcbiAgICAgIF91dWlkLnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJZCgpIHtcclxuICAgICAgcmV0dXJuIF91dWlkLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0NvbmRpdGlvbihjb25kaXRpb25JZCkge1xyXG4gICAgICBsZXQgY29uZGl0aW9uID0gdGhpcy5nZXRSUEdTKCkuZ2V0Tm9kZShLRVlfQ09ORElUSU9OUyxjb25kaXRpb25JZCk7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb24gPyBjb25kaXRpb24uY2hlY2soKSA6IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGJvb2xlYW4gdGhhdCByZWZsZWN0cyB2aXNpYmxpbGl0eSBzdGF0ZSBvZiBub2RlLlxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVmlzaWJpbGl0eSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBpc1Zpc2libGUoKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb25zID0gZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5WSVNJQklMSVRZKTtcclxuICAgICAgcmV0dXJuIGNvbmRpdGlvbnMgPyB0aGlzLmNoZWNrQ29uZGl0aW9uKGNvbmRpdGlvbnNbMF0pIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYm9vbGVhbiB0aGF0IHJlZmxlY3RzIGFjdGl2aXR5IHN0YXRlIG9mIG5vZGUuXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBBY3RpdmUgc3RhdGVcclxuICAgICAqL1xyXG4gICAgaXNBY3RpdmUoKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb25zID0gZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5BQ1RJVklUWSk7XHJcbiAgICAgIHJldHVybiBjb25kaXRpb25zID8gdGhpcy5jaGVja0NvbmRpdGlvbihjb25kaXRpb25zWzBdKSA6IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFzczp0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXHJcbiAgICAgICAgdXVpZDp0aGlzLmdldElkKCksXHJcbiAgICAgICAgaW5wdXQ6dGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKCksXHJcbiAgICAgICAgb3V0cHV0OnRoaXMuZ2V0T3V0cHV0Q29ubmVjdGlvbnMoKVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkFkZENoaWxkKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENoaWxkKGNoaWxkSWQpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2hpbGQoaW5kZXgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGQoaW5kZXgpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGRyZW4oKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlQ2hpbGRyZW4oa2V5KSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVPdXRwdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRDb25uZWN0aW9uKG9iaix0eXBlLGxpbmtJZCkge1xyXG4gICAgICBpZighb2JqLmhhc093blByb3BlcnR5KHR5cGUpKSB7XHJcbiAgICAgICAgb2JqW3R5cGVdID0gW107XHJcbiAgICAgIH1cclxuICAgICAgb2JqW3R5cGVdLnB1c2gobGlua0lkKTtcclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBzZXRPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIF9vdXRwdXQuc2V0KHRoaXMsdGhpcy5fc2V0Q29ubmVjdGlvbihfb3V0cHV0LmdldCh0aGlzKSx0eXBlLGxpbmtJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldElucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge1xyXG4gICAgICBfaW5wdXQuc2V0KHRoaXMsdGhpcy5fc2V0Q29ubmVjdGlvbihfaW5wdXQuZ2V0KHRoaXMpLHR5cGUsbGlua0lkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldENvbm5lY3Rpb25zKG9iaix0eXBlKSB7XHJcbiAgICAgIGlmKHR5cGUpIHJldHVybiAhb2JqLmhhc093blByb3BlcnR5KHR5cGUpID8gW10gOiBvYmpbdHlwZV07XHJcbiAgICAgIGVsc2UgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRPdXRwdXRDb25uZWN0aW9ucyh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9nZXRDb25uZWN0aW9ucyhfb3V0cHV0LmdldCh0aGlzKSx0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbnB1dENvbm5lY3Rpb25zKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbm5lY3Rpb25zKF9pbnB1dC5nZXQodGhpcyksdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUNvbm5lY3Rpb24ob2JqLHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgICAgIG9ialt0eXBlXSA9IFV0aWxzLnJlbW92ZU9iamVjdEZyb21BcnJheShvYmpbdHlwZV0sbGlua0lkKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZU91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHtcclxuICAgICAgX291dHB1dC5zZXQodGhpcyx0aGlzLl9yZW1vdmVDb25uZWN0aW9uKF9vdXRwdXQuZ2V0KHRoaXMpLHR5cGUsbGlua0lkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlSW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7XHJcbiAgICAgIF9pbnB1dC5zZXQodGhpcyx0aGlzLl9yZW1vdmVDb25uZWN0aW9uKF9pbnB1dC5nZXQodGhpcyksdHlwZSxsaW5rSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDaGlsZHJlbkZyb20ob2JqLGtleSkge1xyXG4gICAgICBvYmouZmlsdGVyKChjaGlsZElkLCBpbmRleCwgYXJyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXRSUEdTKCkucmVtb3ZlTm9kZShrZXksY2hpbGRJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVMaW5rc0Zyb20ob2JqKSB7XHJcbiAgICAgIGZvciAodmFyIHR5cGUgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgICAgICAgcmVtb3ZlQ2hpbGRyZW5Gcm9tKG9ialt0eXBlXSxLRVlfTElOS1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUxpbmtzRnJvbShfb3V0cHV0LmdldCh0aGlzKSk7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUxpbmtzRnJvbShfaW5wdXQuZ2V0KHRoaXMpKTtcclxuICAgICAgX3JwZ3MuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfdXVpZC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9pbnB1dC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9vdXRwdXQuZGVsZXRlKHRoaXMpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQmFzZU5vZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5pbXBvcnQgQmFzZU5vZGUgZnJvbSAnLi4vY29yZS9CYXNlTm9kZSc7XHJcbmltcG9ydCBVdGlscyAgICBmcm9tICcuLi9jb3JlL1V0aWxzJztcclxuXHJcbmxldCBDb21wb3VuZE5vZGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IF9jaGlsZHJlbiA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBDb21wb3VuZE5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF9jaGlsZHJlbi5zZXQodGhpcyxkYXRhLmNoaWxkcmVuID8gZGF0YS5jaGlsZHJlbiA6IFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5jaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2hpbGQoY2hpbGRJZCkge1xyXG4gICAgICBsZXQgY2hpbGRyZW4gPSBfY2hpbGRyZW4uZ2V0KHRoaXMpO1xyXG4gICAgICBfY2hpbGRyZW4uc2V0KHRoaXMsVXRpbHMuYWRkT2JqZWN0VG9BcnJheShjaGlsZHJlbixjaGlsZElkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2hpbGQoaW5kZXgpIHtcclxuICAgICAgbGV0IGNoaWxkcmVuID0gX2NoaWxkcmVuLmdldCh0aGlzKTtcclxuICAgICAgX2NoaWxkcmVuLnNldCh0aGlzLGNoaWxkcmVuLnNwbGljZShpbmRleCwxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGQoaW5kZXgpIHtcclxuICAgICAgbGV0IGNoaWxkcmVuID0gX2NoaWxkcmVuLmdldCh0aGlzKTtcclxuICAgICAgcmV0dXJuIGNoaWxkcmVuLmxlbmd0aCA+IGluZGV4ID8gY2hpbGRyZW5baW5kZXhdIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZHJlbigpIHtcclxuICAgICAgcmV0dXJuIF9jaGlsZHJlbi5nZXQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUNoaWxkcmVuKGtleSkge1xyXG4gICAgICB0aGlzLnJlbW92ZUNoaWxkcmVuRnJvbShfY2hpbGRyZW4uZ2V0KHRoaXMpLGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgX2NoaWxkcmVuLmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gQ29tcG91bmROb2RlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IE5PREVfTk9UX0VYSVNUUyA9IDA7XHJcbmNvbnN0IENMQVNTX05PVF9ERUZJTkVEID0gMTtcclxuY29uc3QgQ09OTkVDVElPTl9UT19JVFNFTEYgPSAyO1xyXG5jb25zdCBJTVBST1BFUl9DT05ORUNUSU9OID0gMztcclxuY29uc3QgT0JKRUNUX05PVF9GT1VORCA9IDQ7XHJcbmNvbnN0IE1BTkRBVE9SWV9QQVJBTSA9IDU7XHJcbmNvbnN0IElOQ09SUkVDVF9UWVBFID0gNjtcclxuY29uc3QgSU5DT1JSRUNUX1BBUkVOVF9OT0RFID0gNztcclxuY29uc3QgSU5DT1JSRUNUX0xJTktfVEFSR0VUID0gODtcclxuY29uc3QgSU5DT01QQVRJQkxFX0NISUxEID0gOTtcclxuXHJcbmV4cG9ydHMuTk9ERV9OT1RfRVhJU1RTID0gTk9ERV9OT1RfRVhJU1RTO1xyXG5leHBvcnRzLkNMQVNTX05PVF9ERUZJTkVEID0gQ0xBU1NfTk9UX0RFRklORUQ7XHJcbmV4cG9ydHMuQ09OTkVDVElPTl9UT19JVFNFTEYgPSBDT05ORUNUSU9OX1RPX0lUU0VMRjtcclxuZXhwb3J0cy5JTVBST1BFUl9DT05ORUNUSU9OID0gSU1QUk9QRVJfQ09OTkVDVElPTjtcclxuZXhwb3J0cy5PQkpFQ1RfTk9UX0ZPVU5EID0gT0JKRUNUX05PVF9GT1VORDtcclxuZXhwb3J0cy5NQU5EQVRPUllfUEFSQU0gPSBNQU5EQVRPUllfUEFSQU07XHJcbmV4cG9ydHMuSU5DT1JSRUNUX1RZUEUgPSBJTkNPUlJFQ1RfVFlQRTtcclxuZXhwb3J0cy5JTkNPUlJFQ1RfUEFSRU5UX05PREUgPSBJTkNPUlJFQ1RfUEFSRU5UX05PREU7XHJcbmV4cG9ydHMuSU5DT1JSRUNUX0xJTktfVEFSR0VUID0gSU5DT1JSRUNUX0xJTktfVEFSR0VUO1xyXG5leHBvcnRzLklOQ09NUEFUSUJMRV9DSElMRCA9IElOQ09NUEFUSUJMRV9DSElMRDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgRXJyb3JDb2RlIGZyb20gJy4vRXJyb3JDb2RlJztcclxuXHJcblxyXG5sZXQgRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oZWRpdG9yKXtcclxuICByZXR1cm4ge1xyXG4gICAgc2hvd01zZzpmdW5jdGlvbihlcnJvckNvZGUscGFyYW1zKSB7XHJcbiAgICAgIGxldCBtc2cgPSAnJztcclxuICAgICAgc3dpdGNoIChlcnJvckNvZGUpIHtcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5OT0RFX05PVF9FWElTVFM6XHJcbiAgICAgICAgICBtc2cgPSBgTm9kZSBvZiB0eXBlICR7cGFyYW1zLnR5cGV9IGlzIG5vdCBkZWZpbmVkLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5DTEFTU19OT1RfREVGSU5FRDpcclxuICAgICAgICAgIG1zZyA9IGBDbGFzcyAke3BhcmFtcy5jbGFzc30gaXMgbm90IGRlZmluZWQuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLkNPTk5FQ1RJT05fVE9fSVRTRUxGOlxyXG4gICAgICAgICAgbXNnID0gYENhbm5vdCBjb25uZWN0IG5vZGUgXCIke3BhcmFtcy5ub2RlfVwiIHRvIGl0c2VsZi5gO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuSU1QUk9QRVJfQ09OTkVDVElPTjpcclxuICAgICAgICAgIG1zZyA9IGBDYW5ub3QgY3JlYXRlIGNvbm5lY3Rpb24gb2YgdHlwZSBcIiR7cGFyYW1zLnR5cGV9XCIgZnJvbSBub2RlIGlkIFwiJHtwYXJhbXMubm9kZTF9XCIgdG8gbm9kZSBpZCBcIiR7cGFyYW1zLm5vZGUyfVwiLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5PQkpFQ1RfTk9UX0ZPVU5EOlxyXG4gICAgICAgICAgbXNnID0gYENhbm5vdCBmaW5kIG9iamVjdCB3aXRoIGlkIFwiJHtwYXJhbXMuaWR9XCJgO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuTUFOREFUT1JZX1BBUkFNOlxyXG4gICAgICAgICAgbXNnID0gYFBhcmFtZXRlciBcIiR7cGFyYW1zLnBhcmFtfVwiIHdhcyBleHBlY3RlZCBidXQgaW5zdGVhZCBnb3QgdW5kZWZpbmVkLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVycm9yQ29kZS5JTkNPUlJFQ1RfVFlQRTpcclxuICAgICAgICAgIG1zZyA9IGBXcm9uZyB0eXBlIG9mIGFyZ3VtZW50LiBFeHBlY3RlZCBcIiR7cGFyYW1zLnR5cGV9XCJgO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBFcnJvckNvZGUuSU5DT1JSRUNUX1BBUkVOVF9OT0RFOlxyXG4gICAgICAgICAgbXNnID0gYE5vZGUgb2YgdHlwZSBcIiR7cGFyYW1zLmNoaWxkfVwiIGNhbiBiZSBhZGRlZCBvbmx5IHRvIFwiJHtwYXJhbXMucGFyZW50fVwiIG5vZGUuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLklOQ09SUkVDVF9MSU5LX1RBUkdFVDpcclxuICAgICAgICAgIG1zZyA9IGBDYW5ub3QgY3JlYXRlIGxpbmsgY29ubmVjdGlvbiB0byBudWxsIG5vZGUuYDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRXJyb3JDb2RlLklOQ09NUEFUSUJMRV9DSElMRDpcclxuICAgICAgICAgIG1zZyA9IGBDYW5ub3QgYWRkIGNoaWxkIG9mIHR5cGUgXCIke3BhcmFtcy5jaGlsZH1cIiBpbnRvIHBhcmVudCBvZiB0eXBlIFwiJHtwYXJhbXMucGFyZW50fVwiLmA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgbXNnID0gYFVua25vd24gZXJyb3IgY29kZSBwYXNzZWQ6ICR7ZXJyb3JDb2RlfWA7XHJcbiAgICAgIH1cclxuICAgICAgaWYoZWRpdG9yKSB7XHJcbiAgICAgICAgZWRpdG9yLnNob3dNc2cobXNnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcclxuICAgICAgICAvL2FkZCB3YXJuaW5nIG1vZGU/XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IEVycm9ySGFuZGxlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuXHJcblxyXG5sZXQgTGluayA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgbGV0IF90eXBlID0gbmV3IFdlYWtNYXAoKTtcclxuICBsZXQgX291dHB1dCA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgbGV0IF9pbnB1dCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBMaW5rIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKXtcclxuICAgICAgc3VwZXIoZGF0YSxycGdzKTtcclxuICAgICAgX3R5cGUuc2V0KHRoaXMsZGF0YS50eXBlKTtcclxuICAgICAgX2lucHV0LnNldCh0aGlzLGRhdGEuaW5wdXQgPyBkYXRhLmlucHV0IDogJycpO1xyXG4gICAgICBfb3V0cHV0LnNldCh0aGlzLGRhdGEub3V0cHV0ID8gZGF0YS5vdXRwdXQgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5wKCkge1xyXG4gICAgICByZXR1cm4gX2lucHV0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRPdXQoKSB7XHJcbiAgICAgIHJldHVybiBfb3V0cHV0LmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUeXBlKCkge1xyXG4gICAgICByZXR1cm4gX3R5cGUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgIGxldCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpO1xyXG4gICAgICBkYXRhLnR5cGUgPSB0aGlzLmdldFR5cGUoKTtcclxuICAgICAgZGF0YS5pbnB1dCA9IHRoaXMuZ2V0SW5wKCk7XHJcbiAgICAgIGRhdGEub3V0cHV0ID0gdGhpcy5nZXRPdXQoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIHNldElucHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuICAgIGdldE91dHB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICBnZXRJbnB1dENvbm5lY3Rpb25zKHR5cGUpIHt9XHJcbiAgICByZW1vdmVPdXRwdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG4gICAgcmVtb3ZlSW5wdXRDb25uZWN0aW9uKHR5cGUsbGlua0lkKSB7fVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIGxldCBsaW5rSW5wID0gdGhpcy5nZXRJbnAoKTtcclxuICAgICAgbGV0IGxpbmtPdXQgPSB0aGlzLmdldE91dCgpO1xyXG4gICAgICBsZXQgaW5wT2JqID0gdGhpcy5nZXRSUEdTKCkuZmluZE5vZGUobGlua0lucCk7XHJcbiAgICAgIGxldCBvdXRPYmogPSB0aGlzLmdldFJQR1MoKS5maW5kTm9kZShsaW5rT3V0KTtcclxuICAgICAgaWYoaW5wT2JqKSBpbnBPYmoucmVtb3ZlSW5wdXRDb25uZWN0aW9uKHRoaXMuZ2V0VHlwZSgpLGxpbmtJbnApO1xyXG4gICAgICBpZihvdXRPYmopIG91dE9iai5yZW1vdmVPdXRwdXRDb25uZWN0aW9uKHRoaXMuZ2V0VHlwZSgpLGxpbmtPdXQpO1xyXG4gICAgICBfdHlwZS5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9pbnB1dC5kZWxldGUodGhpcyk7XHJcbiAgICAgIF9vdXRwdXQuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBMaW5rO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IFJFRkVSRU5DRSA9ICdyZWZlcmVuY2UnO1xyXG5jb25zdCBWSVNJQklMSVRZID0gJ3Zpc2liaWxpdHknO1xyXG5jb25zdCBBQ1RJVklUWSA9ICdhY3Rpdml0eSc7XHJcbmNvbnN0IEFDVElPTiA9ICdhY3Rpb24nO1xyXG5jb25zdCBHT1RPID0gJ2dvdG8nO1xyXG5jb25zdCBESUFMT0cgPSAnZGlhbG9nJztcclxuXHJcbmV4cG9ydHMuUkVGRVJFTkNFID0gUkVGRVJFTkNFO1xyXG5leHBvcnRzLlZJU0lCSUxJVFkgPSBWSVNJQklMSVRZO1xyXG5leHBvcnRzLkFDVElWSVRZID0gQUNUSVZJVFk7XHJcbmV4cG9ydHMuQUNUSU9OID0gQUNUSU9OO1xyXG5leHBvcnRzLkdPVE8gPSBHT1RPO1xyXG5leHBvcnRzLkRJQUxPRyA9IERJQUxPRztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogRmFzdCBVVUlEIGdlbmVyYXRvciwgUkZDNDEyMiB2ZXJzaW9uIDQgY29tcGxpYW50LlxyXG4gKiBAYXV0aG9yIEplZmYgV2FyZCAoamN3YXJkLmNvbSkuXHJcbiAqIEBsaWNlbnNlIE1JVCBsaWNlbnNlXHJcbiAqIEBsaW5rIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTk2MzEzNiMyMTk2MzEzNlxyXG4gKiovXHJcbnZhciBVVUlEID0gKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBzZWxmID0ge307XHJcbiAgdmFyIGx1dCA9IFtdOyBmb3IgKHZhciBpPTA7IGk8MjU2OyBpKyspIHsgbHV0W2ldID0gKGk8MTY/JzAnOicnKSsoaSkudG9TdHJpbmcoMTYpOyB9XHJcbiAgc2VsZi5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGQwID0gTWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7XHJcbiAgICB2YXIgZDEgPSBNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmZ8MDtcclxuICAgIHZhciBkMiA9IE1hdGgucmFuZG9tKCkqMHhmZmZmZmZmZnwwO1xyXG4gICAgdmFyIGQzID0gTWF0aC5yYW5kb20oKSoweGZmZmZmZmZmfDA7XHJcbiAgICByZXR1cm4gbHV0W2QwJjB4ZmZdK2x1dFtkMD4+OCYweGZmXStsdXRbZDA+PjE2JjB4ZmZdK2x1dFtkMD4+MjQmMHhmZl0rJy0nK1xyXG4gICAgICBsdXRbZDEmMHhmZl0rbHV0W2QxPj44JjB4ZmZdKyctJytsdXRbZDE+PjE2JjB4MGZ8MHg0MF0rbHV0W2QxPj4yNCYweGZmXSsnLScrXHJcbiAgICAgIGx1dFtkMiYweDNmfDB4ODBdK2x1dFtkMj4+OCYweGZmXSsnLScrbHV0W2QyPj4xNiYweGZmXStsdXRbZDI+PjI0JjB4ZmZdK1xyXG4gICAgICBsdXRbZDMmMHhmZl0rbHV0W2QzPj44JjB4ZmZdK2x1dFtkMz4+MTYmMHhmZl0rbHV0W2QzPj4yNCYweGZmXTtcclxuICB9XHJcbiAgcmV0dXJuIHNlbGY7XHJcbn0pKCk7XHJcblxyXG5leHBvcnRzLlVVSUQgPSBVVUlEO1xyXG5cclxubGV0IGluZGV4T2ZPYmplY3QgPSBmdW5jdGlvbihhcnJheSxvYmopIHtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZihhcnJheVtpXSA9PT0gb2JqKSByZXR1cm4gaTtcclxuICB9XHJcbiAgcmV0dXJuIC0xO1xyXG59O1xyXG5cclxuZXhwb3J0cy5pbmRleE9mT2JqZWN0ID0gaW5kZXhPZk9iamVjdDtcclxuXHJcblxyXG5leHBvcnRzLmdldE9iamVjdEJ5SWQgPSBmdW5jdGlvbihhcnJheSxpZCkge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmKGFycmF5W2ldLmdldElkKCkgPT09IGlkKSByZXR1cm4gYXJyYXlbaV07XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxubGV0IGdldEluZGV4QnlJZCA9IGZ1bmN0aW9uKGFycmF5LGlkKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYoYXJyYXlbaV0uZ2V0SWQoKSA9PT0gaWQpIHJldHVybiBpO1xyXG4gIH1cclxuICByZXR1cm4gLTE7XHJcbn07XHJcbmV4cG9ydHMuZ2V0SW5kZXhCeUlkID0gZ2V0SW5kZXhCeUlkO1xyXG5cclxuZXhwb3J0cy5hZGRPYmplY3RUb0FycmF5ID0gZnVuY3Rpb24oYXJyYXksb2JqLGV4cGVjdGVkVHlwZSkge1xyXG4gIGlmKGV4cGVjdGVkVHlwZSAhPT0gdW5kZWZpbmVkICYmIGV4cGVjdGVkVHlwZSAhPT0gbnVsbCkge1xyXG4gICAgaWYoZXhwZWN0ZWRUeXBlLmlzUHJvdG90eXBlT2Yob2JqKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHR5cGUgb2Ygb2JqZWN0IHBhc3NlZC4gRXhwZWN0ZWQgJ1xyXG4gICAgICArZXhwZWN0ZWRUeXBlLmNvbnN0cnVjdG9yLm5hbWUrJyBvYmplY3QuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmKGluZGV4T2ZPYmplY3QoYXJyYXksb2JqKSA9PT0gLTEpIHtcclxuICAgIGFycmF5LnB1c2gob2JqKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRPYmplY3RzQnlUeXBlID0gZnVuY3Rpb24oYXJyYXksdHlwZSkge1xyXG4gIGxldCBvdXQgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZih0eXBlLmlzUHJvdG90eXBlT2YoYXJyYXlbaV0pKSB7XHJcbiAgICAgIG91dC5wdXNoKGFycmF5W2ldKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG91dDtcclxufTtcclxuXHJcbmV4cG9ydHMucmVtb3ZlT2JqZWN0QnlJZCA9IGZ1bmN0aW9uKGFycmF5LGlkKSB7XHJcbiAgbGV0IGluZGV4ID0gZ2V0SW5kZXhCeUlkKGFycmF5LGlkKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGxldCBzcGxpY2VkID0gYXJyYXkuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgaWYoc3BsaWNlZC5kaXNwb3NlKSBzcGxpY2VkLmRpc3Bvc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59XHJcblxyXG5leHBvcnRzLnJlbW92ZU9iamVjdEZyb21BcnJheSA9IGZ1bmN0aW9uKGFycmF5LG9iaikge1xyXG4gIGxldCBpbmRleCA9IGluZGV4T2ZPYmplY3QoYXJyYXksb2JqKTtcclxuICBpZihpbmRleCAhPT0gLTEpIHtcclxuICAgIGxldCBzcGxpY2VkID0gYXJyYXkuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgaWYoc3BsaWNlZC5kaXNwb3NlKSBzcGxpY2VkLmRpc3Bvc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIGFycmF5O1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IEJhc2VOb2RlIGZyb20gJy4uL2NvcmUvQmFzZU5vZGUnO1xyXG5pbXBvcnQgTGlua1R5cGUgICBmcm9tICcuLi9jb3JlL0xpbmtUeXBlJztcclxuXHJcbmxldCBBbnN3ZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgLy9XZWFrIG1hcHMgYXJlIG5ldyBmZWF0dXJlIHRvIEphdmFTY3JpcHQuIFdlIGNhbiBzdG9yZSBwcml2YXRlXHJcbiAgLy9vYmplY3QgcHJvcGVydGllcyBpbiBrZXkvdmFsdWUgcGFpcnMgdXNpbmcgb3VyIGluc3RhbmNlIGFzIHRoZSBrZXksXHJcbiAgLy9hbmQgb3VyIGNsYXNzIGNhbiBjYXB0dXJlIHRob3NlIGtleS92YWx1ZSBtYXBzIGluIGEgY2xvc3VyZS5cclxuICBsZXQgX3RleHQgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gY2xhc3MgQW5zd2VyIGV4dGVuZHMgQmFzZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSxycGdzKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEscnBncyk7XHJcbiAgICAgIF90ZXh0LnNldCh0aGlzLGRhdGEudGV4dCA/IGRhdGEudGV4dCA6ICcnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS50ZXh0ID0gdGhpcy5nZXRUZXh0KCk7XHJcblxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0KHZhbHVlKSB7XHJcbiAgICAgIF90ZXh0LnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0KCkge1xyXG4gICAgICByZXR1cm4gX3RleHQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhbGsoKSB7XHJcbiAgICAgIGxldCB0YWxrcyA9IGdldE91dHB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkdPVE8pO1xyXG4gICAgICByZXR1cm4gdGFsa3MgPyB0YWxrc1swXSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlSW5wdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5WSVNJQklMSVRZOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5wdXRDb25uZWN0aW9ucyhMaW5rVHlwZS5WSVNJQklMSVRZKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5BQ1RJVklUWTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuQUNUSVZJVFkpLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYW5DcmVhdGVPdXRwdXRDb25uZWN0aW9uKHR5cGUpIHtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaW5rVHlwZS5HT1RPOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3V0cHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuR09UTykubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgIF90ZXh0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG59KSgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEFuc3dlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBDb21wb3VuZE5vZGUgZnJvbSAnLi4vY29yZS9Db21wb3VuZE5vZGUnO1xyXG5pbXBvcnQgTGlua1R5cGUgICBmcm9tICcuLi9jb3JlL0xpbmtUeXBlJztcclxuaW1wb3J0IFV0aWxzICAgICAgZnJvbSAnLi4vY29yZS9VdGlscyc7XHJcblxyXG5cclxuY29uc3QgS0VZX1RBTEtTID0gJ3RhbGtzJztcclxuXHJcbmxldCBEaWFsb2cgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IF9zdGFydCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBEaWFsb2cgZXh0ZW5kcyBDb21wb3VuZE5vZGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfc3RhcnQuc2V0KHRoaXMsZGF0YS5zdGFydFRhbGsgPyBkYXRhLnN0YXJ0VGFsayA6ICcnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgZGF0YS5zdGFydFRhbGsgPSB0aGlzLmdldFN0YXJ0VGFsaygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BZGRDaGlsZCh0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0eXBlID09PSAnVGFsayc7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3RhcnRUYWxrKHRhbGtJZCkge1xyXG4gICAgICBfc3RhcnQuc2V0KHRoaXMsdGFsa0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdGFydFRhbGsoKSB7XHJcbiAgICAgIHJldHVybiBfc3RhcnQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuVklTSUJJTElUWTpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldElucHV0Q29ubmVjdGlvbnMoTGlua1R5cGUuVklTSUJJTElUWSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuQUNUSVZJVFk6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnB1dENvbm5lY3Rpb25zKExpbmtUeXBlLkFDVElWSVRZKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQ3JlYXRlT3V0cHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuRElBTE9HOlxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlQ2hpbGRyZW4oS0VZX1RBTEtTKTtcclxuICAgICAgX3N0YXJ0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gRGlhbG9nO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IFV0aWxzICAgICAgZnJvbSAnLi4vY29yZS9VdGlscyc7XHJcbmltcG9ydCBDb21wb3VuZE5vZGUgZnJvbSAnLi4vY29yZS9Db21wb3VuZE5vZGUnO1xyXG5pbXBvcnQgTGlua1R5cGUgICBmcm9tICcuLi9jb3JlL0xpbmtUeXBlJztcclxuXHJcbmNvbnN0IEtFWV9BTlNXRVJTID0gJ2Fuc3dlcnMnO1xyXG5cclxubGV0IFRhbGsgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gIGxldCBfdGV4dCA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4gIHJldHVybiBjbGFzcyBUYWxrIGV4dGVuZHMgQ29tcG91bmROb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfdGV4dC5zZXQodGhpcyxkYXRhLnRleHQgPyBkYXRhLnRleHQgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGV4dCA9IHRoaXMuZ2V0VGV4dCgpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0KHZhbHVlKSB7XHJcbiAgICAgIF90ZXh0LnNldCh0aGlzLHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0KCkge1xyXG4gICAgICByZXR1cm4gX3RleHQuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkFkZENoaWxkKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHR5cGUgPT09ICdBbnN3ZXInO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNyZWF0ZUlucHV0Q29ubmVjdGlvbih0eXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgTGlua1R5cGUuR09UTzpcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE91dHB1dENvbm5lY3Rpb24odHlwZSxsaW5rSWQpIHt9XHJcbiAgICBnZXRPdXRwdXRDb25uZWN0aW9ucyh0eXBlKSB7fVxyXG4gICAgcmVtb3ZlT3V0cHV0Q29ubmVjdGlvbih0eXBlLGxpbmtJZCkge31cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVDaGlsZHJlbihLRVlfQU5TV0VSUyk7XHJcbiAgICAgIF90ZXh0LmRlbGV0ZSh0aGlzKTtcclxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gVGFsaztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBDb21wb3VuZE5vZGUgZnJvbSAnLi4vY29yZS9Db21wb3VuZE5vZGUnO1xyXG5pbXBvcnQgUXVlc3RTdGF0dXMgIGZyb20gJy4vUXVlc3RTdGF0dXMnO1xyXG5cclxuY29uc3QgS0VZX1RBU0tTID0gJ3Rhc2tzJ1xyXG5cclxubGV0IFF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBfdGl0bGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfZGVzY3JpcHRpb24gPSBuZXcgV2Vha01hcCgpO1xyXG4gIGxldCBfc3RhdHVzID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIFF1ZXN0IGV4dGVuZHMgQ29tcG91bmROb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEscnBncykge1xyXG4gICAgICBzdXBlcihkYXRhLHJwZ3MpO1xyXG4gICAgICBfdGl0bGUuc2V0KHRoaXMsZGF0YS50aXRsZSA/IGRhdGEudGl0bGUgOiAnJyk7XHJcbiAgICAgIF9kZXNjcmlwdGlvbi5zZXQodGhpcyxkYXRhLmRlc2NyaXB0aW9uID8gZGF0YS5kZXNjcmlwdGlvbiA6ICcnKTtcclxuICAgICAgX3N0YXR1cy5zZXQodGhpcyxkYXRhLnN0YXR1cyA/IGRhdGEuc3RhdHVzIDogUXVlc3RTdGF0dXMuSU5DT01QTEVURSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgbGV0IGRhdGEgPSBzdXBlci5nZXREYXRhKCk7XHJcbiAgICAgIGRhdGEudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB0aGlzLmdldERlc2NyaXB0aW9uKCk7XHJcbiAgICAgIGRhdGEuc3RhdHVzID0gdGhpcy5nZXRTdGF0dXMoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQWRkQ2hpbGQodHlwZSkge1xyXG4gICAgICByZXR1cm4gdHlwZSA9PT0gJ1Rhc2snO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpdGxlKHZhbHVlKSB7XHJcbiAgICAgIF90aXRsZS5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGl0bGUoKSB7XHJcbiAgICAgIHJldHVybiBfdGl0bGUuZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlc2NyaXB0aW9uKHZhbHVlKSB7XHJcbiAgICAgIF9kZXNjcmlwdGlvbi5zZXQodGhpcyx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGVzY3JpcHRpb24oKSB7XHJcbiAgICAgIHJldHVybiBfZGVzY3JpcHRpb24uZ2V0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXR1cyh2YWx1ZSkge1xyXG4gICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgY2FzZSBRdWVzdFN0YXR1cy5DT01QTEVURUQ6XHJcbiAgICAgICAgY2FzZSBRdWVzdFN0YXR1cy5GQUlMRUQ6XHJcbiAgICAgICAgICBfc3RhdHVzLnNldCh0aGlzLHZhbHVlKTtcclxuICAgICAgICBjYXNlIFF1ZXN0U3RhdHVzLklOQ09NUExFVEU6XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIF9zdGF0dXMuc2V0KHRoaXMsUXVlc3RTdGF0dXMuSU5DT01QTEVURSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdGF0dXMoKSB7XHJcbiAgICAgIHJldHVybiBfc3RhdHVzLmdldCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVDaGlsZHJlbihLRVlfVEFTS1MpO1xyXG4gICAgICBfdGl0bGUuZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfZGVzY3JpcHRpb24uZGVsZXRlKHRoaXMpO1xyXG4gICAgICBfc3RhdHVzLmRlbGV0ZSh0aGlzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxufSkoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBRdWVzdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmNvbnN0IElOQ09NUExFVEUgPSAncXVlc3RJbmNvbXBsZXRlJztcclxuY29uc3QgQ09NUExFVEVEID0gJ3F1ZXN0Q29tcGxldGVkJztcclxuY29uc3QgRkFJTEVEID0gJ3F1ZXN0RmFpbGVkJztcclxuXHJcbmV4cG9ydHMuSU5DT01QTEVURSA9IElOQ09NUExFVEU7XHJcbmV4cG9ydHMuQ09NUExFVEVEID0gQ09NUExFVEVEO1xyXG5leHBvcnRzLkZBSUxFRCA9IEZBSUxFRDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmltcG9ydCBCYXNlTm9kZSBmcm9tICcuLi9jb3JlL0Jhc2VOb2RlJztcclxuXHJcbmxldCBUYXNrID0gKGZ1bmN0aW9uKCl7XHJcbiAgcmV0dXJuIGNsYXNzIFRhc2sgZXh0ZW5kcyBCYXNlTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vdG8gZG9cclxuICB9O1xyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUYXNrO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IGRhdGEgZnJvbSAnLi4vZGF0YS9kYXRhLmpzb24nO1xyXG5pbXBvcnQgUlBHU3lzdGVtIGZyb20gJy4vcnBncy9SUEdTeXN0ZW0nO1xyXG5cclxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuICAkKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBycGdzMSA9IG5ldyBSUEdTeXN0ZW0oKTtcclxuICAgIHJwZ3MxXHJcbiAgICAuYWRkQWN0b3IoJ2FjdDEnLHtuYW1lOidBZGFtJ30pLmlucCgnZGlhbG9nJywnZGxnMScpXHJcbiAgICAuYWRkQ29uZGl0aW9uKCdjb25kMScse2NvZGU6YFxyXG4gICAgICAgIChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgYWxlcnQoXCJDb25kaXRpb24gdGVzdCFcIik7XHJcbiAgICAgICAgICAvL3JldHVybiB0cnVlO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICAgIGB9KS5vdXQoJ3Zpc2liaWxpdHknLCd0bGswYW5zMScpXHJcbiAgICAuYWRkRGlhbG9nKCdkbGcxJyx7c3RhcnRUYWxrOid0bGswJ30pLm91dCgnZGlhbG9nJywnYWN0MScpXHJcbiAgICAgIC5hZGRUYWxrKCd0bGswJyx7dGV4dDonVGhpcyBpcyB0YWxrIDAuJ30pXHJcbiAgICAgICAgLmFkZEFuc3dlcigndGxrMGFuczEnLHt0ZXh0OidBbnN3ZXIxJ30pLm91dCgnZ290bycsJ3RsazEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnAoJ3Zpc2liaWxpdHknLCdjb25kMScpXHJcbiAgICAgICAgLmFkZEFuc3dlcigndGxrMGFuczInLHt0ZXh0OidBbnN3ZXIyJ30pLm91dCgnZ290bycsJ3RsazInKVxyXG4gICAgICAgIC5hZGRBbnN3ZXIoJ3RsazBhbnMzJyx7dGV4dDonQW5zd2VyMyd9KS5vdXQoJ2dvdG8nLCd0bGszJylcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGsxJyx7dGV4dDonVGhpcyBpcyB0YWxrIDEuJ30pLmlucCgnZ290bycsJ3RsazBhbnMxJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGsxYW5zMScse3RleHQ6J0Fuc3dlcjEnfSlcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGsyJyx7dGV4dDonVGhpcyBpcyB0YWxrIDIuJ30pLmlucCgnZ290bycsJ3RsazBhbnMyJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGsyYW5zMScse3RleHQ6J0Fuc3dlcjEnfSlcclxuXHJcbiAgICAgIC5hZGRUYWxrKCd0bGszJyx7dGV4dDonVGhpcyBpcyB0YWxrIDMuJ30pLmlucCgnZ290bycsJ3RsazBhbnMzJylcclxuICAgICAgICAuYWRkQW5zd2VyKCd0bGszYW5zMScse3RleHQ6J0Fuc3dlcjEnfSk7XHJcbiAgICBsZXQgcnBnczFTZXJpYWxpemVkID0gcnBnczEuc2VyaWFsaXplRGF0YSgpO1xyXG4gICAgY29uc29sZS5sb2coXCJycGdzMVwiLHJwZ3MxU2VyaWFsaXplZCk7XHJcblxyXG4gICAgbGV0IHJwZ3MyID0gbmV3IFJQR1N5c3RlbShKU09OLnBhcnNlKHJwZ3MxU2VyaWFsaXplZCkpO1xyXG4gICAgY29uc29sZS5sb2cocnBnczIuc2VyaWFsaXplRGF0YSgpKTtcclxuICB9KTtcclxuXHJcbn0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiJdfQ==
